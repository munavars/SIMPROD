<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Program Details Form Wizard">
      <meta name="author" content="Yokohama">
      <meta name="keyword" content="YMPACT">
      <title>Liability Book List</title>
      
      
            
<!-- Bootstrap core CSS -->
         <link href="resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="resources/css/bootstrap-reset.css" rel="stylesheet">
       
          <!--Date Picker--> 
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datepicker/css/datepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-daterangepicker/daterangepicker-bs3.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-timepicker/compiled/timepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-colorpicker/css/colorpicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
      
    <!--external css-->
    <link href="resources/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="resources/assets/data-tables/DT_bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />


      <!--right slidebar-->
      <link href="resources/css/slidebars.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="resources/css/style.css" rel="stylesheet">
    <link href="resources/css/style-responsive.css" rel="stylesheet" />
    <link href="resources/css/status_icons.css" rel="stylesheet" />
    
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
	

<link rel="stylesheet" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.dataTables.min.css">
<style>
		 td,th {
		    white-space:nowrap;
		}
		th{
				text-align: center;
			}
 		.dataTables_wrapper .dataTables_filter {
		    width: 50%;
		} 
		.dataTables_filter label input{
		 width: 50%;
		}
		.right{
		text-align:right;
		}
</style>

   </head>
   <body>
      <section id="container" class="sidebar-closed">
         <!--header start-->
         <header class="header dark-bg">
            <div class="sidebar-toggle-box" id="sidebar-toggle-box"  style="display:none">
               <i class="fa fa-bars"></i>
            </div>
            <!--logo start-->
            <a href="" class="logo"><img src="resources/img/yokohama-logo.svg" width="132" height="52"></a>
            <!--logo end-->
            <div class="nav notify-row" id="top_menu">
               <!--  notification start -->
               <ul class="nav top-menu">
              <!-- settings start -->
              <!-- settings end -->
             
            <!-- notification dropdown start-->
             <li id="header_notification_bar" class="dropdown">
                  <!-- <a data-toggle="dropdown" class="dropdown-toggle" href="#">

                      <i class="fa fa-bell-o"></i>
                      <span class="badge bg-important">7</span>
                  </a> -->
<!--                   <ul class="dropdown-menu extended notification">
                      <div class="notify-arrow notify-arrow-yellow"></div>
                      <li>
                          <p class="yellow">You have 7 new notifications</p>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-success"><i class="fa fa-bell"></i></span>
                              #20543 has been approved
                              <span class="small italic">30 mins</span>
                          </a>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                               #20543 has been rejected
                              <span class="small italic">4 hrs</span>
                          </a>
                      </li>
                  </ul> -->
              </li>
              <!-- notification dropdown end -->
          </ul>
            </div>
            <div class="top-nav ">
               <ul class="nav pull-right top-menu">
                 <!--  <li>
                     <input type="text" class="form-control search" placeholder="Search">
                  </li> -->
                  <!-- user login dropdown start-->
                  <li class="dropdown">
                     <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                     <!-- <img alt="" src="resources/img/avatar1_small.jpg"> -->
                     <span class="username" id="loginUserName"></span>
                     <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
<!--                         <li><a href="#"><i class=" fa fa-suitcase"></i>Profile</a></li>
                        <li><a href="#"><i class="fa fa-cog"></i> Settings</a></li>
                        <li><a href="#"><i class="fa fa-bell-o"></i> Notification</a></li> -->
                        <li><a id="logout-btn" href="/SIM/logout"><i class="fa fa-key"></i> Log Out</a></li>
                     </ul>
                  </li>
                  <!-- user login dropdown end -->
               </ul>
            </div>
         </header>
         <!--header end-->
         <!--sidebar start-->
         <aside>
            <div id="sidebar"  class="nav-collapse ">
               <!-- sidebar menu start-->
               <ul class="sidebar-menu" id="nav-accordion">
                  <li>
                     <a class="" href="processLogin">
                     <i class="fa fa-dashboard"></i>
                     <span>My Dashboard</span>
                     </a>
                  </li>
                 <!--  <li>
                     <a id="create-program" class="" href="program_details2.html">
                     <i class="fa fa-tasks"></i>
                     <span>Create New Program</span>
                     </a>
                  </li>
                  <li>
                     <a id="edit-program" class="" href="program_details2.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Program</span>
                     </a>
                  </li>
                  <li>
                     <a class="" href="program_details_rejected.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Rejected Program</span>
                     </a>
                  </li>
                  <li>
                     <a href="login">
                     <i class="fa fa-user"></i>
                     <span>Login Page</span>
                     </a>
                  </li> -->
               </ul>
               <!-- sidebar menu end-->
            </div>
         </aside>
         <!--sidebar end-->
   
         <!--main content start-->
         <section id="main-content">
            <section class="wrapper site-min-height">
               <!-- page start-->
                <div id="program-parent-div" class="row">
                  <div class="col-lg-12">
                     <!--progress bar start-->
                     <section class="panel">
                        <header class="panel-heading">
                           <h3>Liability Book List</h3>
                        </header>
                        <div class="panel-body">
                          <div class="clearfix">
<!--                              <div class="col-lg-12">
                                <h5 data-original-title="Customer Details" data-content="Click on the grey button below to see more info about this customer. Click again to hide it." data-placement="top" data-trigger="hover" class="popovers">CCM Details</h5>
                                

                           </div> -->
                       </div>
                       </div>
						
                <!-- START STEP 1: PROGRAM INFO -->
                           <form id="wizard-validation-form" name="wizard-validation-form" class="cmxform" action="#">
                              <div>
                                 <section>
											<div class="form-group clearfix">
												<div class="col-lg-12">
													<h5>Book List</h5>

                                <div>
                      <table class="table table-striped table-hover table-bordered" id="booklist">
						<thead>
						<tr class="rowvis" style="background-color: #cacbce;">
						<th>Book Label</th>
	                    <th>Book Date</th>
						<th>Book Of Record</th>
						<th>Create Date</th>
	                    <th>Create By</th>
	                    <th>Delete</th>
						</tr>
						</thead>
						
                              <tbody>
                                                       
                              </tbody>
                      </table>
                      
                      </div>
                                 
                            </div> 

                              
                          
                         
                      </div>
													
												<!-- END ROW 3 & Program Details section-->

												<div class="modal-content">
																	<div class="modal-footer">
																		 <!-- <a href="javascript: resetChanges();"><button data-dismiss="modal" class="btn btn-default"
																			id="program-save-modal-cancel" type="button">Delete Marked</button></a> -->
																		 <button
																				class="btn btn-info" id="program-save-modal-ok"
																				type="button" onclick="deleteBookList();">
																				<!-- <i class="fa fa-save"></i> -->&nbsp;&nbsp; Delete Marked Records
																			</button>  
																	</div>
																</div>

												
											</div> <!-- Div End - Program Detail-->

											<!-- END ROW 4 -->

											<!-- Start ROW 8 -->
											<div class="clearfix"></div>
											<div class="clearfix"></div>
											
											<!-- END ROW 8 -->

												<div class="modal fade" id="myModal1" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-confirmation-modal-close"
																			type="button" class="close" data-dismiss="modal"
																			aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Confirmation</h4>
																	</div>
																	<div class="modal-body">
																		<!-- <div class="space15">&nbsp;</div> -->
																		<div class="text-center">
																			<span id="confirmMessage"></span>
																		</div>
																		<!-- <div class="space15"></div> -->
																	</div>
																	<div class="modal-footer">
																		<button class="btn btn-info" type="button"
																			id="program-confirmation-modal-ok"
																			data-toggle="modal" href="#myModal1">
																			<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																		</button>
																	</div>
																</div>
															</div>
														</div>
														
														<div class="modal fade" id="myModal2" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-error-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Error / Warning (s)</h4>
																	</div>
																	<div class="modal-body">
																		<!-- <div class="space15">&nbsp;</div> -->
																		<div class="text-center">
																			<span id="errorMessageModal"></span>
																		</div>
																		<!-- <div class="space15"></div> -->
																	</div>
																	<div class="modal-footer">
																		<button class="btn btn-info" type="button"
																			id="program-error-modal-ok" data-toggle="modal"
																			href="#myModal2">
																			<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																		</button>
																	</div>
																</div>
															</div>
														</div>

											</div>
											</section>
      <!---- END Review / Confirm Section -->
      </div>
       </form>
        </div>
      </section><!-- end panel section -->
      </div>
      </div>
      <!-- page end-->
      </section><!-- end wrapper site-min-height -->
      </section><!-- end #maincontent -->
      <!--main content end-->
          
      <!--footer start-->
      <footer class="site-footer">
         <div class="text-center">
            2017 &copy; Yokohama Tire Corporation. All rights reserved. The Yokohama Rubber Company Limited
            <a href="#" class="go-top">
            <i class="fa fa-angle-up"></i>
            </a>
         </div>
      </footer>
      <!--footer end-->
      </section>
      <!-- END section id="container" FIRST section after opening body tag  -->

       
      <!-- js placed at the end of the document so the pages load faster -->
    <!--   <script src="resources/js/jquery.js"></script> -->
    <script src="resources/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script src="resources/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="resources/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="resources/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="resources/js/jquery.scrollTo.min.js"></script>
    <script src="resources/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
    <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
    <!-- <script src="resources/js/advanced-form-components.js"></script> -->
    <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
    <script src="resources/js/respond.min.js" ></script>
 
	
  <!--right slidebar-->
  <script src="resources/js/slidebars.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
     <!--  <script type="text/javascript" src="resources/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script> -->
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/moment.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
    <!--common script for all pages-->
    <script src="resources/js/common-scripts.js"></script>

      <!--script for this page-->



  <!--  Validation setup Ends -->
      <!--select2-->
      <script type="text/javascript">
  	var deleteList=[];
         function openSidebar() {
             $('#main-content').css({
                 'margin-left': '210px'
             });
             $('#sidebar > ul').show();
             $('#sidebar').css({
                 'margin-left': '0'
             });
             $("#container").removeClass("sidebar-closed");
             $('#sidebar-toggle-box').css({
                 'display': 'block'
             });
         }

         
         function resetChanges(){
        	 document.getElementById("wizard-validation-form").reset();
        	 $('#pytddiv').hide();
        	 $('#cytddiv').hide();
        	 $('#refreshdiv').hide();
         }
         
 function fnPopulateDropdown(elementId, items){
			 
			 if(items != null){
	         		$.each(items, function (i, item) {
					    $('#'+ elementId).append($('<option>', { 
					        value: item.value,
					        text : item.key 
					    }));
					});
	         	}
			 //code to select the default value in period dropdown
	         	if((elementId=='pytd_period_inputselect')||(elementId=='cytd_period_inputselect')){
					var currentDate=new Date();
	      			var currentMonth=currentDate.getMonth().toString();
	      			var currentYear=currentDate.getFullYear();
	      			if(currentMonth.length==1){
	      				if(currentMonth==0){
	      					currentMonth=12;
	      					currentYear=currentYear-1;
	      				}
	      				currentMonth='0'+currentMonth;
	      			}
	      			period=currentYear+''+currentMonth+'01';
	      			$('#pytd_period_inputselect').val(period);
	      			$('#cytd_period_inputselect').val(period);
	      		}
	         	
			}
 
 
 function createBookList(){

	 if(($('#booklabelnew').val()=='')||($('#bookdatenew').val()=='')){
		 message="Kindly enter the Book Label and Book Date.";		        		
 		 $("#errorMessageModal").html(message);
			$('#myModal2').modal('toggle');
		 return;
	 }
	 var dalBookList = new Object();
	 dalBookList.bookLabel=$('#booklabelnew').val();
	 if($('#bookRecordnew').is(':checked')){
		 dalBookList.bookRecord='1';
	 }else{
		 dalBookList.bookRecord='0';
	 }	 
	 dalBookList.bookDate=Date.parse($('#bookdatenew').val());
	 
	 
	 $.ajax({ 
        	type: "POST",
        	dataType: "json",
       		url: '/SIM/accrual/v1/createBookList',
       		contentType: 'application/json',
       		dataType: "text",
			data: JSON.stringify(dalBookList),
        	success: function(response){
	        	table.ajax.url('/SIM/accrual/v1/getBookList').load();
	        	if(response=="success"){
	            	message="Data Saved Successfully";
	            	$("#confirmMessage").html(message);
					$('#myModal1').modal('toggle');
	        	}else{
	        		message="Issue occured while processing your request. Please try again later.";		        		
	        		$("#errorMessageModal").html(message);
					$('#myModal2').modal('toggle');
	        	}
	             
			
        	},
        	failure: function(response){
        		alert("Wrongly done");
        	}});
 }
 
 
 function populateDeleteList(event){
		var id=(event.id).substring(6);

		var bookId=$('#delete'+id).data('id');
		
		if(deleteList.indexOf(bookId)==-1)
		{
			deleteList.push(bookId);
		}else{
			deleteList.splice(deleteList.indexOf(bookId),1)
		}
	}
 
 
 function deleteBookList(){
	 console.log(deleteList);

	if(deleteList.length==0){
		 message="Kindly select atlest one record to delete.";		        		
 		 $("#errorMessageModal").html(message);
			$('#myModal2').modal('toggle');
		 return;
		
	}
	 
	 $.ajax({ 
        	type: "POST",
        	dataType: "json",
       		url: '/SIM/accrual/v1/deleteBookList',
       		contentType: 'application/json',
       		dataType: "text",
			data: JSON.stringify(deleteList),
        	success: function(response){
	        	table.ajax.url('/SIM/accrual/v1/getBookList').load();
	        	if(response=="success"){
	            	message="Data Deleted Successfully";
	            	$("#confirmMessage").html(message);
					$('#myModal1').modal('toggle');
	        	}else{
	        		message="Issue occured while processing your request. Please try again later.";		        		
	        		$("#errorMessageModal").html(message);
					$('#myModal2').modal('toggle');
	        	}
	        	deleteList=[];    	
        	},
        	failure: function(response){
        		alert("Wrongly done");
        	}});
 }
 
      </script>
      <!--this page  script only-->
     <!--  <script src="resources/js/advanced-form-components.js"></script> -->
      <script src="resources/js/editable-table-form.js"></script>
          
    <!-- Inline javascript to set the user name from model attribute Begin -->
	<script type="text/javascript" th:inline="javascript">
	
		 $(document).ready(function() {
			 
		   var modelAttributeValue = [[${loginUserNameValue}]];
		   $("#loginUserName").html(modelAttributeValue);
		   var emp = [[${EmployeeInfo}]];
		   if(2!=emp[0].ROLE_ID)
		   	{
		   		openSidebar();
			}
		   
		   $.ajax({ 
	           	type: "GET",
	           	dataType: "json",
	          		url: '/SIM/ccm/v1/getPeriodDropDown',
	           	success: function(response){
	           	fnPopulateDropdown('pytd_period_inputselect', response);	
	           	fnPopulateDropdown('cytd_period_inputselect', response);
	           	},
	           	failure: function(response){
	           		alert("Wrongly done");
	           	}
		   });
		   
   
		   
		   
	    	$('#booklist th').attr('style', 'padding-left: 20px !important;padding-right:20px !important');
	    	   
	    	table=$("#booklist").DataTable( {
				 oLanguage: {
					 "sEmptyTable": "No data available for this selection"
					 },
				processing: true,	 
				lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],	 
				
			    ajax: {
			        url: '/SIM/accrual/v1/getBookList',
			        dataSrc: "data",
			        type: "GET",
			    },
			  
		    
			    columns: [	
					
			    	{ data: "bookLabel" },
		            { data: "bookDate" },
		            { data: "bookRecord", 
		            	orderable: false,
		            	className:"center",
		            	render: function ( data, type, row, meta ) {
	                    if(type === 'display'){	                        
							if(data=='1'){
		                   		data = '<input type="checkbox" checked id="bookRecord'+meta.row+'" value="" disabled>'; 
							}else if(data=='new'){
								data = '<input type="checkbox" id="bookRecordnew" value="" >';	
							}
							else{
								data = '<input type="checkbox" id="bookRecord'+meta.row+'" value="" disabled>';	
							}
	                    }

	                    return data;
	                }          
		            },
		            { data: "createdDate"},
		            { data: "createdUser" },
		            { data: "delete", 
		            	orderable: false,
		            	className:"center",
		            	render: function ( data, type, row, meta ) {
	                    if(type === 'display'){	                        
							if(data=='add'){
								data='<a href="#" onclick="createBookList();"><button data-dismiss="modal" class="btn btn-default" id="add" type="button">Create</button></a';
							}else{
			                   data = '<input type="checkbox" id="delete'+meta.row+'" value="" data-id='+row.id+' onchange="populateDeleteList(this)">'; 
							}
	                    }

	                    return data;
	                }},	           
		           
		            { data: "id",
	                	visible: false,
	                	searchable: false
	                	}
	      ]
			});
	    	
	    	$('#booklist').on('draw.dt', function () {
	             //$('[data-toggle="tooltip"]').tooltip();
	             $('#bookdatenew').datepicker().on('changeDate', function(e){
	            	    $(this).datepicker('hide');
	             });
	         });
		   
		   $('#refresh').change(function(){
			   if($(this).prop("checked")) {
			     $('#refreshdiv').show();
			   } else {
			     $('#refreshdiv').hide();
			   }
			 });
		   
		   $('#cytd').change(function(){
			   if($(this).prop("checked")) {
			     $('#cytddiv').show();
			   } else {
			     $('#cytddiv').hide();
			   }
			 });
		   
		   $('#pytd').change(function(){
			   if($(this).prop("checked")) {
			     $('#pytddiv').show();
			   } else {
			     $('#pytddiv').hide();
			   }
			 });
		   
		   $('#review').change(function(){
			   if($(this).prop("checked")) {
			     $('#reviewdiv').show();
			   } else {
			     $('#reviewdiv').hide();
			   }
			 });
		   
		}); 
		
		
	</script>
	<!-- Inline javascript to set the user name from model attribute End -->

       
   </body>
</html>