<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Program Details Form Wizard">
      <meta name="author" content="Yokohama">
      <meta name="keyword" content="YMPACT">
      <title>Accrual Calculation</title>
      
                  
<!-- Bootstrap core CSS -->
         <link href="resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="resources/css/bootstrap-reset.css" rel="stylesheet">
       
          <!--Date Picker--> 
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datepicker/css/datepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-daterangepicker/daterangepicker-bs3.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-timepicker/compiled/timepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-colorpicker/css/colorpicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
      
    <!--external css-->
    <link href="resources/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="resources/assets/data-tables/DT_bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />


      <!--right slidebar-->
      <link href="resources/css/slidebars.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="resources/css/style.css" rel="stylesheet">
    <link href="resources/css/style-responsive.css" rel="stylesheet" />
    <link href="resources/css/status_icons.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
       <script src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
       <link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
       

<link rel="stylesheet" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.3.1/css/buttons.dataTables.min.css">
            
 <!--      Bootstrap core CSS
      <link href="resources/css/bootstrap.min.css" rel="stylesheet">
      <link href="resources/css/bootstrap-reset.css" rel="stylesheet">

      external css
      <link href="resources/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
      <link rel="stylesheet" href="resources/assets/data-tables/DT_bootstrap.css" />
      Date Picker 
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datepicker/css/datepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-daterangepicker/daterangepicker-bs3.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-timepicker/compiled/timepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-colorpicker/css/colorpicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
      bootstrap switcher
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-switch/static/stylesheets/bootstrap-switch.css" />
      select 2
      <link rel="stylesheet" type="text/css" href="resources/assets/select2/css/select2.min.css"/>
      right slidebar
      <link href="resources/css/slidebars.css" rel="stylesheet">
       Form Wizard
      <link rel="stylesheet" type="text/css" href="resources/css/jquery.steps.css" />
      Custom styles for this template
      <link href="resources/css/style.css" rel="stylesheet">
      <link href="resources/css/style-responsive.css" rel="stylesheet" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
       <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
       <script src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
       <link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css"> -->
       
       	<link rel="stylesheet" href="resources/css/breadcrumbs.css">
	<!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> -->
	<script src="resources/js/jquery.breadcrumbs-generator.js"></script>
	<script>
	$(function() {
	  $('#breadcrumbs').breadcrumbsGenerator();
	});
	</script>
       
       <style>
       td,th {
         white-space:nowrap;
       }
       th{
              text-align: center;
       }
       .dataTables_wrapper .dataTables_filter {
           width: 50%;
       }
.loader {
  display: none;
  background-color: #EEE;
  position: absolute;
  top: 0; left: 0;
  bottom: 0; right: 0;
  opacity: 0.8;
}
.loader img {
  position: absolute;
  top: 50%;
  margin-top: -20px;
  left: 50%;
  margin-left: -20px;
}
       </style>
   </head>
   <body>
      <section id="container" class="sidebar-closed">
         <!--header start-->
         <header class="header dark-bg">
            <div class="sidebar-toggle-box" id="sidebar-toggle-box"  style="display:none">
               <i class="fa fa-bars"></i>
            </div>
            <!--logo start-->
            <a href="" class="logo"><img src="resources/img/yokohama-logo.svg" width="132" height="52"></a>
            <!--logo end-->
            <div class="nav notify-row" id="top_menu">
               <!--  notification start -->
               <ul class="nav top-menu">
              <!-- settings start -->
              <!-- settings end -->
             
            <!-- notification dropdown start-->
             <li id="header_notification_bar" class="dropdown">
                  <!-- <a data-toggle="dropdown" class="dropdown-toggle" href="#">

                      <i class="fa fa-bell-o"></i>
                      <span class="badge bg-important">7</span>
                  </a> -->
<!--                   <ul class="dropdown-menu extended notification">
                      <div class="notify-arrow notify-arrow-yellow"></div>
                      <li>
                          <p class="yellow">You have 7 new notifications</p>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-success"><i class="fa fa-bell"></i></span>
                              #20543 has been approved
                              <span class="small italic">30 mins</span>
                          </a>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                               #20543 has been rejected
                              <span class="small italic">4 hrs</span>
                          </a>
                      </li>
                  </ul> -->
              </li>
              <!-- notification dropdown end -->
          </ul>
            </div>
            <div class="top-nav ">
               <ul class="nav pull-right top-menu">
                 <!--  <li>
                     <input type="text" class="form-control search" placeholder="Search">
                  </li> -->
                  <!-- user login dropdown start-->
                  <li class="dropdown">
                     <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                     <!-- <img alt="" src="resources/img/avatar1_small.jpg"> -->
                     <span class="username" id="loginUserName"></span>
                     <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
<!--                         <li><a href="#"><i class=" fa fa-suitcase"></i>Profile</a></li>
                        <li><a href="#"><i class="fa fa-cog"></i> Settings</a></li>
                        <li><a href="#"><i class="fa fa-bell-o"></i> Notification</a></li> -->
                        <li><a id="logout-btn" href="/SIM/logout"><i class="fa fa-key"></i> Log Out</a></li>
                     </ul>
                  </li>
                  <!-- user login dropdown end -->
               </ul>
            </div>
         </header>
         <!--header end-->
         <!--sidebar start-->
         <aside>
            <div id="sidebar"  class="nav-collapse ">
               <!-- sidebar menu start-->
               <ul class="sidebar-menu" id="nav-accordion">
                  <li>
                     <a class="" href="processLogin">
                     <i class="fa fa-dashboard"></i>
                     <span>My Dashboard</span>
                     </a>
                  </li>
                   <li>
                      <a class="active" href="accrual">
                              <i class="fa fa-tasks"></i>
                              <span>Accrual Calculation</span>
                      </a>
                  </li>
                  <li>
                      <a class="" href="ccm">
                              <i class="fa fa-tasks"></i>
                              <span>CCM</span>
                      </a>
                  </li>
                 
                 <!--  <li>
                     <a id="create-program" class="" href="program_details2.html">
                     <i class="fa fa-tasks"></i>
                     <span>Create New Program</span>
                     </a>
                  </li>
                  <li>
                     <a id="edit-program" class="" href="program_details2.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Program</span>
                     </a>
                  </li>
                  <li>
                     <a class="" href="program_details_rejected.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Rejected Program</span>
                     </a>
                  </li>
                  <li>
                     <a href="login">
                     <i class="fa fa-user"></i>
                     <span>Login Page</span>
                     </a>
                  </li> -->
               </ul>
               <!-- sidebar menu end-->
            </div>
         </aside>
         <!--sidebar end-->
   
         <!--main content start-->
         <section id="main-content">
            <section class="wrapper site-min-height">
               <!-- page start-->
                <div id="program-parent-div" class="row">
                  <div class="col-lg-12">
                     <!--progress bar start-->
                     <section class="panel">
                        <header class="panel-heading">
                           <h3>Calculate Accrual</h3>
                        </header>
                        
                     <ol id="breadcrumbs"></ol>
					<nav id="sitemaps"  style="display:none">
					 <!--  <h2>Sitemaps</h2> -->
					  <ul>
					    <li>
					      <a href="processLogin">Home</a>
					      <ul>
					       <li>
					          <a href="customer">Customer Details</a>
					          <ul>
					            <li><a href="programDetail">Program Detail</a></li>
					            <li><a href="programddfcoop">Program Detail</a></li>
					            <li><a href="pricingOverview">Pricing Overview</a>
					             	<ul>
					             	<li><a href="pricingRequest">Pricing Request</a></li>
					             	</ul>
					             </li>
					          </ul> 
					        </li>
					        <li><a href="ccm">CCM</a></li>
					        <li><a href="accrual">Accrual Calculation</a></li>					       
					      </ul>
					    </li>
					  </ul>
					</nav>
                        
                        <div class="panel-body">
                          <div class="clearfix">
<!--                              <div class="col-lg-12">
                                <h5 data-original-title="Customer Details" data-content="Click on the grey button below to see more info about this customer. Click again to hide it." data-placement="top" data-trigger="hover" class="popovers">CCM Details</h5>
                                

                           </div> -->
                       </div>
                       </div>
                                         
                <!-- START STEP 1: PROGRAM INFO -->
                           <form id="wizard-validation-form" name="wizard-validation-form" class="cmxform" action="#">
                              <div>
                                 <section>
                                                                           <div class="form-group clearfix">
                                                                                  <div class="col-lg-12">
                                                                                  <div style="float:left">
                                                                                         <h5>Calculate Accrual for the period: </h5></div>
                                                                                         <div class="col-lg-4">
                                                                          <select
                                                                                                class="form-control input-sm m-bot15"
                                                                                                id="accrual_period_inputselect"
                                                                                                name="accrual_period_inputselect">
                                                                                                <!-- <option value="">- Select -</option> --> 
                                  
                                                                                                </select>
                                                                           </div>
                                                                           <br>
                                                                                         
                                                                                                                  <!--  <div class="table-responsive">
                                 <div class="btn-group pull-right"> -->
                                <div>
                      <table class="table table-striped table-hover table-bordered" id="accrualtable">
<!--                       <tr>
                          <td>1 &nbsp;&nbsp;<input id="refresh" type="checkbox" value="" >&nbsp; Refresh Data Source</td>
                          <td><div id="refreshdiv" style="display:none"><table id="datetable" class="table-bordered">
                          <tr bgcolor="#b1b2b5" ><td>Year</td><td>Begin Month</td><td>End Month</td></tr>
                          
                          <tr><td><select                                                                                              
                                                                                                              id="year_inputselect"
                                                                                                              name="year_inputselect" >
                                                                                                              <option value="">- Select -</option> 
                                                                                                               <option value="1">1000</option> 
                                                                                                                <option value="2">2000</option> 
                                                                                                                <option value="3">3000</option> 
                                                                                                                <option value="4">4000</option> 
                                                                                                                <option value="5">5000</option> 
                                                                                                       </select></td>
                                                                                                       <td><select                                                                                            
                                                                                                              id="beg_month_inputselect"
                                                                                                              name="beg_month_inputselect" >
                                                                                                              <option value="">- Select -</option> 
                                                                                                               <option value="1">1</option> 
                                                                                                                <option value="2">2</option> 
                                                                                                                <option value="3">3</option> 
                                                                                                                <option value="4">4</option> 
                                                                                                                <option value="5">5</option> 
                                                                                                       </select></td>
                                                                                                       <td><select                                                                                            
                                                                                                              id="end_month_inputselect"
                                                                                                              name="end_month_inputselect" >
                                                                                                              <option value="">- Select -</option> 
                                                                                                               <option value="1">1</option> 
                                                                                                                <option value="2">2</option> 
                                                                                                                <option value="3">3</option> 
                                                                                                                <option value="4">4</option> 
                                                                                                                <option value="5">5</option> 
                                                                                                       </select></td></tr>
                          </table></div></td>
                      </tr> -->
                                            <tr>
                          <td>1 &nbsp;&nbsp;<input id="calculate" type="checkbox" value="" >&nbsp; Calculate Accrual</td>
                          <td><div id="refreshdiv" style="display:none">
                          <div class="col-lg-4">
                                        <select
                                                                     class="form-control input-sm m-bot15"
                                                                     id="liable_period_inputselect"
                                                                     name="liable_period_inputselect" style="margin-top: 15px;" disabled>
                                                                     <!-- <option value="">- Select -</option> --> 
              
                                                              </select>
                          </div></div></td>
                      </tr>
                      <tr>
                          <td>2 &nbsp;&nbsp;<input id="review" type="checkbox" value="" >&nbsp; Reviewed Accrual</td>
                          <td><div id="reviewdiv" style="display:none">
                          <div class="col-lg-4 " ><input type="checkbox" value=""  name="copyaccrual" id="copyaccrual">&nbsp;Copy Accrual Data to CCM for Payout</div>
<!--                             <div class="col-lg-4 " ><input class="form-control radio-inline m-bot15" type="text" value=""  name="liable" id="liable"></div>
                          <a href="#"><button data-dismiss="modal" class="btn btn-default" id="add" type="button">Add</button></a> -->
                           <div class="col-lg-4" id="copy_accrual_period" style="display:none">
                                        <select
                                                                     class="form-control input-sm m-bot15"
                                                                     id="review_period_inputselect"
                                                                     name="period_inputselect" style="margin-top: 15px;">
                                                                     <!-- <option value="">- Select -</option> --> 
              
                                                              </select>
                          </div>
                          <br>
                          <div class="col-lg-4 " ><input type="checkbox" value="" name="bookName" id="bookName"> &nbsp;Book Name </div>
                          <!-- <div class="col-lg-4 "><input class="form-control radio-inline m-bot15" type="text" value=""  name="liable" id="liable">    </div> -->
                            <div class="col-lg-4" id="addbookdiv" style="display:none">
                                                       <select
                                                              class="form-control input-sm m-bot15"
                                                              id="review_book_inputselect"
                                                              name="review_book_inputselect" style="margin-top: 15px;">
                                                              <!-- <option value="">- Select -</option>  -->
                                                       </select></div>
                          <a href="#" id="add_book" style="display:none"><button data-dismiss="modal" class="btn btn-default" id="add" type="button">Add</button></a>
                          
                          </div>
                                                </td>
                      </tr>
                      <tr>
                          <td>3 &nbsp;&nbsp;<input id="pytd" type="checkbox" value="" >&nbsp; Update PYTD</td>
                          <td><div id="pytddiv" style="display:none">
                          <div class="col-lg-4"><input type="radio" value="" checked name="pytd_select" id="pytd_current">&nbsp;Current Accrual Data</div>
                          <br>
                          <div class="col-lg-4"><input type="radio" value="" name="pytd_select" id="pytd_select"> &nbsp;From the Book List (Select a Book Label) </div>
                          <div id="pytd_select_div" class="col-lg-4" style="display:none">
                                                       <select
                                                              class="form-control input-sm m-bot15"
                                                              id="pytd_book_inputselect"
                                                              name="pytd_book_inputselect" style="margin-top: 15px;">
                                                              <!-- <option value="">- Select -</option> 
                                                               <option value="1">1000</option> 
                                                                <option value="2">2000</option> 
                                                                <option value="3">3000</option> 
                                                                <option value="4">4000</option> 
                                                                <option value="5">5000</option>  -->
                                                       </select></div></div>
                                                </td>
                      </tr>
                       <tr>
                          <td>4 &nbsp;&nbsp;<input id="cytd" type="checkbox" value="" >&nbsp; Update CYTD</td>
                          <td><div id="cytddiv" style="display:none"><div class="col-lg-4 "><input type="radio" value="" checked name="cytd_select" id="cytd_current">&nbsp;Current Accrual Data</div>
                          
                          <br>
                          <div class="col-lg-4 "><input type="radio" value="" name="cytd_select" id="cytd_select"> &nbsp;From the Book List (Select a Book Label)</div>
                          <div id="cytd_select_div"  class="col-lg-4 " style="display:none">
                                                                     <select
                                                                           class="form-control input-sm m-bot15"
                                                                            id="cytd_book_inputselect"
                                                                            name="cytd_book_inputselect" style="margin-top: 15px;">
                                                                           <!-- <option value="">- Select -</option> 
                                                                            <option value="1">1000</option> 
                                                                             <option value="2">2000</option> 
                                                                             <option value="3">3000</option> 
                                                                              <option value="4">4000</option> 
                                                                             <option value="5">5000</option>  -->
                                                                     </select></div></div>
                                                              </td>
                      </tr>
                      </table>
                      
                      </div>
                                 
                            </div> 

                              
                          
                         
                      </div>
                                                                                         
                                                                                  <!-- END ROW 3 & Program Details section-->

                                                                                  <div class="modal-content">
                                                                                                                     <div class="modal-footer">
                                                                                                                           <a href="javascript: resetChanges();"><button data-dismiss="modal" class="btn btn-default"
                                                                                                                                  id="program-save-modal-cancel" type="button">Reset Process</button></a>
                                                                                                                           <button onclick="calculateAccruals();"
                                                                                                                                         class="btn btn-info" id="program-save-modal-ok"
                                                                                                                                         type="button">
                                                                                                                                         <i class="fa fa-save"></i>&nbsp;&nbsp; Go
                                                                                                                                  </button>
                                                                                                                     </div>
                                                                                                              </div>

                                                                                  
                                                                           </div> <!-- Div End - Program Detail-->

                                                                           <!-- END ROW 4 -->

                                                                           <!-- Start ROW 8 -->
                                                                           <div class="clearfix"></div>
                                                                           <div class="clearfix"></div>
                                                                                                
                                                                                                
                                                                                                <div class="modal fade" id="booklistdiv" tabindex="-1"
                                                                                                       role="dialog" aria-labelledby="myModalLabel"
                                                                                                       aria-hidden="true" data-backdrop="static"ï¿½data-keyboard="false" >
                                                                                                       <div class="modal-dialog">
                                                                                                              <div class="modal-content" style="width:900px">
                                                                                                                     <div class="modal-header">
                                                                                                                           <button id="program-error-modal-close" type="button"
                                                                                                                                  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                                                                                           <h4 class="modal-title">Accrual Book List </h4>
                                                                                                                     </div>
                                                                                                                     <div class="modal-body">
                                                                                                                           <!-- <div class="space15">&nbsp;</div> -->
                                                                                                                           <div class="text-center">
                                                                                                                                  <span id="bookcontent"></span>
                                                                                                                                  
                                                                                                                                  <table class="table table-striped table-hover table-bordered" id="booklist">
                                                                                                                                  <thead>
                                                                                                                                  <tr class="rowvis" style="background-color: #cacbce;">
                                                                                                                                  <th>Book Label</th>
                                                                                                                    <th>Book Date</th>
                                                                                                                                  <th>Book Of Record</th>
                                                                                                                                  <th>Create Date</th>
                                                                                                                    <th>Create By</th>
                                                                                                                    <th>Action</th>
                                                                                                                                  </tr>
                                                                                                                                  </thead>
                                                                                                                                  
                                                                                                                       <tbody>
                                                                                                                                                
                                                                                                                       </tbody>
                                                                                                               </table> 
                                                                                                               
                                                                                                                           <div class="modal-content">
                                                                                                                                                              <div class="modal-footer">
                                                                                                                                                                     <!-- <a href="javascript: resetChanges();"><button data-dismiss="modal" class="btn btn-default"
                                                                                                                                                                           id="program-save-modal-cancel" type="button">Delete Marked</button></a> -->
                                                                                                                                                                     <button class="btn btn-info" style="float:left" type="button"
                                                                                                                                                                           id="program-error-modal-ok" data-toggle="modal"
                                                                                                                                                                           href="#booklistdiv">
                                                                                                                                                                           <!-- <i class="fa fa-save"> --></i>&nbsp;&nbsp;Close
                                                                                                                                                                     </button>
                                                                                                                                                                     <button
                                                                                                                                                                                  class="btn btn-info" id="program-save-modal-ok"
                                                                                                                                                                                  type="button" onclick="deleteBookList();">
                                                                                                                                                                                  <!-- <i class="fa fa-save"></i> -->&nbsp;&nbsp; Delete Marked Records
                                                                                                                                                                           </button>  
                                                                                                                                                              </div>
                                                                                                                                                       </div>
                                                                                                               
                                                                                                                                  
                                                                                                                                  
                                                                                                                           </div>
                                                                                                                           <!-- <div class="space15"></div> -->
                                                                                                                     </div>
                                                                                                                     <!-- <div class="modal-footer">
                                                                                                                           <button class="btn btn-info" type="button"
                                                                                                                                  id="program-error-modal-ok" data-toggle="modal"
                                                                                                                                  href="#booklistdiv">
                                                                                                                                  <i class="fa fa-save"></i>&nbsp;&nbsp;Close
                                                                                                                           </button>
                                                                                                                     </div> -->
                                                                                                              </div>
                                                                                                       </div>
                                                                                                </div>
                                                                                                <div class="modal fade" id="myModal1" tabindex="-1"
                                                                                                       role="dialog" aria-labelledby="myModalLabel"
                                                                                                       aria-hidden="true">
                                                                                                       <div class="modal-dialog">
                                                                                                              <div class="modal-content" style="border: thin solid grey">
                                                                                                                     <div class="modal-header">
                                                                                                                           <button id="program-confirmation-modal-close"
                                                                                                                                  type="button" class="close" data-dismiss="modal"
                                                                                                                                  aria-hidden="true">&times;</button>
                                                                                                                           <h4 class="modal-title">Confirmation</h4>
                                                                                                                     </div>
                                                                                                                     <div class="modal-body">
                                                                                                                           <!-- <div class="space15">&nbsp;</div> -->
                                                                                                                           <div class="text-center">
                                                                                                                                  <span id="confirmMessage"></span>
                                                                                                                           </div>
                                                                                                                           <!-- <div class="space15"></div> -->
                                                                                                                     </div>
                                                                                                                     <div class="modal-footer">
                                                                                                                           <button class="btn btn-info" type="button"
                                                                                                                                  id="confirmation-modal-ok"
                                                                                                                                  data-toggle="modal" href="#myModal1">
                                                                                                                                  <i class="fa fa-save"></i>&nbsp;&nbsp;OK
                                                                                                                           </button>
                                                                                                                     </div>
                                                                                                              </div>
                                                                                                       </div>
                                                                                                </div>
                                                                                                
                                                                                                <div class="modal fade" id="myModal2" tabindex="-1"
                                                                                                       role="dialog" aria-labelledby="myModalLabel"
                                                                                                       aria-hidden="true" >
                                                                                                       <div class="modal-dialog">
                                                                                                              <div class="modal-content" style="border: thin solid grey">
                                                                                                                     <div class="modal-header">
                                                                                                                           <button id="program-error-modal-close" type="button"
                                                                                                                                  class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                                                                                           <h4 class="modal-title">Error / Warning (s)</h4>
                                                                                                                     </div>
                                                                                                                     <div class="modal-body">
                                                                                                                           <!-- <div class="space15">&nbsp;</div> -->
                                                                                                                           <div class="text-center">
                                                                                                                                  <span id="errorMessageModal"></span>
                                                                                                                           </div>
                                                                                                                           <!-- <div class="space15"></div> -->
                                                                                                                     </div>
                                                                                                                     <div class="modal-footer">
                                                                                                                           <button class="btn btn-info" type="button"
                                                                                                                                  id="program-error-modal-ok" data-toggle="modal"
                                                                                                                                  href="#myModal2">
                                                                                                                                  <i class="fa fa-save"></i>&nbsp;&nbsp;OK
                                                                                                                           </button>
                                                                                                                     </div>
                                                                                                              </div>
                                                                                                       </div>
                                                                                                </div>
                                                                                                
                                                                                                
                                                                                                
                                                                           <!-- END ROW 8 -->
       <div class="loader">
    <img src="resources/img/Processing.gif">
  </div>
                                                                           </div>
                                                                           </section>
      <!---- END Review / Confirm Section -->
      </div>
       </form>
        </div>
      </section><!-- end panel section -->
      </div>
      </div>
      <!-- page end-->
      </section><!-- end wrapper site-min-height -->
      </section><!-- end #maincontent -->
      <!--main content end-->
          
      <!--footer start-->
      <footer class="site-footer">
         <div class="text-center">
            2017 &copy; Yokohama Tire Corporation. All rights reserved. The Yokohama Rubber Company Limited
            <a href="#" class="go-top">
            <i class="fa fa-angle-up"></i>
            </a>
         </div>
      </footer>
      <!--footer end-->
      </section>
      <!-- END section id="container" FIRST section after opening body tag  -->

       
      <!-- js placed at the end of the document so the pages load faster -->
     <!--  <script src="resources/js/jquery.js"></script> -->
      <script src="resources/js/bootstrap.min.js"></script>
      <script src="resources/js/jquery-ui-1.9.2.custom.min.js"></script>
      <script src="resources/js/jquery-migrate-1.2.1.min.js"></script>
      <script class="include" type="text/javascript" src="resources/js/jquery.dcjqaccordion.2.7.js"></script>
      <script src="resources/js/jquery.scrollTo.min.js"></script>
      <script src="resources/js/jquery.nicescroll.js" type="text/javascript"></script>
      <script src="resources/js/respond.min.js" ></script>
      <script src="resources/js/jquery.stepy.js"></script>

      
      <!--right slidebar-->
      <script src="resources/js/slidebars.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/moment.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
      <!--select2-->
      <script type="text/javascript" src="resources/assets/select2/js/select2.min.js"></script>
      <!--Form Validation-->
      <script src="resources/js/bootstrap-validator.min.js" type="text/javascript"></script>
      <!--Form Wizard-->
      <!--script src="js/jquery.steps.min.js" type="text/javascript"></script-->
      <script src="resources/js/jquery.validate.min.js" type="text/javascript"></script>
      <!--common script for all pages-->
      <script src="resources/js/common-scripts.js"></script>
      <!--script for this page-->



  <!--  Validation setup Ends -->
      <!--select2-->
      <script type="text/javascript">
      var deleteList=[];
         function openSidebar() {
             $('#main-content').css({
                 'margin-left': '210px'
             });
             $('#sidebar > ul').show();
             $('#sidebar').css({
                 'margin-left': '0'
             });
             $("#container").removeClass("sidebar-closed");
             $('#sidebar-toggle-box').css({
                 'display': 'block'
             });
         }

        
         function resetChanges(){
              document.getElementById("wizard-validation-form").reset();
              $('#pytddiv').hide();
              $('#cytddiv').hide();
              $('#refreshdiv').hide();
              $('#reviewdiv').hide();
         }
         
        function calculateAccruals(){
        	var accrualProcess = [];
        	var arrLength = 0;
        	if($('#calculate').is(':checked')){
        		accrualProcess[arrLength] = 'calculateLiability';
        		arrLength++;
        	}
        	if($('#review').is(':checked')){
				if($('#copyaccrual').is(':checked')){
					accrualProcess[arrLength] = 'reviewLiabilityCCM';
        			arrLength++;
				}
				if($('#bookName').is(':checked')){
					accrualProcess[arrLength] = 'reviewLiabilityBook';
        			arrLength++;
				}
        	}
        	if($('#pytd').is(':checked')){
        		if($('#pytd_current').is(':checked')){
					accrualProcess[arrLength] = 'updatePYTD';
        			arrLength++;        		
        		}
        		if($('#pytd_select').is(':checked')){
					accrualProcess[arrLength] = 'updatePYTDBook';
        			arrLength++;        		
        		}
        	}
        	if($('#cytd').is(':checked')){
        		if($('#cytd_current').is(':checked')){
					accrualProcess[arrLength] = 'updateCYTD';                         
                 }
                 if($('#cytd_select').is(':checked')){
					accrualProcess[arrLength] = 'updateCYTDBook';
                 }
        	}
        
        	calCalculateAccruals(accrualProcess);
        }
         
         function calCalculateAccruals(accrualProcess){
             var required = accrualProcess[0];
             if(accrualProcess.length==0){
            	   message="Data Submitted Successfully";
                   $("#confirmMessage").html(message);
                   $('#myModal1').modal('toggle');
             }
             var select=false; 
                     if($('#calculate').is(':checked')){
                          select=true; 
                           if(required==='calculateLiability'){
                                 calculateLiability(accrualProcess); 
                           }
                    }
                    
                     if($('#review').is(':checked')){
                          
                           if($('#copyaccrual').is(':checked')){
                                 select=true; 
                                  if(required==='reviewLiabilityCCM'){
                                        reviewLiabilityCCM(accrualProcess); 
                                  }
                                 
                           }
                           if($('#bookName').is(':checked')){
                                  select=true; 
                                  if(required==='reviewLiabilityBook'){
                                         reviewLiabilityBook(accrualProcess); 
                                  }
                          }
                          
                     }
                    
                     if($('#pytd').is(':checked')){
                           
                           if($('#pytd_current').is(':checked')){
                                  select=true; 
                                  if(required==='updatePYTD'){
                                         updatePYTD(accrualProcess); 
                                  }
                                                                     
                          }
                           if($('#pytd_select').is(':checked')){
                                  select=true;
                                  if(required==='updatePYTDBook'){
                                         updatePYTDBook(accrualProcess); 
                                  }
                                  
                          }
                    }
                     
                     if($('#cytd').is(':checked')){
                           
                           if($('#cytd_current').is(':checked')){
                                  select=true; 
                                  if(required==='updateCYTD'){
                                         updateCYTD(accrualProcess); 
                                  }
                                  
                           }
                           if($('#cytd_select').is(':checked')){
                                  select=true;
                                  if(required==='updateCYTDBook'){
                                         updateCYTDBook(accrualProcess); 
                                  }
                                  
                          }
              
                     }
                     if(!select){
                           message="Kindly select atleast one option to execute";                                  
                    $("#errorMessageModal").html(message);
                           $('#myModal2').modal('toggle');
                     }
         }
         
         function calculateLiability(accrualProcess){
             
             var liablePeriod= parseInt($('#liable_period_inputselect').val());
              $.ajax({ 
                    type: "POST",
                    dataType: "json",
                           url: '/SIM/accrual/v1/calcLiability',
                           contentType: 'application/json',
                           dataType: "text",
                           data: JSON.stringify(liablePeriod),
                           beforeSend: function(){
                                    $('.loader').show();
                              },
                              complete: function(){
                                  $('.loader').hide();
                              },
                             success: function(response){
                          if(response=="success"){
/*                                  message="Data Submitted Successfully";
                                 $("#confirmMessage").html(message);
                                 $('#myModal1').modal('toggle'); */
                                 accrualProcess.splice(0, 1);
                                 calCalculateAccruals(accrualProcess);
                         
                          }else{
                                 message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                          }
                    },
                    beforeSend: function(){
                             $('.loader').show();
                               },
                    complete: function(){
                                   $('.loader').hide();
                               },
                    failure: function(response){
                         message="Issue occured while processing your request. Please try again later.";                                
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    	message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');                    	
               		}   

                    });
         }
         
         function reviewLiabilityCCM(accrualProcess){
            
             var liablePeriod= parseInt($('#review_period_inputselect').val());
              $.ajax({ 
                    type: "POST",
                    dataType: "json",
                           url: '/SIM/accrual/v1/reviewLiabilityCCM',
                           contentType: 'application/json',
                           dataType: "text",
                           data: JSON.stringify(liablePeriod),
                           success: function(response){
                          if(response=="success"){
/*                                  message="Data Submitted Successfully";
                                 $("#confirmMessage").html(message);
                                 $('#myModal1').modal('toggle'); */
                                 accrualProcess.splice(0, 1);
                                 calCalculateAccruals(accrualProcess);

                         
                          }else{
                                 message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                          }
                    },
                    beforeSend: function(){
                             $('.loader').show();
                               },
                               complete: function(){
                                   $('.loader').hide();
                               },
                    failure: function(response){
                           message="Issue occured while processing your request. Please try again later.";                                
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    	message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');                    	
               		}  
                    
                    });
          }
         
         function reviewLiabilityBook(accrualProcess){
             
             var liablePeriod= $('#review_book_inputselect').val();
              $.ajax({ 
                    type: "POST",
                    dataType: "json",
                           url: '/SIM/accrual/v1/reviewLiabilityBook',
                           contentType: 'application/json',
                           dataType: "text",
                           data: JSON.stringify(liablePeriod),
                    success: function(response){
                          if(response=="success"){
/*                                  message="Data Submitted Successfully";
                                 $("#confirmMessage").html(message);
                                 $('#myModal1').modal('toggle'); */
                                 accrualProcess.splice(0, 1);
                                 calCalculateAccruals(accrualProcess);

                         
                          }else{
                                 message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                          }
                    },
                    beforeSend: function(){
                             $('.loader').show();
                               },
                               complete: function(){
                                   $('.loader').hide();
                               },
                    failure: function(response){
                           message="Issue occured while processing your request. Please try again later.";                                
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    	message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');                    	
               		} 
                    
                    });
           }
         
         function updatePYTD(accrualProcess){
             
              $.ajax({ 
                    type: "POST",
                   dataType: "json",
                           url: '/SIM/accrual/v1/updatePYTD',
                           contentType: 'application/json',
                           dataType: "text",
                           //data: JSON.stringify(liablePeriod),
                           success: function(response){
                                 if(response=="success"){
/*                                         message="Data Submitted Successfully";
                                        $("#confirmMessage").html(message);
                                        $('#myModal1').modal('toggle'); */
                                        accrualProcess.splice(0, 1);
                                        calCalculateAccruals(accrualProcess);


                         }else{
                                message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                                 }
                          },
                          beforeSend: function(){
                                    $('.loader').show();
                               },
                               complete: function(){
                                   $('.loader').hide();
                               },
                   failure: function(response){
                           message="Issue occured while processing your request. Please try again later.";                                
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');
                   },
                    error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    	message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');                    	
               		} 
               		                   
                   });
            }
         
         function updatePYTDBook(accrualProcess){
             
             var liablePeriod= $('#pytd_book_inputselect').val();
             $.ajax({ 
                          type: "POST",
                          dataType: "json",
                           url: '/SIM/accrual/v1/updatePYTDBook',
                           contentType: 'application/json',
                           dataType: "text",
                           data: JSON.stringify(liablePeriod),
                           success: function(response){
                                 if(response=="success"){
/*                                         message="Data Submitted Successfully";
                                        $("#confirmMessage").html(message);
                                        $('#myModal1').modal('toggle'); */
                                        accrualProcess.splice(0, 1);
                                        calCalculateAccruals(accrualProcess);

                        
                         }else{
                                message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                                 }
                          },
                          beforeSend: function(){
                                    $('.loader').show();
                               },
                               complete: function(){
                                   $('.loader').hide();
                               },
                          failure: function(response){
                                 message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');
                          },
		                   error: function(XMLHttpRequest, textStatus, errorThrown) { 
		                   		message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
		                        $("#errorMessageModal").html(message);
		                        $('#myModal2').modal('toggle');                    	
		              		}                           
                          });
             }
         
         function updateCYTD(accrualProcess){
            
              $.ajax({ 
                    type: "POST",
                    dataType: "json",
                           url: '/SIM/accrual/v1/updateCYTD',
                           contentType: 'application/json',
                           dataType: "text",
                           //data: JSON.stringify(liablePeriod),
                           success: function(response){
                                 if(response=="success"){
/*                                         message="Data Submitted Successfully";
                                        $("#confirmMessage").html(message);
                                        $('#myModal1').modal('toggle'); */
                                        accrualProcess.splice(0, 1);
                                        calCalculateAccruals(accrualProcess);

                          
                         }else{
                                message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                                 }
                          },
                          beforeSend: function(){
                                    $('.loader').show();
                               },
                               complete: function(){
                                   $('.loader').hide();
                               },
                    failure: function(response){
                           message="Issue occured while processing your request. Please try again later.";                                
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    	message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');                    	
               		}                     
                    });
          }
         
         function updateCYTDBook(accrualProcess){
             
             var liablePeriod= $('#cytd_book_inputselect').val();
              $.ajax({ 
                    type: "POST",
                    dataType: "json",
                           url: '/SIM/accrual/v1/updateCYTDBook',
                           contentType: 'application/json',
                           dataType: "text",
                           data: JSON.stringify(liablePeriod),
                           success: function(response){
                          if(response=="success"){
/*                                  message="Data Submitted Successfully";
                                 $("#confirmMessage").html(message);
                                 $('#myModal1').modal('toggle'); */
                                 accrualProcess.splice(0, 1);
                                 calCalculateAccruals(accrualProcess);


                          }else{
                                 message="Issue occured while processing your request. Please try again later.";                             
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');

                          }
                    },
                    beforeSend: function(){
                             $('.loader').show();
                               },
                               complete: function(){
                                   $('.loader').hide();
                               },
                    failure: function(response){
                           message="Issue occured while processing your request. Please try again later.";                                
                                 $("#errorMessageModal").html(message);
                                         $('#myModal2').modal('toggle');
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    	message = "<strong> Error :</strong> " + errorThrown + "<br><strong>Message :</strong> " + XMLHttpRequest.responseText;
                         $("#errorMessageModal").html(message);
                         $('#myModal2').modal('toggle');                    	
               		}                     
                    
                    });
           }
         

         
               function fnPopulateDropdown(elementId, items){
                     
                      if(items != null){
                           $.each(items, function (i, item) {
                                      $('#'+ elementId).append($('<option>', { 
                                          value: item.value,
                                          text : item.key 
                                      }));
                                  });
                    }
                     //code to select the default value in period dropdown
                if((elementId=='liable_period_inputselect')||(elementId=='review_period_inputselect')||(elementId=='accrual_period_inputselect')){
                                  var currentDate=new Date();
                           var currentMonth=currentDate.getMonth().toString();
                           var currentYear=currentDate.getFullYear();
                           if(currentMonth.length==1){
                                  if(currentMonth==0){
                                         currentMonth=12;
                                         currentYear=currentYear-1;
                                  }
                                  currentMonth='0'+currentMonth;
                           }
                           period=currentYear+''+currentMonth+'01';
                           $('#liable_period_inputselect').val(period);
                           $('#review_period_inputselect').val(period);
                           $('#accrual_period_inputselect').val(period);
                    }
                    
                     }
              
              function createBookList(){
                     if(($('#booklabelnew').val()=='')||($('#bookdatenew').val()=='')){
                           message="Kindly enter the Book Label and Book Date.";                                  
                             $("#errorMessageModal").html(message);
                                 $('#myModal2').modal('toggle');
                           return;
                     }
                     var dalBookList = new Object();
                     dalBookList.bookLabel=$('#booklabelnew').val();
                     if($('#bookRecordnew').is(':checked')){
                           dalBookList.bookRecord='1';
                     }else{
                           dalBookList.bookRecord='0';
                     }     
                      dalBookList.bookDate=Date.parse($('#bookdatenew').val());
                     
                      
                      $.ajax({ 
                           type: "POST",
                          dataType: "json",
                                 url: '/SIM/accrual/v1/createBookList',
                                 contentType: 'application/json',
                                 dataType: "text",
                                 data: JSON.stringify(dalBookList),
                          success: function(response){
                                 if(response=="success"){
                                        table.ajax.url('/SIM/accrual/v1/getBookList').load();
                                 message="Data Saved Successfully";
                                 $("#confirmMessage").html(message);
                                               $('#myModal1').modal('toggle');
                                               refreshBookLabel();
                                               $('#booklistdiv').modal('toggle');
                                               
                                  }else if(response=="duplicate"){
                                        message="The Book Label "+dalBookList.bookLabel+" is already present. Kindly choose a different Label";                             
                                         $("#errorMessageModal").html(message);
                                               $('#myModal2').modal('toggle');
                                               
                                  }else{
                                        message="Issue occured while processing your request. Please try again later.";                            
                                         $("#errorMessageModal").html(message);
                                               $('#myModal2').modal('toggle');
                                 }
                                 
                           },
                          failure: function(response){
                                 message="Issue occured while processing your request. Please try again later.";                             
                                         $("#errorMessageModal").html(message);
                                                $('#myModal2').modal('toggle');
                          }});                        
               }
              
              function refreshBookLabel(){
                    
                      $.ajax({ 
                    type: "GET",
                    dataType: "json",
                   cache: false,
                    url: '/SIM/accrual/v1/getAccrualDropDown',
                    success: function(response){
                    $("#review_book_inputselect").empty();
                    fnPopulateDropdown('review_book_inputselect', response.bookLabelList);
                    $("#pytd_book_inputselect").empty();
                    fnPopulateDropdown('pytd_book_inputselect', response.bookLabelList);
                    $("#cytd_book_inputselect").empty();
                    fnPopulateDropdown('cytd_book_inputselect', response.bookLabelList);
                    },
                    failure: function(response){
                           alert("Wrongly done");
                    }
                 });
             }
              
               function populateDeleteList(event){
                          var id=(event.id).substring(6);

                          var bookId=$('#delete'+id).data('id');
                          
                           if(deleteList.indexOf(bookId)==-1)
                          {
                                 deleteList.push(bookId);
                          }else{
                                 deleteList.splice(deleteList.indexOf(bookId),1)
                          }
                    }
              
               
               function deleteBookList(){
                     console.log(deleteList);

                    if(deleteList.length==0){
                           message="Kindly select atlest one record to delete.";                                  
                             $("#errorMessageModal").html(message);
                                 $('#myModal2').modal('toggle');
                           return;
                          
                     }
                     
                      $.ajax({ 
                           type: "POST",
                          dataType: "json",
                                 url: '/SIM/accrual/v1/deleteBookList',
                                 contentType: 'application/json',
                                 dataType: "text",
                                 data: JSON.stringify(deleteList),
                                 beforeSend: function(){
                              },
                              complete: function(){
                              },
                          success: function(response){
                                 table.ajax.url('/SIM/accrual/v1/getBookList').load();
                                 if(response=="success"){                                    
                                  message="Data Deleted Successfully";
                                 $("#confirmMessage").html(message);
                                               $('#myModal1').modal('toggle');
                                               refreshBookLabel();
                                 }else{
                                        message="Issue occured while processing your request. Please try again later.";                            
                                         $("#errorMessageModal").html(message);
                                               $('#myModal2').modal('toggle');
                                 }
                                 deleteList=[];      
                           },
                          failure: function(response){
                                 alert("Wrongly done");
                          }});
              }
      </script>
      <!--this page  script only-->
      <script src="resources/js/advanced-form-components.js"></script>
      <script src="resources/js/editable-table-form.js"></script>
          
    <!-- Inline javascript to set the user name from model attribute Begin -->
       <script type="text/javascript" th:inline="javascript">
       
              $(document).ready(function() {
                     
        
                 var modelAttributeValue = [[${loginUserNameValue}]];
                 $("#loginUserName").html(modelAttributeValue);
                 var emp = [[${EmployeeInfo}]];
                 if(1==emp[0].ROLE_ID)
                     {
                            openSidebar();
                     }else{
         				
        				 $.ajax({ 
        		            	type: "GET",
        		            	dataType: "json",
        		            	 cache: false,
        		           	url: '/SIM/isTbpUser',
        		            	success: function(response){
        		            		if(response.empId!=null){
        		            			
        		            			 openSidebar();
        		            		}
        		            	},
        		            	failure: function(response){
        		            		alert("Wrongly done");
        		            	}
        		        	});
        			}
                 
                
                 
                 $('#booklist th').attr('style', 'padding-left: 20px !important;padding-right:20px !important');
          
                 table=$("#booklist").DataTable( {
                           oLanguage: {
                                  "sEmptyTable": "No data available for this selection"
                                  },
                           processing: true,   
                           lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],    
                           
                         ajax: {
                             url: '/SIM/accrual/v1/getBookList',
                             dataSrc: "data",
                             type: "GET",
                         },
                       
                  
                         columns: [      
                                  
                            { data: "bookLabel",className:"dt-left" },
                          { data: "bookDate" },
                          { data: "bookRecord", 
                           orderable: false,
                          className:"center",
                          render: function ( data, type, row, meta ) {
                           if(type === 'display'){                           
                                                if(data=='1'){
                                         data = '<input type="checkbox" checked id="bookRecord'+meta.row+'" value="" disabled>'; 
                                                }else if(data=='new'){
                                                       data = '<input type="checkbox" id="bookRecordnew" value="" >';  
                                                }
                                                else{
                                                       data = '<input type="checkbox" id="bookRecord'+meta.row+'" value="" disabled>';     
                                                }
                           }

                           return data;
                       }          
                          },
                          { data: "createdDate"},
                          { data: "createdUser", className:"dt-left"},
                          { data: "delete", 
                           orderable: false,
                          className:"center",
                          render: function ( data, type, row, meta ) {
                           if(type === 'display'){                           
                                                if(data=='add'){
                                                       //data='<button data-dismiss="modal" class="btn btn-default" id="add" type="button" onclick="createBookList();">Create</button>';
                                                       data='<button class="btn btn-info" id="add"       type="button" onclick="createBookList();">Create</button>'; 
                                                }else{
                                        data = '<input type="checkbox" id="delete'+meta.row+'" value="" data-id='+row.id+' onchange="populateDeleteList(this)">'; 
                                                }
                           }

                           return data;
                       }},            
                         
                          { data: "id",
                           visible: false,
                           searchable: false
                           }
             ]
                     });
              
              $('#booklist').on('draw.dt', function () {
                    //$('[data-toggle="tooltip"]').tooltip();
                    $('#bookdatenew').datepicker().on('changeDate', function(e){
                       $(this).datepicker('hide');
                    });
                });
                 
                 $.ajax({ 
                    type: "GET",
                    dataType: "json",
                    cache: false,
                    url: '/SIM/accrual/v1/getAccrualDropDown',
                    success: function(response){
                    fnPopulateDropdown('liable_period_inputselect', response.periodList);   
                    fnPopulateDropdown('review_period_inputselect', response.periodList);
                    fnPopulateDropdown('accrual_period_inputselect', response.periodList);                    
                    fnPopulateDropdown('cytd_book_inputselect', response.bookLabelList);
                    fnPopulateDropdown('pytd_book_inputselect', response.bookLabelList);
                    fnPopulateDropdown('review_book_inputselect', response.bookLabelList);
                    },
                    failure: function(response){
                           alert("Wrongly done");
                    }
                 });
                 
                // $('#accrualtable td').attr('style', 'line-height: 5 !important;width:30%');
                $('#accrualtable td').attr('style', 'line-height: 5 !important');
              
                $('#accrualtable  td:first-child').css({"width":"20%"});
                 
                /*  $('#datetable td').attr('style', 'line-height: 1 !important;width:30%'); */
                   $('#accrual_period_inputselect').change(function(){
                      $('#liable_period_inputselect').val($('#accrual_period_inputselect').val());
                      $('#review_period_inputselect').val($('#accrual_period_inputselect').val());
                      
                      });
                 
                 $('#calculate').change(function(){
                        if($(this).prop("checked")) {
                          $('#refreshdiv').show();
                        } else {
                          $('#refreshdiv').hide();
                        }
                     });
                 
                 $('#cytd').change(function(){
                        if($(this).prop("checked")) {
                          $('#cytddiv').show();
                        } else {
                          $('#cytddiv').hide();
                        }
                     });
                 
                 $('#pytd').change(function(){
                        if($(this).prop("checked")) {
                          $('#pytddiv').show();
                        } else {
                          $('#pytddiv').hide();
                        }
                     });
                 
                 $('#review').change(function(){
                        if($(this).prop("checked")) {
                          $('#reviewdiv').show();
                        } else {
                          $('#reviewdiv').hide();
                        }
                     });
                 
                 $('#copyaccrual').change(function(){
                        if($(this).prop("checked")) {
                                $('#copy_accrual_period').show();
                              } else {
                                $('#copy_accrual_period').hide();
                              }
                 });
                 
                 $('#bookName').change(function(){
                        if($(this).prop("checked")) {
                                refreshBookLabel();
                                $('#addbookdiv').show();
                                $('#add_book').show()
                                
                              } else {
                                $('#addbookdiv').hide();
                                $('#add_book').hide()
                              }
                 });
                 
                 $('input[type=radio][name=pytd_select]').change(function(){
                        if($('#pytd_select').prop("checked")) {
                                $('#pytd_select_div').show();
                                
                              } else {
                                $('#pytd_select_div').hide();
                              }
                 });
                 
                               
                 $('input[type=radio][name=cytd_select]').change(function(){
                        if($('#cytd_select').prop("checked")) {
                                $('#cytd_select_div').show();
                                
                              } else {
                                $('#cytd_select_div').hide();
                              }
                 });
                 
                 $('#add_book').click(function() {
                        
                       // $("#bookcontent").html("<H1>Test</H1>");
                       //loadBooklisttable();
                           $('#booklistdiv').modal('toggle');
                           
                        /*  var width = window.innerWidth * 0.66 ;
                         // define the height in
                         var height = width * window.innerHeight / window.innerWidth ;
                         // Ratio the hight to the width as the user screen ratio
                         window.open(this.href , 'newwindow', 'width=' + width + ', height=' + height + ', top=' + ((window.innerHeight - height) / 2) + ', left=' + ((window.innerWidth - width) / 2));
                           return false; */
                           return false;
                     });
                 
              }); 
              
              
       </script>
       <!-- Inline javascript to set the user name from model attribute End -->

       
   </body>
</html>