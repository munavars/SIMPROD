<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Program Details Form Wizard">
      <meta name="author" content="Yokohama">
      <meta name="keyword" content="YMPACT">
      <meta http-equiv='cache-control' content='no-cache'>
	  <meta http-equiv='expires' content='0'>
      <meta http-equiv='pragma' content='no-cache'>
      <title>Program Details</title>
      <!-- Bootstrap core CSS -->
      <link href="resources/css/bootstrap.min.css" rel="stylesheet">
      <link href="resources/css/bootstrap-reset.css" rel="stylesheet">

      <!--external css-->
      <link href="resources/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
      <!--Date Picker--> 
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datepicker/css/datepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-daterangepicker/daterangepicker-bs3.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-timepicker/compiled/timepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-colorpicker/css/colorpicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
      <!--bootstrap switcher-->
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-switch/static/stylesheets/bootstrap-switch.css" />
      <!--select 2-->
      <link rel="stylesheet" type="text/css" href="resources/assets/select2/css/select2.min.css"/>
      <!--right slidebar-->
      <link href="resources/css/slidebars.css" rel="stylesheet">
       <!--Form Wizard-->
      <link rel="stylesheet" type="text/css" href="resources/css/jquery.steps.css" />
      <link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
      
      <!-- Custom styles for this template -->
      <link href="resources/css/style.css" rel="stylesheet">
      <link href="resources/css/style-responsive.css" rel="stylesheet" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      
      <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltips and media queries -->
      <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
      <![endif]-->
    
       <script src="resources/js/paidAchieve.js"></script>

      <script>
         function sync()
         {
           var n1 = document.getElementById('include');
           var n2 = document.getElementById('input4');
           n2.value = n1.value;
         }
      </script>
   </head>
   <body onload="prdValue();include();exclude();achPrdValue();achInclude();achExclude();">
      <section id="container" class="sidebar-closed">
         <!--header start-->
         <header class="header dark-bg">
            <div class="sidebar-toggle-box" id="sidebar-toggle-box" style="display:none">
               <i class="fa fa-bars"></i>
            </div>
            <!--logo start-->
            <a href="" class="logo"><img src="resources/img/yokohama-logo.svg" width="132" height="52"></a>
            <!--logo end-->
            <div class="nav notify-row" id="top_menu">
               <!--  notification start -->
               <ul class="nav top-menu">
              <!-- settings start -->
              <!-- settings end -->
             
            <!-- notification dropdown start-->
             <li id="header_notification_bar" class="dropdown">
                  <!-- <a data-toggle="dropdown" class="dropdown-toggle" href="#">

                      <i class="fa fa-bell-o"></i>
                      <span class="badge bg-important">7</span>
                  </a> -->
<!--                   <ul class="dropdown-menu extended notification">
                      <div class="notify-arrow notify-arrow-yellow"></div>
                      <li>
                          <p class="yellow">You have 7 new notifications</p>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-success"><i class="fa fa-bell"></i></span>
                              #20543 has been approved
                              <span class="small italic">30 mins</span>
                          </a>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                               #20543 has been rejected
                              <span class="small italic">4 hrs</span>
                          </a>
                      </li>
                  </ul> -->
              </li>
              <!-- notification dropdown end -->
          </ul>
            </div>
            <div class="top-nav ">
               <ul class="nav pull-right top-menu">
                 <!--  <li>
                     <input type="text" class="form-control search" placeholder="Search">
                  </li> -->
                  <!-- user login dropdown start-->
                  <li class="dropdown">
                     <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                     <!-- <img alt="" src="resources/img/avatar1_small.jpg"> -->
                     <span class="username" id="loginUserName"></span>
                     <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
<!--                         <li><a href="#"><i class=" fa fa-suitcase"></i>Profile</a></li>
                        <li><a href="#"><i class="fa fa-cog"></i> Settings</a></li>
                        <li><a href="#"><i class="fa fa-bell-o"></i> Notification</a></li> -->
                        <li><a id="logout-btn" href="/SIM/logout"><i class="fa fa-key"></i> Log Out</a></li>
                     </ul>
                  </li>
                  <!-- user login dropdown end -->
               </ul>
            </div>
         </header>
         <!--header end-->
         <!--sidebar start-->
         <aside>
            <div id="sidebar"  class="nav-collapse " >
               <!-- sidebar menu start-->
               <ul class="sidebar-menu" id="nav-accordion">
                  <li>
                     <a class="" href="processLogin">
                     <i class="fa fa-dashboard"></i>
                     <span>My Dashboard</span>
                     </a>
                  </li>
                 <!--  <li>
                     <a id="create-program" class="" href="program_details2.html">
                     <i class="fa fa-tasks"></i>
                     <span>Create New Program</span>
                     </a>
                  </li>
                  <li>
                     <a id="edit-program" class="" href="program_details2.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Program</span>
                     </a>
                  </li>
                  <li>
                     <a class="" href="program_details_rejected.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Rejected Program</span>
                     </a>
                  </li>
                  <li>
                     <a href="login">
                     <i class="fa fa-user"></i>
                     <span>Login Page</span>
                     </a>
                  </li> -->
               </ul>
               <!-- sidebar menu end-->
            </div>
         </aside>
         <!--sidebar end-->
         <!-- hidden values start-->
         <input type="hidden" id="customerId" name="customerId"/>
         <input type="hidden" id="detailProgramId" name="detailProgramId"/>
         <!-- hidden values end-->
         <!--main content start-->
         <section id="main-content">
            <section class="wrapper site-min-height">
               <!-- page start-->
                <div id="program-parent-div" class="row">
                  <div class="col-lg-12">
                     <!--progress bar start-->
                     <section class="panel">
                        <header class="panel-heading">
                           <h3>Program Item Detail</h3>
                        </header>
                        <div class="panel-body">
                          <div class="clearfix">
                             <div class="col-lg-12">
                                <h5 data-original-title="Customer Details" data-content="Click on the grey button below to see more info about this customer. Click again to hide it." data-placement="top" data-trigger="hover" class="popovers">Customer Details</h5>
                                
                                <div id="header-button" class="modal-footer" hidden="true">
	                                <button id="pdf-button" class="btn" disabled="disabled">Generate PDF</button> <!-- <div class="space15">&nbsp;</div> -->
	                                &nbsp;
	                                <!-- EDIT BUTTON START -->
	                                <a class="btn btn-info finish" id="edit-button" data-toggle="modal" href="#myModalEdit" disabled="disabled"><i class="fa fa-edit"></i>&nbsp;&nbsp;Edit</a>
                                </div>
                               	<!-- Modal -->
				                <div class="modal fade" id="myModalEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				                	<div class="modal-dialog">
				                		<div class="modal-content">
				                        	<div class="modal-header">
				                            	<button id="modal-edit-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				                               	<h4 class="modal-title">Edit confirmation</h4>
				                            </div>
				                            <div class="modal-body">
												<div class="space15">&nbsp;</div>
												 <div class="text-center"> Are you sure you want to Edit? If you still want to Edit, click the OK button. If you don't want to Edit, click the "Cancel" button below and your program will not be editable. </div>
				                                <div class="space15"></div>
				                            </div>
				                            <div class="modal-footer">
				                                    <button id="modal-edit-cancel" data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
													<a href="#" onclick="enableFields();"><button id="modal-edit-ok" class="btn btn-info" type="button"><i class="fa fa-edit"></i>&nbsp;&nbsp;OK</button></a>
				                            </div>
										</div>
									</div>
								</div>
								<!-- EDIT BUTTON END -->
	                          <ul class="list-inline w-list">
                                 	<li><strong>Customer Name: <span class="yokohamared" id="customerName"></span></strong></li>
                                    <li><strong>Program ID: <span id="programId"></span></strong></li>
                                    <li class="p-right10"><strong>Business Unit: <span id="businessUnit"></span></strong></li>
                                    <li><button id="program-expand" type="button" class="btn btn-default btn-xs" data-toggle="collapse" data-target="#demo"><i class="fa fa-angle-down"></i></button></li>
                                 </ul>
                               <div id="demo" class="collapse out">
                                <div class="col-lg-3 col-md-4 col-sm-4 p-left0">
                                   <ul class="list-unstyled w-list">
                                    <li><strong>Request ID:</strong> <span id="requestId"></span></li>
                                    <li><strong>Requested By:</strong> <span id="requestedBy"></span></li>
                                    <li><strong>Requested Date: </strong><span id="requestedDate"></span></li>
                                    <li><strong>Created By:</strong> <span id="createdBy"></span></li>
                                    <li><strong>Created Date:</strong> <span id="createdDate"></span></li>
                                    <li><strong>Program Type:</strong> <span id="programTypeHeader"></span></li>
                                    <br>
                                    <h5 id="programSummaryTitleId">Program Summary</h5>
                                 </ul>
                                </div>
                               <div class="col-lg-4 col-md-5 col-sm-4">
                                   <ul class="list-unstyled w-list">
                                    <li><strong>Zone Manager Approved By:</strong> <span id="zoneManagerApprovedBy"></span> </li>
                                    <li><strong>Zone Manager Approved Date:</strong> <span id="zoneManagerApprovedDate"> </span></li>
                                   <!--  <li>Director Approved By: <span id="directorApprovedBy"></li>
                                    <li>Director Approved Date: <span id="directorApprovedDate"></li>
                                    <li>Executive Approved By: <span id="executiveApprovedBy"</li>
                                    <li>Executive Approved Date: <span id="executiveApprovedDate"</li> -->
                                    <li><strong>TBP Approved By:</strong> <span id="tbpApprovedBy"></span> </li>
                                    <li><strong>TBP Approved Date:</strong> <span id="tbpApprovedDate"></span> </li>
                                    <li><strong>Status:</strong> <span id="status"></span> &nbsp; 
                                    
                                   		<a id="view-program-workflow" data-toggle="modal" href="#myModal9">
                                   			<button  id="program-workflow-btn" type="button" class="btn btn-default btn-xs">
                                   			<i class="fa fa-list-alt" aria-hidden="true"></i> </button> </a>
									</li>

                                 </ul>
                                </div>
                                <div class="col-lg-4 col-md-3 col-sm-4">
                                   <ul class="list-unstyled w-list">
                                    <li><strong>Accrued Amount:</strong> <span class="text-right" id="accrualAmount">$ </span></li>
                                    <li><strong>Paid Amount:</strong> <span class="text-right" id="paidAmount">$ </span></li>
                                    <li><strong>Balance: </strong><span class="text-right" id="balance">$ </span></li>
                                 </ul>
                              </div>
                              
                             <table class="table table-striped table-hover table-bordered" id="editabletest">
							<thead>
                              <tr class="rowvis" style="background-color: #cacbce;">
                                <th>Pgm ID</th>
                                <th>Program</th>
                                <th>Frequency</th>								
                                <th>Begin Date</th>
                                <th>End Date</th>
                                <th>BTL</th>
                                <th>LT / Promo</th>	
                                <th>Paid Based On</th>								
                                <th>Tiered </th>
                                <th>Achieve Based On</th>
                                <th>True Up</th>								
                                <th>Accrual Amount</th>
                                <th>Accrual Type</th>
								<th>Current Tier</th>
								<th>Begin Range</th>
								<th>Tier Rate</th>								
                                <th>Accrued Amount</th>
                                <th>Credit Amount</th>
                                <th>Payables</th>								
                                <th>GL Balance</th>
                                <th>Created Date</th>
                                <th>Modified Date</th>
                              </tr></thead>
                              <tbody>
                              <tr>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td>0</td>
                              <td>0</td>
                              <td>0</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              </tr>
                              </tbody></table>
                           </div>
                       </div>
                       </div>
						
                <!-- START STEP 1: PROGRAM INFO -->
                           <form id="wizard-validation-form" name="wizard-validation-form" class="cmxform" action="#">
                              <div>
                                 <section>
											<div class="form-group clearfix">
												<div class="col-lg-12">
													<h5>Program Details</h5>
													<div class="row">
														<div class="col-lg-4 col-sm-4">
															<label class="control-label"
																for="program_name_inputselect">Program Name</label> <select
																class="form-control input-sm m-bot15"
																id="program_name_inputselect"
																name="program_name_inputselect">
																<!-- <option disabled class="required" value="">- Select -</option> -->
															</select>
														</div>
														<div class="col-lg-4 col-sm-4">
															<label class="control-label"
																for="payout_freq_inputselect">Payout Frequency</label> <select
																class="form-control input-sm m-bot15"
																id="payout_freq_inputselect"
																name="payout_freq_inputselect">
																<!-- <option disabled class="" value="">- Select -</option> -->
															</select>
														</div>
														<div class="form-group">
															<div class="col-lg-4 col-sm-4">
																<label class="control-label" for="from">Begin/End
																	Dates:</label>
																<div class="input-group input-medium"
																	data-date-format="mm/dd/yy">
																	<input type="text" class="form-control dpd1" readonly="readonly" id="from"
																		name="from" placeholder="Begin Date" style="background:white;"><span
																		class="input-group-addon" for="to">To</span> <input
																		type="text" class="form-control dpd2" readonly="readonly" id="to"
																		name="to" placeholder="End Date" style="background:white;">
																</div>
																<label for=from generated="true" class="error"></label>
																<label for="to" generated="true" class="error" style="float:right"></label> 
																
															</div>
														</div>
													</div>
													<div class="row">
														<div class="col-lg-12">
															<label class="control-label " for="longDesc">Program
																Description</label>
															<textarea id="longDesc" name="longDesc"
																rel="txtTooltip"
																data-content="If you can't see all your content, pull down the bottom-right corner of this field to expand the height."
																title="<i class='fa fa-lightbulb-o'></i>&nbsp;&nbsp;Hot Tip"
																data-toggle="tooltip" data-trigger="hover"
																data-placement="top" rows="3"
																placeholder="Add program description details"
																class="form-control m-bot15"></textarea>
														</div>
													</div>
													<div class="row">
														<div class="col-lg-2 col-md-2 col-sm-2">
															<label class="control-label" for="btl_inputselect">BTL
																(Behind The Line)</label> <select
																class="form-control input-sm m-bot15"
																rel="txtTooltip"
																data-content="Please choose the Behind the Line as Yes/No."
																title="<i class='fa fa-lightbulb-o'></i>&nbsp;&nbsp;Hot Tip"
																data-toggle="tooltip" data-trigger="hover"
																data-placement="top" rows="2"
																id="btl_inputselect" name="btl_inputselect">
															</select>
														</div>
														<div class="col-lg-2 col-md-2 col-sm-2">
															<label class="control-label"
																for="pricing_type_inputselect">Pricing Type</label> <select
																class="form-control input-sm m-bot15"
																rel="txtTooltip"
																data-content="Please choose the Pricing Type as Long Term/Promotion."
																title="<i class='fa fa-lightbulb-o'></i>&nbsp;&nbsp;Hot Tip"
																data-toggle="tooltip" data-trigger="hover"
																data-placement="top" rows="3"
																id="pricing_type_inputselect"
																name="pricing_type_inputselect">
															</select>
														</div>
														<div class="col-lg-2 col-sm-2">
															<label class="control-label" for="payto_inputselect">Pay
																To</label> <select class="form-control input-sm m-bot15"
																id="payto_inputselect" name="payto_inputselect">\
															</select>
														</div>


														<div class="col-lg-2 col-sm-2">
															<label class="control-label"
																for="payment_method_inputselect">Paid Type</label> <select
																class="form-control input-sm m-bot15"
																id="payment_method_inputselect"
																name="payment_method_inputselect">
															</select>
														</div>
														<div class="col-lg-4 col-sm-4">
															<label class="control-label"
																for="paid_basedon_inputselect">Paid Based On</label> <select
																class="form-control input-sm m-bot15"
																id="paid_basedon_inputselect"
																name="paid_basedon_inputselect">
															</select>
														</div>
													</div>
												</div>
												<!-- END ROW 3 & Program Details section-->

												<!-- PAID BASED ON - BEGIN -->
												<div class="col-lg-12">
													<div class="form-group">
														<h4>Paid Based On</h4>
														<div class="space15 clearfix"></div>
														<div class="row">
															<div class="col-lg-3 col-md-3 col-sm-3">

																<select class="paidachieve" name="paidBasedOn"
																	id="paidBasedOn"
																	onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);">
																	<option selected disabled value="select">-- Select --</option>
																</select>

																<div class="form-group last">
																	<div class="" id="div1">
																		<script type="text/javascript" language="JavaScript">
	                                                             		function prdValue(){
	                                                               			var el = document.getElementById('div1');
	                                                                  		el.innerHTML = '<select name="prdvalue" id="prdvalue" multiple="multiple" class="multi-select paidachieve_box"></select>';
	                                                                  	}
																	</script>
																	</div>
																</div>
															</div>
															<div class="col-lg-1 col-md-1 col-sm-1 center">
																<div class="m-bot15 m-top45">
																	<a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('prdvalue', 'include')">&#62;&#62;</a>
																	<br /> <a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('include', 'prdvalue')">&#60;&#60;</a>
																</div>

																<div class="m-top45">
																	<a href="javascript:void(0);" aria-activedescendant=""
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('prdvalue', 'exclude')">&#62;&#62;</a>
																	<br /> <a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('exclude', 'prdvalue')">&#60;&#60;</a>
																</div>

															</div>
															<div class="col-lg-4 col-md-4 col-sm-4">

																<h5 class="paid-achieve">Include</h5>
																<div class="m-bot15" id="div2">
																	<script type="text/javascript" language="JavaScript">
				                                                      	function include(){
				                                                      		var el = document.getElementById('div2');
				                                                            el.innerHTML = '<select name="include" multiple="multiple" class="multi-select paidachieve_box2" id="include"></select>';
				
																		}
																</script>
																</div>

																<h5 class="paid-achieve">Exclude</h5>
																<div class="" id="div3">
																	<script type="text/javascript" language="JavaScript">
			                                                       function exclude(){
			                                                       var el = document.getElementById('div3');
			                                                                 el.innerHTML = '<select name="exclude" multiple="multiple" class="multi-select paidachieve_box2" id="exclude"></select>';
			                                                          }
			                                                    </script>
																</div>

															</div>
															<div
																class="col-lg-4 col-md-4 col-sm-4 inline-flex m-top45">
																<div id="estimatedaccrual">
																	<label class="control-label" for="estm_accrual">Estimated Accrual ($)</label>&nbsp;&nbsp;
																	<input id="estm_accrual" name="estm_accrual" type="text"
																		class="form-control radio-inline m-bot15" style="width: 120px;"
																		value="">
																	
																</div>
																
																<label class="control-label" for="inputSuccess"
																	data-original-title="Customer Details">
																	Is this 'Tiered'?</label>
																<div class="radio-inline">
																	<label class="control-label" for="inputSuccess">
																		<input type="radio" name="optionsRadiosTier"
																		id="optionsRadiosTierYes" value="Yes"
																		class="radio-inline required m-bot15" rel="txtTooltip"
																		checked="checked"> Yes
																	</label>
																</div>
																<div class="radio-inline">
																	<label class="control-label" for="inputSuccess">
																		<input type="radio" name="optionsRadiosTier"
																		id="optionsRadiosTierNo" value="No"
																		class="radio-inline required m-bot15"> No
																	</label>
																</div>
																<br> <label
																	class="control-label" for="optionsRadiosTrueUp">Is
																	this 'True-up'?</label>
																<div class="radio-inline">
																	<label class="control-label" for="optionsRadiosTrueUpYes">
																		<input type="radio" name="optionsRadiosTrueUp"
																		id="optionsRadiosTrueUpYes" value="Yes"
																		class="radio-inline required m-bot15"
																		checked="checked">
																		Yes
																	</label>
																</div>
																<div class="radio-inline">
																	<label class="control-label" for="optionsRadiosTrueUpNo">
																		<input type="radio" name="optionsRadiosTrueUp"
																		id="optionsRadiosTrueUpNo" value="No"
																		class="radio-inline required m-bot15"> No
																	</label>
																</div>
																<br>
																<div id="amountdiv">
																	<label class="control-label" for="amount">Amount</label>&nbsp;&nbsp;
																	<input id="amount" name="amount" type="text"
																		class="form-control radio-inline m-bot15" style="width: 120px;"
																		value="">
																	<div class="radio-inline">
																		<label class="control-label"
																			for="optionsRadiosDenomination"> <input
																			type="radio" name="optionsRadiosDenomination"
																			id="optionsRadiosPercentage" value="%"
																			class="radio-inline required m-bot15"
																			> %
																		</label>
																	</div>
																	<div class="radio-inline">
																		<label class="control-label"
																			for="optionsRadiosDenomination"> <input
																			type="radio" name="optionsRadiosDenomination"
																			id="optionsRadiosDollarSign" value="$"
																			class="radio-inline required m-bot15"
																			checked="checked"> $
																		</label>
																	</div>
																</div>
																 </br>
																<div id="tbpchk">
																<label class="control-label"
																			for="tbpcheck">TBP Special Handling</label>&nbsp;&nbsp;
																			 <input
																			type="checkbox" name="tbpCheck"
																			id="tbpCheck"/>
																</div>
																</br>
																<div id="glcocde">
																<label class="control-label"
																			for="glcode_dropdown">GLNo</label>&nbsp;&nbsp;
																			  <select  id="glcode_dropdown" name="glcode_dropdown" class="form-control input-sm m-bot15" disabled="disabled"/>  
																			<!--  <input id="glcode_dropdown" name="glcode_dropdown" type="text" class="form-control radio-inline m-bot15" style="width: 150px;" value="" disabled> -->
																</div> 
																</div>
															</div>
														</div>
													</div>
												</div>
												<!-- PAID BASED ON - End -->

												<!-- Paid Achieve on  Begin-->
												<div class="col-lg-12">
													<div id="achieve-based-on">
														<h4>Achieve Based On</h4>
														<div class="space15 clearfix"></div>
														<div class="row">
															<div class="col-lg-1 col-md-1 col-sm-1">
																<!-- copy from paid -->
																<a class="btn btn-info m-bot15" id="copy-paid-info-btn"><i class="fa fa-files-o"></i>&nbsp;&nbsp;Copy from Paid Details</a>
															</div>
														</div>
														<div class="row">
															<div class="col-lg-4 col-md-4 col-sm-4">
																<label class="control-label"
																	for="achieve_basedon_inputselect">Achieve Based
																	On</label> <select class="form-control input-sm m-bot15 "
																	id="achieve_basedon_inputselect"
																	name="achieve_basedon_inputselect">
																</select>
															</div>
															<div
																class="col-lg-4 col-md-4 col-sm-4">
																<label class="control-label"
																	for="achieve_freq_inputselect">Achieve
																	Frequency</label> <select
																	class="form-control input-sm m-bot15 "
																	id="achieve_freq_inputselect"
																	name="achieve_freq_inputselect">
																</select>
															</div>
														</div>
														<div class="row">
															<div class="col-lg-3 col-md-3 col-sm-3">
																<select class="paidachieve" name="achievedBasedOn"
																	id="achievedBasedOn"
																	onchange="javascript: achDynamicdropdown(this.options[this.selectedIndex].value);">
																	<option selected disabled value="select">-- Select --</option>
																</select>

																<div class="form-group">
																	<div class="" id="div4">
																		<script type="text/javascript" language="JavaScript">
									                                          function achPrdValue(){
									                                          var el = document.getElementById('div4');
									                                                    el.innerHTML = '<select name="achPrdvalue" id="achPrdvalue" multiple="multiple" class="multi-select paidachieve_box"></select>';
									                                             }
																       </script>
																	</div>
																</div>


															</div>
															<div class="col-lg-1 col-md-1 col-sm-1">
																<div class="m-bot15 m-top45">
																	<a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('achPrdvalue', 'achInclude')">&#62;&#62;</a>
																	<br> <a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('achInclude', 'achPrdvalue')">&#60;&#60;</a>
																</div>

																<div class="m-top45">
																	<a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('achPrdvalue', 'achExclude')">&#62;&#62;</a>
																	<br> <a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('achExclude', 'achPrdvalue')">&#60;&#60;</a>
																</div>

															</div>

															<div class="col-lg-4 col-md-4 col-sm-4">
																<h5 class="paid-achieve">Include</h5>
																<div class="m-bot15" id="div5">
																	<script type="text/javascript" language="JavaScript">
									                                     function achInclude(){
									                                     var el = document.getElementById('div5');
									                                               el.innerHTML = '<select name="achInclude" multiple="multiple" class="multi-select paidachieve_box2" id="achInclude"></select>';
									
									                                        }
									                                  </script>
																</div>
																<h5 class="paid-achieve">Exclude</h5>
																<div class="" id="div6">
																	<script type="text/javascript" language="JavaScript">
							                                            function achExclude(){
							                                            var el = document.getElementById('div6');
							                                               el.innerHTML = '<select name="achExclude" multiple="multiple" class="multi-select paidachieve_box2" id="achExclude"></select>';
							                                               }
							                                         </script>
																</div>

															</div>
															<div class="form-group">
																<div id="program-tier" class="col-lg-4 col-md-4 col-sm-4 col-xs-4 pull-right"
																	style="margin-top: -8%;">
																	<div class="adv-table editable-table">

																		<h4 class="tableHeader">Program Schedules</h4>

																		<div class="table-responsive">
																			<table
																				class="table table-striped table-hover table-bordered"
																				id="tier-schedule" style="width: 100%;">
																				<thead>
																					<tr>
																						<td colspan="6" class="zeroborders text-left"><label
																							class="control-label" for="inputSuccess">Amount
																								Type</label>&nbsp;&nbsp;
																							<div class="radio-inline inline-flex">
																								<label class="control-label" for="inputSuccess">
																									<input type="radio"
																									name="optionsRadiosDenominationTier"
																									id="optionsRadiosPercentageTier1" value="%"
																									class="radio-inline denomination ">%
																								</label>
																							</div>
																							<div class="radio-inline inline-flex">
																								<label class="control-label" for="inputSuccess">
																									<input type="radio"
																									name="optionsRadiosDenominationTier"
																									id="optionsRadiosDollarSignTier1" value="$"
																									class="radio-inline denomination required"
																									checked="checked">$
																								</label>
																							</div></td>
																					</tr>
																					<tr>
																						<td colspan="6" class="zeroborderstlr text-left"><label
																							class="control-label" for="inputSuccess">Accrued
																								Tier</label>&nbsp;&nbsp; <input id="actual_marker"
																							name="actual_marker" type="text" size="3"
																							class="form-control inline-flex" value=""></td>
																					</tr>
																					<tr>
																						<th class="text-center">Tier</th>
																						<th class="text-center">Amount</th>
																						<th class="text-center">Begin Range</th>
																						<th class="text-center">End Range</th>
																						<th class="text-center">Edit</th>
																						<th class="text-center">Delete</th>
																					</tr>
																				</thead>
																				<tbody>
																				</tbody>
																			</table>
																		</div>
																	</div>
																	<div class="clearfix">
																		<div class="btn-group">
																			<button id="tier-schedule_new"
																				class="btn btn-default">
																				Add New Tier <i class="fa fa-plus"></i>
																			</button>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
												<!-- Paid Achieve On End -->
											</div> <!-- Div End - Program Detail-->

											<!-- END ROW 4 -->

											<!-- Start ROW 8 -->
											<div class="clearfix"></div>
											<div class="row">
												<div class="col-lg-12">
													<label class="control-label" for="userComments">Commentary/Special
														Instructions</label>
													<textarea id="userComments" name="userComments"
														class="form-control" rel="txtTooltip"
														data-content="If you can't see all your content, pull down the bottom-right corner of this field to expand the height."
														title="<i class='fa fa-lightbulb-o'></i>&nbsp;&nbsp;Hot Tip"
														data-toggle="tooltip" data-trigger="hover"
														data-placement="top" rows="3"
														placeholder="Add description details"></textarea>
												</div>
											</div>
											<!-- END ROW 8 -->

													<!---- START Submit -->
													<div class="clearfix"></div>
													<div id="footer-button" class="modal-footer" hidden="true">
														 <button id="cancel-program" data-dismiss="modal"
																class="btn btn-default" type="button" onclick="cancellink('#myModal11')">Cancel</button>	
														 &nbsp; <a class="btn btn-success" id="submit-program"
															href="javascript: validateBeforeSubmit('#myModal')"><i
															class="fa fa-check-circle"></i>&nbsp;&nbsp;Submit For
															Approval
														</a>&nbsp; 
														<a class="btn btn-info finish" id="save-program"
															href="javascript: validateBeforeSubmit('#myModal1')"><i
															class="fa fa-save"></i>&nbsp;&nbsp;Save Changes</a> <a
															class="btn btn-info" id="reject-program"
															data-toggle="modal" href="#myModal8"><i
															class="fa fa-times-circle"></i>&nbsp;&nbsp;Reject 
														</a> &nbsp;
														<a class="btn btn-success finish" id="approve-program"
															data-toggle="modal" href="#myModal7"><i
															class="fa fa-check-circle"></i>&nbsp;&nbsp;Approve
														</a>&nbsp;
														<div class="space15">&nbsp;</div>
														<div class="text-center">If you want to save these
															changes for later, click 'Save Changes'. If you want to
															submit these changes, click "Submit For Approval". If you
															don't want to save your changes, click the "Cancel"
															button below and your program will not save these
															changes.</div>
														<div class="space15"></div>
														<!-- Modal -->
														<div class="modal fade" id="myModal" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-submit-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Submit for Approval?</h4>
																	</div>
																	<div class="modal-body">
																		<div class="space15">&nbsp;</div>
																		<div class="text-center">Are you sure you want
																			to Submit for approval? If you still want to submit
																			for approval, click the OK button. If you don't want
																			to submit, click the "Cancel" button below and your
																			program will not be submitted.</div>
																		<div class="space15"></div>
																	</div>
																	<div class="modal-footer">
																		<button id="program-submit-modal-cancel"
																			data-dismiss="modal" class="btn btn-default"
																			type="button">Cancel</button>
																		<a href="#" onclick="submitForApproval();"><button
																				id="program-submit-modal-ok" class="btn btn-info"
																				type="button">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button></a>
																	</div>
																</div>
															</div>
														</div>
														<div class="modal fade" id="myModal1" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-save-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Save Program Changes?</h4>
																	</div>
																	<div class="modal-body">
																		<div class="space15">&nbsp;</div>
																		<div class="text-center">Are you sure you want
																			to Save Changes? If you still want to save your
																			changes, click the OK button. If you don't want to
																			save your changes, click the "Cancel" button below
																			and your program will not save these changes.</div>
																		<div class="space15"></div>
																	</div>
																	<div class="modal-footer">
																		<button data-dismiss="modal" class="btn btn-default"
																			id="program-save-modal-cancel" type="button">Cancel</button>
																		<a href="javascript: saveDraft()"><button
																				class="btn btn-info" id="program-save-modal-ok"
																				type="button">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button></a>
																	</div>
																</div>
															</div>
														</div>
														<div class="modal fade" id="myModal4" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-confirmation-modal-close"
																			type="button" class="close" data-dismiss="modal"
																			aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Confirmation</h4>
																	</div>
																	<div class="modal-body">
																		<!-- <div class="space15">&nbsp;</div> -->
																		<div class="text-center">
																			<span id="confirmMessage"></span>
																		</div>
																		<!-- <div class="space15"></div> -->
																	</div>
																	<div class="modal-footer">
																		<button class="btn btn-info" type="button"
																			id="program-confirmation-modal-ok"
																			data-toggle="modal" href="#myModal4">
																			<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																		</button>
																	</div>
																</div>
															</div>
														</div>

														<div class="modal fade" id="myModal5" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-error-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Error / Warning (s)</h4>
																	</div>
																	<div class="modal-body">
																		<!-- <div class="space15">&nbsp;</div> -->
																		<div class="text-center">
																			<span id="errorMessageModal"></span>
																		</div>
																		<!-- <div class="space15"></div> -->
																	</div>
																	<div class="modal-footer">
																		<button class="btn btn-info" type="button"
																			id="program-error-modal-ok" data-toggle="modal"
																			href="#myModal5">
																			<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																		</button>
																	</div>
																</div>
															</div>
														</div>

														<div class="modal fade" id="myModal6" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-info-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Information</h4>
																	</div>
																	<div class="modal-body">
																		<!-- <div class="space15">&nbsp;</div> -->
																		<div class="text-center">
																			<span id="informationMessageModal"></span>
																		</div>
																		<!-- <div class="space15"></div> -->
																	</div>
																	<div class="modal-footer">
																		<button class="btn btn-info" type="button"
																			id="program-info-modal-ok" data-toggle="modal"
																			href="#myModal6">
																			<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																		</button>
																	</div>
																</div>
															</div>
														</div>

														<div class="modal fade" id="myModal7" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-comment-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Confirmation</h4>
																	</div>
																	<div class="modal-body">
																		<div class="row">
																			<div class="col-lg-12">
																				<div class="text-left">
																					<label class="control-label;text-align: center;"
																						for="approveComments">Please enter
																						comments: </label>
																				</div>
																				<textarea maxlength="2000" id="approveComments"
																					name="approveComments" class="form-control"></textarea>
																			</div>
																		</div>
																	</div>
																	<div class="modal-footer">
																		<button data-dismiss="modal" class="btn btn-default"
																			id="program-comment-modal-cancel" type="button">Cancel</button>
																		<a href="javascript: approveProgram()"><button
																				class="btn btn-info" type="button"
																				id="program-comment-modal-ok">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button> </a>
																	</div>
																</div>
															</div>
														</div>

														<div class="modal fade" id="myModal8" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-rej-comment-modal-close"
																			type="button" class="close" data-dismiss="modal"
																			aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Confirmation</h4>
																	</div>
																	<div class="modal-body">
																		<div class="row">
																			<div class="col-lg-12">
																				<div class="text-left">
																					<label class="control-label;text-align: center;"
																						for="rejectionComments">Please enter
																						comments: </label>
																				</div>
																				<textarea maxlength="2000" id="rejectionComments"
																					name="rejectionComments" class="form-control"></textarea>
																			</div>
																		</div>
																	</div>
																	<div class="modal-footer">
																		<button data-dismiss="modal" class="btn btn-default"
																			id="program-rej-comment-modal-cancel" type="button">Cancel</button>
																		<a href="javascript: rejectProgram()"><button
																				class="btn btn-info" type="button"
																				id="program-rej-comment-modal-ok">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button> </a>
																	</div>
																</div>
															</div>
														</div>

														<div class="modal fade" id="myModal9" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-workflow-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Workflow status</h4>
																	</div>
																	<div class="modal-body">
																		<div class="read_only">
																			<table
																				class="table table-striped table-hover table-bordered"
																				id="workflow-status-table">
																				<thead>
																					<tr class="rowvis" style="background-color: #cacbce;">
																						<th class="text-center">Approver Name</th>
																						<th class="text-center">Approver Role</th>
																						<th class="text-center">Action</th>
																						<th class="text-center">Date</th>
																					</tr>
																				</thead>
																				<tbody>
																				</tbody>
																			</table>
																		</div>
																	</div>
																	<div class="modal-footer">
																		<button class="btn btn-info" type="button"
																			id="program-workflow-ok" data-dismiss="modal">
																			<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																		</button>
																	</div>
																</div>
															</div>
														</div>

														<div class="modal fade" id="myModal10" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="copy-warning-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Confirmation</h4>
																	</div>
																	<div class="modal-body">
																		<!-- <div class="space15">&nbsp;</div> -->
																		<div class="text-center">
																			<span id="copyWarningMessageModal"></span>
																		</div>
																		<!-- <div class="space15"></div> -->
																	</div>
																	<div class="modal-footer">
																		<button data-dismiss="modal" class="btn btn-default"
																			id="copy-warning-modal-cancel" type="button">Cancel</button>
																		<a href="javascript: copyPaidDetails('Y')"><button
																				class="btn btn-info" type="button"
																				id="program-rej-comment-modal-ok">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button> </a>
																	</div>
																</div>
															</div>
														</div>
														
														<div class="modal fade" id="myModal11" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-save-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Cancel Program Changes?</h4>
																	</div>
																	<div class="modal-body">
																		<div class="space15">&nbsp;</div>
																		<div class="text-center">Are you sure you want
																			to cancel Changes? If you still want to cancel your
																			changes, click the OK button. If you don't want to
																			cancel your changes, click the "Cancel" button below
																			and your program will not cancel these changes.</div>
																		<div class="space15"></div>
																	</div>
																	<div class="modal-footer">
																		<button data-dismiss="modal" class="btn btn-default"
																			id="program-save-modal-cancel" type="button">Cancel</button>
																		<a href="javascript: forwardToCustomerPage()"><button
																				class="btn btn-info" id="program-save-modal-ok"
																				type="button">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button></a>
																	</div>
																</div>
															</div>
														</div>
														
													</div>


												
											</div>
											</section>
      <!---- END Review / Confirm Section -->
      </div>
       </form>
        </div>
      </section><!-- end panel section -->
      </div>
      </div>
      <!-- page end-->
      </section><!-- end wrapper site-min-height -->
      </section><!-- end #maincontent -->
      <!--main content end-->
          
      <!--footer start-->
      <footer class="site-footer">
         <div class="text-center">
            2017 &copy; Yokohama Tire Corporation. All rights reserved. The Yokohama Rubber Company Limited
            <a href="#" class="go-top">
            <i class="fa fa-angle-up"></i>
            </a>
         </div>
      </footer>
      <!--footer end-->
      </section>
      <!-- END section id="container" FIRST section after opening body tag  -->
       
       
      <!-- js placed at the end of the document so the pages load faster -->
      <script src="resources/js/jquery.js"></script>
      <script src="resources/js/bootstrap.min.js"></script>
      <script src="resources/js/jquery-ui-1.9.2.custom.min.js"></script>
      <script src="resources/js/jquery-migrate-1.2.1.min.js"></script>
      <script class="include" type="text/javascript" src="resources/js/jquery.dcjqaccordion.2.7.js"></script>
      <script src="resources/js/jquery.scrollTo.min.js"></script>
      <script src="resources/js/jquery.nicescroll.js" type="text/javascript"></script>
      <script src="resources/js/respond.min.js" ></script>
      <script src="resources/js/jquery.stepy.js"></script>
      <!--right slidebar-->
      <script src="resources/js/slidebars.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/moment.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
      <!--select2-->
      <script type="text/javascript" src="resources/assets/select2/js/select2.min.js"></script>
      <!--Form Validation-->
      <script src="resources/js/bootstrap-validator.min.js" type="text/javascript"></script>
      <!--Form Wizard-->
      <!--script src="js/jquery.steps.min.js" type="text/javascript"></script-->
      <script src="resources/js/jquery.validate.min.js" type="text/javascript"></script>
      <!--common script for all pages-->
      <script src="resources/js/common-scripts.js"></script>
      <!--script for this page-->
      <script>
         //step wizard
         
         $(function() {
             $('#default').stepy({
                 backLabel: 'Cancel',
                 block: true,
                 nextLabel: 'Save As Draft',
                 titleClick: true,
                 titleTarget: '.stepy-tab'
             });
         });
      </script>

	<!--  Validation setup Begins -->
    <script type="text/javascript">

      $(document).ready(function () {
			$.validator.addMethod("actualMarkerCheck", function (value, element) {
				var isSame = false;
                    $('#tier-schedule tbody').find('tr').each(function(i) {
                    	 var tds = $(this).find('td'),
                         marker = tds.eq(0).text();
                    	 if(marker==value){
                    	 	isSame = true;
                    	 }
                    });							
			    return isSame;
			}, 'Accrued Tier should match tier value available');
			$.validator.addMethod("amountValidation", function (value, element) {
				var isNumber = true;
				var regex = /^[0-9.,]+$/;
				if( !regex.test(value) ) {
				  isNumber = false;
				}
			    return isNumber;
			}, 'Please enter valid amount');
			
			$.validator.addMethod("estimatedAccuralValidation", function (value, element) {
				var isNumber = true;
				var regex = /^[0-9,]+$/;
				if(value==0){
					isNumber=false;
				}
				if( !regex.test(value) ) {
				  isNumber = false;
				}
			    return isNumber;
			}, 'Please enter valid Accrual Estimation');
			
			$.validator.addMethod("percentageValidation", function (value, element) {
				var isPercentage = true;
				var regex = /^[0-9.]+$/;
				if( !regex.test(value)) {
				  isPercentage = false;
				}
				else{
					if(value > 100){
						isPercentage = false;	
					}
				}
			    return isPercentage;
			}, 'Please enter valid percentage');
			
			$.validator.addMethod("amountValidationTier", function (value, element) {
				var isNumber = true;
				var regex = /^[0-9.,]+$/;
				if( !regex.test(value) ) {
				  isNumber = false;
				}
			    return isNumber;
			}, 'Please enter valid amount');
			
			$.validator.addMethod("percentageValidationTier", function (value, element) {
				var isPercentage = true;
				var regex = /^[0-9.]+$/;
				if( !regex.test(value)) {
				  isPercentage = false;
				}
				else{
					if(value > 100){
						isPercentage = false;	
					}
				}
			    return isPercentage;
			}, 'Please enter valid percentage');
      
			$("#wizard-validation-form").validate({
				rules: {
					program_name_inputselect: {
						required: true
					},
					payout_freq_inputselect:{
						required: true
					},
					from: {
						required: true
					},
					to: {
						required: true
					},
					longDesc: {
						required: true
					},
					btl_inputselect: {
						required: true
					},
					pricing_type_inputselect: {
						required: true
					},
					amount: {
						required: true,
						amountValidation:{
							depends: function(element) {
								return ($('#optionsRadiosDollarSign').is(':checked'));
							}
						},
						percentageValidation:{
							depends: function(element) {
								return ($('#optionsRadiosPercentage').is(':checked'));
							}
						}
					},
					estm_accrual: {
						required: true,
						estimatedAccuralValidation:true
					},
					optionsRadiosDenomination: {
						required: true
					},
					payto_inputselect: {
						required: true
					},
					payment_method_inputselect:{
						required: true
					},
					paid_basedon_inputselect: {
						required: true
					},
					glcode_dropdown:{
						required: true
					},
					actual_marker: {
						actualMarkerCheck:{
							depends: function(element) {
								return $('input:radio[name=optionsRadiosTrueUpYes]:checked');
							}
						}
					},
					achieve_freq_inputselect:{
						required :{
							depends: function(element) {
								return $('input:radio[name=optionsRadiosTrueUpYes]:checked');
							}
						}
					},
					achieve_basedon_inputselect:{
						required :{
							depends: function(element) {
								return $('input:radio[name=optionsRadiosTrueUpYes]:checked');
							}
						}
					},
					tier_amount: {
						required: true,
						amountValidationTier:{
							depends: function(element) {
								return ($('#optionsRadiosDollarSignTier1').is(':checked'));
							}
						},
						percentageValidationTier:{
							depends: function(element) {
								return ($('#optionsRadiosPercentageTier1').is(':checked'));
							}
						}
					},
					tier_id: {
						required: true
					},
					tier_range: {
						required: true
					}
				},
				messages: {
					required: "This field is required",
				   	amount: {
					   	number: "Please enter only numeric values"
				   	},
				}
			});
          	/* var form = $("#wizard-validation-form");
			onFinishing: {
			    form.validate().settings.ignore = ":disabled";
			    return form.valid();
			}
			onFinished: {
			       alert("You've successfully submitted this program for approval. You'll be notified of its status soon."); 
			       location.href = 'index.html#pending-approvals';
			} */
      });
  </script>
  <!--  Validation setup Ends -->
      <!--select2-->
      <script type="text/javascript">
         $(document).ready(function () {
             $(".js-example-basic-single").select2();
         
             $(".js-example-basic-multiple").select2();
         });
         
         function closeSidebar(){
  			if ($('#sidebar > ul').is(":visible") === true) {
  	            $('#main-content').css({
  	                'margin-left': '0px'
  	            });
  	            $('#sidebar').css({
  	                'margin-left': '-210px'
  	            });
  	            $('#sidebar > ul').hide();
  	            $("#container").addClass("sidebar-closed");
         		}
  			$('#sidebar-toggle-box').css({
  		           'display': 'none'
  		       });
  		}
        function openSidebar() {
             $('#main-content').css({
                 'margin-left': '210px'
             });
             $('#sidebar > ul').show();
             $('#sidebar').css({
                 'margin-left': '0'
             });
             $("#container").removeClass("sidebar-closed");
             $('#sidebar-toggle-box').css({
                 'display': 'block'
             });
         }
      </script>
      <!--this page  script only-->
      <script src="resources/js/advanced-form-components.js"></script>
      <script src="resources/js/editable-table-form.js"></script>
      
      <script>
         jQuery(document).ready(function() {
             EditableTable.init();
         });
      </script>
	<script type="text/javascript">
		$(document).ready(function(){
            $('#workflow-status-table').dataTable({
				"oLanguage": {
					"sEmptyTable": "No data available in table"
				},
            	"iDisplayLength": 50,
            	"bDestroy": true,
            	"bSort": false,
            	"sPaginationType": "bootstrap",
            	"sDom": 't',
				"aoColumns": [
					{ "sClass": "text-left" },
					{ "sClass": "text-left" },
					{ "sClass": "text-left" },
					{ "sClass": "center" }
				]
	        });
		});	
	</script>
	<!--Tooltips -->
       <script>
            $(document).ready(function(){
                $('input[rel="txtTooltip"]').tooltip();
            });
       </script>
       <script>
           $(function(){

            // Enabling Popover Example 1 - HTML (content and title from html tags of element)
            $("[data-toggle=popover]").popover();

            // Enabling Popover Example 2 - JS (hidden content and title capturing)
            $(".form-control").popover({
                html : true, 
                content: function() {
                  return $('.js-tooltip').html();
                },
                title: function() {
                  return $('.js-tooltip').html();
                }
            });


        });
           
       </script>
       
    <!-- Inline javascript to set the user name from model attribute Begin -->
	<script type="text/javascript" th:inline="javascript">
	
		$(document).ready(function() {
		   var modelAttributeValue = [[${loginUserNameValue}]];
		   $("#loginUserName").html(modelAttributeValue);
		   var emp = [[${EmployeeInfo}]];
		   if(1==emp[0].ROLE_ID)
		   	{
		   		openSidebar();
			}
		   /* var tbpuser=['frank.cox@yokohamatire.com','francis.villegas@yokohamatire.com','cristina.stone@yokohamatire.com','Michelle.Coquillard@yokohamatire.com'];
		   if(tbpuser.indexOf(emp[0].EMAIL)==-1){
			   $("#tbpcheck").hide();   
		   } */
        	$.ajax({
        	    cache: false, 
             	type: "GET",
             	dataType: "json",
            	url: '/SIM/isTbpUser',
             	success: function(response){
             		if(response.empId==null){
             			$("#tbpchk").hide();
             			tbp=false;
             		}else{
             			$('#glcode_dropdown').attr('disabled', false);
             			tbp=true;
             		}
             	},
             	failure: function(response){
             		alert("Wrongly done");
             	}
         	});
		   
		});
		
		
	</script>
	<!-- Inline javascript to set the user name from model attribute End -->

	<script>
            $(document).ready(function(){
                 $('#from').datepicker();
                 $('#to').datepicker();
            });
       		var responseOnload;
       		var _isDirty = false; 
			//getParams = new URLSearchParams(window.location.search);
			//var programId =getParams.get('pgmId'); 
			//added fix for IE issue with URLSearchParams
			 var queryDict = {};
	      	 window.location.search.substr(1).split("&").forEach(
	       	 function(item) {
	         queryDict[item.split("=")[0]] = item.split("=")[1]
	         })
	        var programId =queryDict["pgmId"];
			if(programId == null){
				$("#create-program").addClass("active");
				$("#reject-program").hide();
				$("#edit-button").hide();
				$("#pdf-button").hide();
				$("#approve-program").hide();
				$("#editabletest").hide();
				$("#programSummaryTitleId").hide();
			}
			else{
				$("#cancel-program").html("Back");
				$("#edit-program").addClass("active");
			}
			var programType = queryDict["programType"];//getParams.get('programType');
			var custId = queryDict["custId"];//getParams.get('custId'); 
			var url="/SIM/program/v1/getProgramDetail/" + programId;
			if(null==programId){
				url="/SIM/program/v1/getProgramDetailCreate/"+ programType + "/" + custId;
			}
			
			$(window).ready(function(){
	         	$.ajax({
	         	    cache: false,  
	             	type: "GET",
	             	dataType: "json",
	            	url: url,
	             	success: function(response){
	             		responseOnload = response.data;
	             		
						fnPopulateProgramDetails(response);
						
						_isDirty = false;
	             	},
	             	failure: function(response){
	             		alert("Wrongly done");
	             	}
	         	});
			});
			
			
         	
         	function fnPopulateProgramDetails(response){
				includePaid = response.data.programDetailList[0].programPaidOn.includedMap;
				excludePaid = response.data.programDetailList[0].programPaidOn.excludedMap;
				includeAchieve = response.data.programDetailList[0].programAchieveOn.includedMap;
				excludeAchieve = response.data.programDetailList[0].programAchieveOn.excludedMap;
            		
				/*  var a = document.getElementById('cancelLink'); //for now. this has to be revisited.
				a.href = "/SIM/customer?custId=" + response.data.customerId;  */
            	//alert($('#program_name_inputselect').val);	
								
            	/*Program Header Section*/
				$("#customerId").html(response.data.customerId);
               	$("#customerName").html(response.data.customerName);
               	$("#businessUnit").html(response.data.businessUnit);
               	$("#programId").html(response.data.programDetailList[0].id);
               	$("#requestId").html(response.data.requestId);
               	$("#requestedBy").html(response.data.requestedBy);
               	if(response.data.requestedDate != null){
               		$('#requestedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.requestedDate)));
               	}
               	$('#createdBy').html(response.data.createdBy);
               	if(response.data.createdDate != null){
               		$('#createdDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.createdDate)));
               	}
               	$('#status').html(response.data.status);
               	$('#programTypeHeader').html(response.data.programDetailList[0].programType);
               	
               	$('#zoneManagerApprovedBy').html(response.data.zoneManagerApprovedBy);
               	if(response.data.zoneManagerApprovedDate != null){
               		$('#zoneManagerApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.zoneManagerApprovedDate)));
               	}
               	/* $('#directorApprovedBy').html(response.data.directorApprovedBy);
               	if(response.data.directorApprovedDate != null){
               		$('#directorApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.directorApprovedDate)));
               	}
               	$('#executiveApprovedBy').html(response.data.executiveApprovedBy);
               	if(response.data.executiveApprovedDate != null){
               		$('#executiveApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.executiveApprovedDate)));
               	} */
               	$('#tbpApprovedBy').html(response.data.tbpApprovedBy);
               	if(response.data.tbpApprovedDate != null){
               		$('#tbpApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.tbpApprovedDate)));
               	}
               	
               	$('#accrualAmount').html(response.data.accrualAmount);
               	$('#paidAmount').html(response.data.paidAmount);
               	$('#balance').html(response.data.balance);
               	
               	/*Program Detail Section*/
               	$("#detailProgramId").val(response.data.programDetailList[0].id);
               	
               	if(response.data.programDetailList[0].amountType == "%"){
               		$("#optionsRadiosPercentage").prop('checked', true);
               		$("#amount").val( convertPercentageFormat(response.data.programDetailList[0].amount));
               	}
               	else{
               		$("#optionsRadiosDollarSign").prop('checked', true);
               		$("#amount").val( convertAmountFormat(response.data.programDetailList[0].amount));
               	} 
               	$("#estm_accrual").val((response.data.programDetailList[0].estimatedAccrual));
               	
               	$('#from').datepicker({ 
   					dateFormat: 'mm/dd/yy'
    				}); 
    							
    				                	
               	$('#to').datepicker({ 
					dateFormat: 'mm/dd/yy'
    				});
    			$('#from').datepicker('setValue', $.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].beginDate)));
    			$('#to').datepicker('setValue', $.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].endDate)));
/*                	$('#from').val($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].beginDate)));
               	$('#to').val($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].endDate))); */
               	$('#from').datepicker('update', new Date(response.data.programDetailList[0].beginDate));
               	$('#to').datepicker('update', new Date(response.data.programDetailList[0].endDate));
               	resetFormForMandatoryCheck("from");
               	resetFormForMandatoryCheck("to");
               	
               	fnPopulateDropdown('program_name_inputselect', response.data.programDetailList[0].dropdownList.programNameList);
               	$('#program_name_inputselect').val(response.data.programDetailList[0].programName);
               	
               	fnPopulateDropdown('payout_freq_inputselect', response.data.programDetailList[0].dropdownList.payoutFrequenceList);
               	$('#payout_freq_inputselect').val(response.data.programDetailList[0].payoutFrequency);
               	
            	$('#longDesc').val(response.data.programDetailList[0].longDesc);
               	
               	fnPopulateDropdown('btl_inputselect', response.data.programDetailList[0].dropdownList.btlList);
               	$('#btl_inputselect').val(response.data.programDetailList[0].btl);
               	
               	fnPopulateDropdown('payto_inputselect', response.data.programDetailList[0].dropdownList.payToList);
               	$('#payto_inputselect').val(response.data.programDetailList[0].payTo);
               	
               	fnPopulateDropdown('payment_method_inputselect', response.data.programDetailList[0].dropdownList.paidTypeList);
               	$('#payment_method_inputselect').val(response.data.programDetailList[0].paidType);
               	
               	fnPopulateDropdown('paid_basedon_inputselect', response.data.programDetailList[0].dropdownList.paidBasedOnList);
               	$('#paid_basedon_inputselect').val(response.data.programDetailList[0].paidBasedOn);
               	
               	fnPopulateDropdown('pricing_type_inputselect', response.data.programDetailList[0].dropdownList.pricingTypeList);
               	$('#pricing_type_inputselect').val(response.data.programDetailList[0].pricingType);
              
               	fnPopulateDropdown('glcode_dropdown', response.data.programDetailList[0].dropdownList.glCodeList);
               	$('#glcode_dropdown').val(response.data.programDetailList[0].glCode);
              
               	if(response.data.programDetailList[0].tbpCheck == '1'){
               		$("#tbpCheck").prop('checked', true);
               	}else
               	{
               	 $("#tbpCheck").prop('checked', false);
               	}		
               		
               	
               	
               	/*Program Paid Based on section*/
               	fnPopulateDropdown('paidBasedOn', response.data.programDetailList[0].programPaidOn.tagItemList);
               	if(response.data.programDetailList[0].programPaidOn.isTiered == true){
               		$("#optionsRadiosTierYes").prop('checked', true);
               		$("#achieve-based-on").show();
					$("#program-tier").show();
					$("#amountdiv").hide();
               	}
               	else{
               		$("#optionsRadiosTierNo").prop('checked', true);
               		$("#achieve-based-on").hide();
					$("#program-tier").hide();
					$("#amountdiv").show();
               	}
               	
               	if(response.data.programDetailList[0].programPaidOn.isTrueUp == true){
               		$("#optionsRadiosTrueUpYes").prop('checked', true);
               	}
               	else{
               		$("#optionsRadiosTrueUpNo").prop('checked', true);
               	}
               	fnPopulatePaidDetails(response);
               	                	
               	/*Program Achieve Based on section*/
               	fnPopulateDropdown('achieve_basedon_inputselect', response.data.programDetailList[0].programAchieveOn.achieveBasedOnList);
               	$('#achieve_basedon_inputselect').val(response.data.programDetailList[0].programAchieveOn.achieveBasedOn);
               	fnPopulateDropdown('achieve_freq_inputselect', response.data.programDetailList[0].programAchieveOn.achieveFrequencyList);
               	$('#achieve_freq_inputselect').val(response.data.programDetailList[0].programAchieveOn.achieveFrequency);
               	
               	
               	fnPopulateDropdown('achievedBasedOn', response.data.programDetailList[0].programAchieveOn.tagItemList);
               	
               	/*Program Tier details*/
               	if(response.data.programDetailList[0].amountTypeTier == '%'){
               		$("#optionsRadiosPercentageTier1").prop('checked', true);
               	}
               	else{
               		$("#optionsRadiosDollarSignTier1").prop('checked', true);
               	}
               	$('#actual_marker').val(response.data.programDetailList[0].actualMarker);
               	fnPopulateProgramTier(response.data.programDetailList[0].programTierDetailList);
               	
               	/**Commentary/ Special instructions*/
               	$("#userComments").val(response.data.programDetailList[0].comments);
               	
               	fnPopulateProgramWorkflowStatus(response.data.programWorkflowStatusList);
               	
               	if(programId != null){
               	
               		/**By calling the below method, all the fields, button and hyperlink will be disabled.
               		*  except cancel, program header expand button's*/
               		disableFields();
               		
               		hideShowButtonsOnLoad(response.data);
               		
               		fnPopulateProgramDetailTable();
               	}
               	
               	removePlaceHolderPropForTextArea();
               	
               	enabledButtonApplicableToAll();
         	}
         	
			function removePlaceHolderPropForTextArea(){
         	    if($('#userComments').is(':disabled')){
               		$('#userComments').removeAttr('placeholder');
               	}
               	
               	if($('#longDesc').is(':disabled')){
               		$('#longDesc').removeAttr('placeholder');
               	}
         	}
         	
         	function fnPopulateProgramDetailTable(){                
         		$('#editabletest tbody').find('tr').each(function(i) {

                    var $tds = $(this).find('td'),
                    marker = $tds.eq(0).text(),
                    amount = $tds.eq(1).text(),
                    range = $tds.eq(2).text();
                    $tds.eq(0).text(responseOnload.programDetailList[0].id);
                    $tds.eq(1).text($('#program_name_inputselect option:selected').text());
                    $tds.eq(2).text($('#payout_freq_inputselect option:selected').text());
                    $tds.eq(3).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].beginDate)));
                    $tds.eq(4).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].endDate)));
                    $tds.eq(5).text($('#btl_inputselect option:selected').text());
                    $tds.eq(6).text($('#pricing_type_inputselect option:selected').text());
                    $tds.eq(7).text($('#paid_basedon_inputselect option:selected').text());
                    $tds.eq(8).text((responseOnload.programDetailList[0].programPaidOn.isTiered==true)?'Yes':'No');
                    $tds.eq(9).text($('#achieve_basedon_inputselect option:selected').text());
                    $tds.eq(10).text((responseOnload.programDetailList[0].programPaidOn.isTrueUp==true)?'Yes':'No');
                    $tds.eq(11).text($("#amount").val());
                    $tds.eq(12).text(responseOnload.programDetailList[0].amountType);
                    $('#tier-schedule tbody').find('tr').each(function(i) {
                    	 var tds = $(this).find('td'),
                         marker = tds.eq(0).text(),
                         amount = tds.eq(1).text(),
                         range = tds.eq(2).text();
                    	 
                    	 if(marker==responseOnload.programDetailList[0].actualMarker){
                    		 $tds.eq(13).text(responseOnload.programDetailList[0].actualMarker);
                             $tds.eq(14).text(range);
                             $tds.eq(15).text(amount+responseOnload.programDetailList[0].amountTypeTier); 
                             if('$'==responseOnload.programDetailList[0].amountTypeTier){
                            	 $tds.eq(15).text(responseOnload.programDetailList[0].amountTypeTier+amount);  
                             }
                    	 }
                    });
                   
                    $tds.eq(16).text(0);
                    $tds.eq(17).text(0);
                    $tds.eq(18).text(0);
                    $tds.eq(19).text(0);
                    $tds.eq(20).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].createdDate)));
                    $tds.eq(21).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].modifiedDate)));
                });
         	}
         	
			function hideShowButtonsOnLoad(responseOnload1){
         		if(responseOnload1.authorizedUser == 'Yes' && responseOnload1.programButton.userLevel == "1" && responseOnload1.programButton.creater == true){
					$('#edit-button').attr('disabled', false);
					$('#edit-button').removeClass("disabled");
					$('#modal-edit-cancel').attr('disabled', false);
					$('#modal-edit-ok').attr('disabled', false);
					$('#modal-edit-close').attr('disabled', false);
					hideApproverButtons();
					if(responseOnload1.newProgram == false && responseOnload1.status != 'REJECTED'){
	               		$('#submit-program').attr('disabled', false);
						$('#submit-program').removeClass("disabled");
						$('#program-submit-modal-cancel').attr('disabled', false);
						$('#program-submit-modal-ok').attr('disabled', false);
						$('#program-submit-modal-close').attr('disabled', false);	
						$('#save-program').hide();
               		}
               		else if(responseOnload1.newProgram == false && responseOnload1.status === 'REJECTED'){
               			/**Buttons should be visible, but disabled.*/
               			$('#save-program').show();
               			$('#submit-program').show();
               		}
               		else if(responseOnload1.newProgram == false){
               			showCreatorButtons();
               		}
				}
				/*For simplicity , for now check only one button property to set all the approver button property value.*/
				else if(responseOnload1.programButton.approver == true){
					hideCreatorButtons();
					showApproverButtons();
					if(tbp){
						$('#glcode_dropdown').attr('disabled', false);
					}
					$('#edit-button').hide();
				}
				else{
					/**Nothing should be editable in screen.*/
					hideCreatorButtons();
					hideApproverButtons();
					$('#edit-button').hide();
					$('#glcode_dropdown').attr('disabled', true);
				}
         	}
         	
			function hideCreatorButtons(){
         		$('#save-program').hide();
         		$('#submit-program').hide();
         	}
         	
         	function showCreatorButtons(){
         		$('#save-program').show();
         		$('#save-program').attr('disabled', false);
         		$('#save-program').removeClass("disabled");
         		$('#program-save-modal-close').attr('disabled', false);
         		$('#program-save-modal-cancel').attr('disabled', false);
         		$('#program-save-modal-ok').attr('disabled', false);
         		$('#submit-program').show();
         		$('#submit-program').attr('disabled', false);
         		$('#submit-program').removeClass("disabled");
         		$('#program-submit-modal-close').attr('disabled', false);
         		$('#program-submit-modal-cancel').attr('disabled', false);
         		$('#program-submit-modal-ok').attr('disabled', false);
         	}
         	
         	function hideApproverButtons(){
         		$('#reject-program').hide();
         		$('#approve-program').hide();
         	}
         	
         	function showApproverButtons(){
         		$('#reject-program').show();
         		$('#reject-program').attr('disabled', false);
         		$('#reject-program').removeClass("disabled");
         		/* $('#program-reject-modal-close').attr('disabled', false);
         		$('#program-reject-modal-cancel').attr('disabled', false);
         		$('#program-reject-modal-ok').attr('disabled', false); */
         		$('#approve-program').show();
         		$('#approve-program').attr('disabled', false);
         		$('#approve-program').removeClass("disabled");
         		/* $('#program-approve-modal-close').attr('disabled', false);
         		$('#program-approve-modal-cancel').attr('disabled', false);
         		$('#program-approve-modal-ok').attr('disabled', false); */
         	}
         	
         	function fnPopulateProgramTier(tierData){                
                var table = $("#tier-schedule").DataTable();
                if(tierData != null){
                	var endRangePrevious = null;
                	var maxRange = convertNumberFormat(99999999);
	                $.each(tierData, function(idx, item) {
	                	/* if((item.amount.toString().indexOf(".")==-1)&&("0"!=item.amount.toString())){
	                		tieramount=item.amount.toString()+".00";
	                		tieramount=tieramount.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	                	}else{
	                		tieramount=item.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	                	} */
	                	if($('input:radio[name=optionsRadiosDenominationTier]:checked').val() == '$'){
	                		tieramount = convertAmountFormat(item.amount.toString());
	                	}
	                	else{
	                		tieramount = convertPercentageFormat(item.amount.toString());
	                	}
	                	if(idx > 0){
	                		endRangePrevious = parseInt(item.beginRange) - 1;
	                		var nRowTemp = table.fnGetNodes(idx-1);
			               	table.fnUpdate(convertNumberFormat(endRangePrevious), nRowTemp, 3, false);
	                	}
						table.fnAddData([item.level, tieramount,convertNumberFormat(item.beginRange), convertNumberFormat(maxRange),
										'<a  id=' + item.id + ' class="edit" href="javascript:;">Edit</a>', 
										'<a  id=' + item.id + ' class="delete" href="javascript:;">Delete</a>'
                    	]);
	                });
                }
                table.fnDraw();
         	}
         	
         	function fnPopulateProgramWorkflowStatus(workflowStatus){
         		var table = $("#workflow-status-table").DataTable();
         		table.fnClearTable();
         		if(workflowStatus != null){
         			$.each(workflowStatus, function(idx, item) {
         					var date = null;
         					if(item.approvalDate != null){
         						date = $.datepicker.formatDate( "mm/dd/yy", new Date(item.approvalDate));
         					}
							table.fnAddData([item.approverName, item.approverRole, item.status, date
	                    ]);
	                });
         		}
         		table.fnDraw();
         	}
         	
         	function fnPopulatePaidDetails(response){
				fnPopulateTextArea(response.data.programDetailList[0].programPaidOn.includedMap, 'include');
				fnPopulateTextArea(response.data.programDetailList[0].programPaidOn.excludedMap, 'exclude');
				fnPopulateTextArea(response.data.programDetailList[0].programAchieveOn.includedMap, 'achInclude');
				fnPopulateTextArea(response.data.programDetailList[0].programAchieveOn.excludedMap, 'achExclude');
         	}
         	
         	function fnPopulateTextArea(valueMap, elementId){
         	    var includedList = valueMap;
         		var dest = document.getElementById(elementId);
         		if(includedList != null){
         		    $.each(includedList, function (i, includedMap) {
					    var includedValue = includedMap;
					    $.each(includedValue, function (i, value) {
							var newOption=document.createElement("option");
							newOption.value=value;
							newOption.text=value;
							try{
								dest.add(newOption.value,null);
							}
							catch(error){
								if(dest == null){
									console.log("dest value cannot be null here. Having this logger for testing purpose.. value of element id : "+elementId);
									dest = document.getElementById(elementId);
								}
								dest.add(newOption);
							}
					    });
					});
         		}
         	}

         	function prepareDataForSubmit(){
         		responseOnload.url = window.location.href;
				responseOnload.programDetailList[0].amount = removeCommaFromAmount($("#amount").val());
				responseOnload.programDetailList[0].estimatedAccrual = removeCommaFromAmount($("#estm_accrual").val());				
				responseOnload.programDetailList[0].amountType = $('input:radio[name=optionsRadiosDenomination]:checked').val();
 				responseOnload.programDetailList[0].beginDate = $.datepicker.parseDate( "mm/dd/yy", $('#from').val());
				responseOnload.programDetailList[0].endDate = $.datepicker.parseDate( "mm/dd/yy", $('#to').val());  
				responseOnload.programDetailList[0].programName = $('#program_name_inputselect').val();
				responseOnload.programDetailList[0].longDesc = $("#longDesc").val();
				responseOnload.programDetailList[0].btl = $('#btl_inputselect').val();
				responseOnload.programDetailList[0].payTo = $('#payto_inputselect').val();
				responseOnload.programDetailList[0].paidType = $('#payment_method_inputselect').val();
				responseOnload.programDetailList[0].paidBasedOn = $('#paid_basedon_inputselect').val();
				responseOnload.programDetailList[0].pricingType= $('#pricing_type_inputselect').val();
				responseOnload.programDetailList[0].payoutFrequency = $('#payout_freq_inputselect').val();
				if(($('#glcode_dropdown').val()=='')||($('#glcode_dropdown').val()==null)){
					responseOnload.programDetailList[0].glCode = '0';	
				}else{
					responseOnload.programDetailList[0].glCode = $('#glcode_dropdown').val();	
				}
				
				//responseOnload.programDetailList[0].tbpCheck = parseInt($('#tbpCheck').val());
				if($('#tbpCheck').is(":checked")){
					responseOnload.programDetailList[0].tbpCheck = '1';
				}
				else
				{
				    responseOnload.programDetailList[0].tbpCheck = '0';
				}
				/*Save Program Paid details*/
				//responseOnload.programDetailList[0].programPaidOn.isTiered = $('input:radio[name=optionsRadiosTier]:checked').val();
				if($('input:radio[name=optionsRadiosTier]:checked').val() == 'Yes'){
					responseOnload.programDetailList[0].programPaidOn.isTiered  = true;
				}
				else{
					responseOnload.programDetailList[0].programPaidOn.isTiered  = false;
				}
				if( $('input:radio[name=optionsRadiosTrueUp]:checked').val() == 'Yes'){
					responseOnload.programDetailList[0].programPaidOn.isTrueUp = true;
				}
				else{
					responseOnload.programDetailList[0].programPaidOn.isTrueUp = false;
				}
				
				responseOnload.programDetailList[0].programPaidOn.includedMap = includePaid;
				responseOnload.programDetailList[0].programPaidOn.excludedMap = excludePaid;

				/*Save program achieve on details*/
				responseOnload.programDetailList[0].programAchieveOn.achieveBasedOn = $('#achieve_basedon_inputselect').val();
				responseOnload.programDetailList[0].programAchieveOn.achieveFrequency = $('#achieve_freq_inputselect').val();
				responseOnload.programDetailList[0].programAchieveOn.includedMap = includeAchieve;
				responseOnload.programDetailList[0].programAchieveOn.excludedMap = excludeAchieve;
				
				/*Save Tier information*/
				fnGetTierData(responseOnload);
				if( $('input:radio[name=optionsRadiosDenominationTier]:checked').val() == '%'){
					responseOnload.programDetailList[0].amountTypeTier = '%';
				}
				else{
					responseOnload.programDetailList[0].amountTypeTier = '$';
				}
				responseOnload.programDetailList[0].actualMarker = parseInt($('#actual_marker').val());
				
				/**Save Commentary/Special Instructions */
				responseOnload.programDetailList[0].comments = $("#userComments").val();
         	}

			function enableFields(){
				$('#program-parent-div').find('input, textarea, button, select, a').attr('disabled',false);
				$("#program-parent-div").find('a').removeClass("disabled");
				$('#myModalEdit').modal('toggle');
				if(responseOnload.newProgram == false){
					$('#save-program').show();
               	}
               	$('#edit-button').attr('disabled', true);
				$('#edit-button').addClass("disabled");
				if(!tbp){
					$('#glcode_dropdown').attr('disabled', true);
				}
				$("#cancel-program").html("Cancel");
			}
			function disableFields(){
				$('#program-parent-div').find('input, textarea, button, select, a').attr('disabled',true);
				$("#program-parent-div").find('a').addClass("disabled");
				enabledButtonApplicableToAll();
				$("#cancel-program").html("Back");
			}
			function enabledButtonApplicableToAll(){
				$('#program-expand').attr('disabled', false);
				$('#program-expand').removeClass("disabled");
				$('#pdf-button').attr('disabled', false);
				$('#cancel-program').attr('disabled', false);
				$('#cancelLink').attr('disabled', false);
				$('#cancelLink').removeClass("disabled");
				$('#myModal5').find('button').attr('disabled',false);
				$('#myModal4').find('button').attr('disabled',false);
				$('#myModal7').find('button, a, textarea').attr('disabled',false);
				$('#myModal8').find('button, a, textarea').attr('disabled',false);
				$('#myModal9').find('button, a, textarea').attr('disabled',false);
				$('#myModal10').find('button, a, textarea').attr('disabled',false);
				$('#myModal11').find('button, a, textarea').attr('disabled',false);
				$('#header-button').removeAttr('hidden');
				$('#footer-button').removeAttr('hidden');
				$('#view-program-workflow').attr('disabled', false);
				$('#view-program-workflow').removeClass("disabled");
				$('#program-workflow-btn').attr('disabled', false);
				
			}
			
			function approveProgram(){
				/**Approve program from here will always carry status as Pending,
				In service, after checking the approver level from matrix table, this will be
				changed to Approved if applicable.*/
				var message = "Data approved successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
				responseOnload.status = "2";
				responseOnload.url = window.location.href;
				responseOnload.userComments = $("#approveComments").val();
				if(($('#glcode_dropdown').val()=='')||($('#glcode_dropdown').val()==null)){
					responseOnload.programDetailList[0].glCode = '0';	
				}else{
					responseOnload.programDetailList[0].glCode = $('#glcode_dropdown').val();	
				}
				fnCallService(message, idBefore, 'approve');
				$('#myModal7').modal('toggle');
				disableFields();
			}
			
			function rejectProgram(){
				var message = "Data rejected successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
				responseOnload.status = "1";
				responseOnload.url = window.location.href;
				responseOnload.userComments = $("#rejectionComments").val();
				fnCallService(message, idBefore, 'reject');
				$('#myModal8').modal('toggle');
				disableFields();
			}
         	function saveDraft(){
         		var message = "Data saved successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
         		responseOnload.status = "3";
         		prepareDataForSubmit();
         		fnCallService(message, idBefore, 'save');
         		$('#myModal1').modal('toggle');
         		if(!$("#pdf-button").is(":visible")){
         			$("#pdf-button").show();
         		}
         	}
         	
			function submitForApproval(){
				var message = "Data submitted for approval successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
	 			responseOnload.status = "2";
				prepareDataForSubmit();
				fnCallService(message, idBefore, 'submit');
				$('#myModal').modal('toggle');
				
				if(!$("#pdf-button").is(":visible")){
         			$("#pdf-button").show();
         		}
         		removePlaceHolderPropForTextArea();
         	}
        
        	function validateBeforeSubmit(modalId){
				/**If valid, it will toggle the corresponding modal.
				If there is some error, error modal will be toggled.*/
				if($("#wizard-validation-form").valid() && saveAllRow()){
					$(modalId).modal('toggle');
				}
				else{
					$("#errorMessageModal").html("Please rectify the highlighted errors !!!");
					$('#myModal5').modal('toggle');
				}
			}
			function cancellink(modalId){
				if(_isDirty){
					$('#myModal11').modal('toggle');
				}
				else{
					forwardToCustomerPage();
				}
					
			}
			function forwardToCustomerPage(){
			  window.location.href="/SIM/customer?custId=" + responseOnload.customerId; 
			}
			function fnCallService(message, idBefore, action){
				/*Service call to save the data.*/				
			    $.ajax({
			    	type: "POST",
					url: "/SIM/program/v1/saveProgramDetails",
					dataType: 'json',
					contentType: 'application/json',
					data: JSON.stringify(responseOnload),
					success: function (response) {
			            if (response != null && response.data.success == true && response.data.duplicate == false) {
			            	responseOnload = response.data;
			            	$("#programId").html(response.data.programDetailList[0].id);
							$('#status').html(response.data.status);
							if(idBefore == null){
								populateAfterSave();
							}
							fnPopulateProgramWorkflowStatus(response.data.programWorkflowStatusList);
							fnPopulateProgramDetailTable();
							$("#editabletest").show();
							$("#programSummaryTitleId").show();
							/**Appending program id in the modal message.- Begin*/
							var idAfter = responseOnload.programDetailList[0].id;
							if(idBefore != idAfter){
								var newMessage = "New program id generated : <strong>"+ idAfter + "</strong><br> <br>"+ message;
								message = newMessage; 
								if(responseOnload.requestedDate != null){
				               		$('#requestedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.requestedDate)));
				               	}
				               	if(responseOnload.createdDate != null){
				               		$('#createdDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.createdDate)));
				               	}
							}
							$("#confirmMessage").html(message);
							$('#myModal4').modal('toggle');
							if(action === 'submit'){
								disableFields();
							}
							/**Appending program id in the modal message.- End*/
							_isDirty = false;
			            } 
			            else if(response.data.duplicate == true)
			            {
			              var idAfter = response.data.id;
			              $("#confirmMessage").html("Program already exists and the previous program id is <strong>"+ idAfter + "</strong>");
						  $('#myModal4').modal('toggle');
			            }
			            else {
							alert("Issue while saving the data. Please try again after sometime.!!");
			            }
					},
					failure: function(response){
						alert("Issue while saving the data. Please try again after sometime.!!");
					}
			    });
			}
	
			function populateAfterSave(){
               	$('#accrualAmount').html('0');
               	$('#paidAmount').html('0');
               	$('#balance').html('0');               	
			}
			
			function fnGetTierData(responseOnload){
				/* var programDetailTierList= {}; */
                var tiertype=$('input[name=optionsRadiosDenominationTier]:checked').val();
                $('#tier-schedule tbody').find('tr').each(function(i) {

                    var tds = $(this).find('td'),
                    marker = tds.eq(0).text(),
                    amount = tds.eq(1).text(),
                    range = tds.eq(2).text();
                    
                    var regex = new RegExp(',', 'g');
                    var programDetailTier = new Object();
                    if($(this).find('a').eq(0).attr('id') == null){
                    	programDetailTier.id = null;
                    }
                    else{
                    	programDetailTier.id = parseInt($(this).find('a').eq(0).attr('id'));
                    }
                    programDetailTier.programDetailId = responseOnload.programDetailList[0].id;
                    programDetailTier.level = parseInt(marker);
                    //programDetailTier.amount = parseInt(amount);
                    programDetailTier.amount = parseFloat(removeCommaFromAmount(amount));
                    programDetailTier.tierType = tiertype;
                    programDetailTier.beginRange = parseInt(range.replace(regex, ''));
                   
                   	if(responseOnload.programDetailList[0].programTierDetailList == null){
                   		responseOnload.programDetailList[0].programTierDetailList = [];	
                   	}
                    /* programDetailTierList[i] = programDetailTier; */
                    responseOnload.programDetailList[0].programTierDetailList[i] = programDetailTier;
                });
                
                /* responseOnload.programDetailList[0].programTierDetailList = programDetailTierList; */
			}
			     	
         	function resetFormForMandatoryCheck(elementId){
         		if( $('#'+ elementId).valid()){
				   $('#'+ elementId).validate().resetForm(); 
				}
         	}
         	
         	
         	function fnPopulateDropdown(elementId, items){
	         	if(items != null){
	         		$.each(items, function (i, item) {
					    $('#'+ elementId).append($('<option>', { 
					        value: item.key,
					        text : item.value 
					    }));
					});
					resetFormForMandatoryCheck(elementId);
	         	}
			}
            
			function copyPaidDetails(closeModal){
				$("#achieve_basedon_inputselect").val($("#paid_basedon_inputselect").val());
				$("#achieve_freq_inputselect").val($("#payout_freq_inputselect").val());
				
				listboxCopy('include', 'achInclude');
				listboxCopy('exclude', 'achExclude');
				if(closeModal == 'Y'){
					$('#myModal10').modal('toggle');
				}
				$("#achieve_basedon_inputselect").trigger('change');
			}
             
            $("input[name=optionsRadiosTier]").on( "change", function() {
				var test = $(this).val();
				if(test == 'Yes'){
					$("#achieve-based-on").show();
					$("#program-tier").show();
					$("#amountdiv").hide();
					id=$('#achieve_basedon_inputselect option:selected').val();
					
				}
				else{
					$("#achieve-based-on").hide();
					$("#program-tier").hide();
					$("#amountdiv").show();
					id=$('#paid_basedon_inputselect option:selected').val();
				}

				populateGlcode(id);
				
    		} );
    		
    		$('#myModal7').on('shown.bs.modal', function () {
			    $('#approveComments').focus();
			});
			
			$('#myModal8').on('shown.bs.modal', function () {
			    $('#rejectionComments').focus();
			})
			
	</script>
       
	<script type="text/javascript">
		$(document).ready(function() {
			$('#pdf-button').click(function () {
			//for IE added new block
			 if (navigator.userAgent.indexOf('Trident')>0 || navigator.userAgent.indexOf('Edge')>0)
	    	{
	    	  var request = new XMLHttpRequest();
			  request.open("POST", '/SIM/program/v1/downloadPDF/'+responseOnload.programDetailList[0].id, true); 
			  request.responseType = "blob";
			  request.onload = function (e) {
			  if (this.status === 200) {
	           // `blob` response
	          console.log(this.response);
	          //var blobObject = new Blob([(this.response]); 
           	 window.navigator.msSaveOrOpenBlob(this.response, 'ProgramDetails_'+responseOnload.programDetailList[0].id+'.pdf'); 
				    };
				};
			request.send();
	    	}
	    	else
	    	{
				var request = new XMLHttpRequest();
				request.open("POST", '/SIM/program/v1/downloadPDF/'+responseOnload.programDetailList[0].id, true); 
				request.responseType = "blob";
				request.onload = function (e) {
			    if (this.status === 200) {
		        // `blob` response
		        console.log(this.response);
		        // create `objectURL` of `this.response` : `.pdf` as `Blob`
		        var file = window.URL.createObjectURL(this.response);
		        var a = document.createElement("a");
		        a.href = file;
		        a.download = this.response.name || 'ProgramDetails_'+responseOnload.programDetailList[0].id+'.pdf';
		        document.body.appendChild(a);
		        a.click();
		           }
				}
				request.send();
		  }	
			});
		});
	</script>

	<script type="text/javascript">
	function populateGlcode(id){
			pgmType='';
			$('#glcode_dropdown').val('');
			if(responseOnload.businessUnit=='P'){
				//key=($('#program_name_inputselect option:selected').text())+' - '+'Consumer';
				key='Consumer';
			}else if(responseOnload.businessUnit=='T'){
				//key=($('#program_name_inputselect option:selected').text())+' - '+'Commercial';
				key='Commercial';
			}else{
				//key=($('#program_name_inputselect option:selected').text())+' - '+'OTR';
				key='OTR';
			}
			//id=$('#paid_basedon_inputselect option:selected').val();
			$.each(responseOnload.programDetailList[0].baseItemList, function (i, item) {
				   if(id==item.id){
					   if(item.base==1){
						   pgmType='VBS';						   
						   if(!$('#optionsRadiosDollarSign').is(':checked')){
							   $("#amount").val(""); 
						   }
						   $("#optionsRadiosDollarSign, #optionsRadiosDollarSignTier1").prop("checked", true);
						  
						   $("#amount").valid();
					   }else{
						   pgmType='MKP';
						   if(!$('#optionsRadiosPercentage').is(':checked')){
							   $("#amount").val(""); 
						   }
						   $("#optionsRadiosPercentage, #optionsRadiosPercentageTier1").prop("checked", true);
						   $("#amount").valid();
					   }
				   }
				});
			
			$.each(responseOnload.programDetailList[0].glCodeList, function (i, item) {
			   if((key==item.bu)&&(item.pcs==pgmType)){
				   $('#glcode_dropdown').val(item.id); 
			   }
			});
	}
	
	
			$(document).ready(function() {
				
			/* 	$('#program_name_inputselect').change(function(){
					/* $('#glcode_dropdown').val(''); 
 					if(responseOnload.businessUnit=='P'){
						key=($('#program_name_inputselect option:selected').text())+' - '+'Consumer';
					}else{
						key=($('#program_name_inputselect option:selected').text())+' - '+'Commercial';
					}
					$.each(responseOnload.programDetailList[0].glCodeList, function (i, item) {
					   if(key==item.glBucket){
						   $('#glcode_dropdown').val(item.id); 
					   }
					}); */
					/*if($('#optionsRadiosTierYes').is(':checked')){
						id=$('#achieve_basedon_inputselect option:selected').val();	
					}else{
						id=$('#paid_basedon_inputselect option:selected').val();
					}
					populateGlcode(id);
					
				});
				 */
				
				
				$('#paid_basedon_inputselect').change(function(){
					if(!$('#optionsRadiosTierYes').is(':checked')){
					
					id=$('#paid_basedon_inputselect option:selected').val();
					
					populateGlcode(id);
					}
				});
				

				$('#achieve_basedon_inputselect').change(function(){
					if($('#optionsRadiosTierYes').is(':checked')){
					
					id=$('#achieve_basedon_inputselect option:selected').val();
					
					populateGlcode(id);
					}
				});
				
				
				$(document).on('blur', "#tier_amount", function () {
					var value = $(this).val();
					if(value != null && value != 'undefined' && $('input:radio[name=optionsRadiosDenominationTier]:checked').val() == '$' ){
						 /* value = value.toString().replace(/,/g, ""); */
						  value = convertAmountFormat(value); 
						 /* value = parseFloat(amount).toFixed(2); */
						 /* value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
						 value = parseFloat(value).toFixed(2); */ 
						 $(this).val(value);
            		}
            		else if(value != null && value != 'undefined' && $('input:radio[name=optionsRadiosDenominationTier]:checked').val() == '%' ){
						 /* value = value.toString().replace(/,/g, ""); */
						  value = convertPercentageFormat(value); 
						 /* value = parseFloat(amount).toFixed(2); */
						 /* value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
						 value = parseFloat(value).toFixed(2); */ 
						 $(this).val(value);
            		}
				   
				}); 
				
				$(document).on('blur',"#tier_range" , function () {
					var value = $(this).val();
					if(value != null && value != 'undefined' && $('input:radio[name=optionsRadiosDenominationTier]:checked').val() == '$' ){
						 /* value = value.toString().replace(/,/g, ""); */
						  value = convertNumberFormat(value); 
						 /* value = parseFloat(amount).toFixed(2); */
						 /* value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
						 value = parseFloat(value).toFixed(2); */ 
						 $(this).val(value);
            		}
				   
				}); 
				/*  $(document).on('keyup', "#amount", function () {
					var value = $(this).val();
					if(value != null && value != 'undefined' ){
						 value = value.toString().replace(/,/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",");
						    $(this).val(value);
            		}
				   
				});   */
				
				    
				$('#copy-paid-info-btn').click(function () {
					
					var include1 = document.getElementById('include');
					var exclude1 = document.getElementById('exclude');
					
					if( (include1 == null || include1.options.length == 0) && (exclude1 == null || exclude1.options.length == 0) &&
						$("#paid_basedon_inputselect").val() == null && $("#payout_freq_inputselect").val() == null){
						$("#informationMessageModal").html("No details available to copy. Kindly fill in paid details to copy.");
						$('#myModal6').modal('toggle');
						return false;
					}
					
					var achinclude1 = document.getElementById('achInclude');
					var achexclude1 = document.getElementById('achExclude');
					
					if($("#achieve_basedon_inputselect").val() != null || $("#achieve_freq_inputselect").val() != null || 
					(achinclude1 != null && achinclude1.options.length > 0) ||  (achexclude1 != null && achexclude1.options.length > 0)){
						/**There is few values already existing in achieve based on. show a warning pop up.*/
						$("#copyWarningMessageModal").html("Achieve based on details already exists. If you click 'OK', then existing data in achieve based on will be lost and paid based on data will be copied. Click on 'Cancel', to retain existing data in achieve based on.");
						$('#myModal10').modal('toggle');
					}
					else{
						copyPaidDetails('N');
					}
				});
			});
			
			$(':input').change(function(){
				_isDirty = true;
			});
			
			$("#amount").blur(function(){
				if($('input:radio[name=optionsRadiosDenomination]:checked').val() == '$'){
					$("#amount").val(convertAmountFormat($("#amount").val()));
				}
				else if($('input:radio[name=optionsRadiosDenomination]:checked').val() == '%'){
					$("#amount").val(convertPercentageFormat($("#amount").val()));
				}
			});
			
			function convertPercentageFormat(amount){
				if(amount != null && amount != 0 && amount.toString().includes(".")){
					/*Remove comma's if already present*/
					amount = amount.toString().replace(/,/g, "");
					if(!isNaN(amount)){
						amount = parseFloat(amount).toFixed(2);
						var withCommas = Number(amount).toLocaleString('en',
																{ minimumFractionDigits: 2 });
																
						return withCommas;
					}
				}
				
				return amount;
			}
						
			function convertAmountFormat(amount){
				if(amount != null && amount != 0){
					/*Remove comma's if already present*/
					amount = amount.toString().replace(/,/g, "");
					if(!isNaN(amount)){
						amount = parseFloat(amount).toFixed(2);
						var withCommas = Number(amount).toLocaleString('en',
																{ minimumFractionDigits: 2 });
																
						return withCommas;
					}
				}
				
				return amount;
			}
			
			function convertNumberFormat(amount){
				if(amount != null && amount != 0){
					/*Remove comma's if already present*/
					amount = amount.toString().replace(/,/g, "");
					if(!isNaN(amount)){
						amount = parseInt(amount);
						var withCommas = Number(amount).toLocaleString('en');
																
						return withCommas;
					}
				}
				
				return amount;
			}
			
			function removeCommaFromAmount(amount){
				if(amount != null){
					return amount.toString().replace(/\,/g,'');
				}
			}
			$('input[type=radio][name=optionsRadiosDenomination]').change(function() {
				$("#amount").val("");
				$("#amount").valid();
			});
			
			function saveAllRow(){
            	var table1 = $("#tier-schedule").DataTable();
            	var isAllRecordValid = true;
            	$('#tier-schedule tbody').find('tr').each(function(i) {
                    var tds = $(this).find('td'),
                    tierId = tds.eq(0).text();
                    var recordValid = true;
                    if(tierId != 'No data available in table'){
                    	var nRow = table1.fnGetNodes(i);
                    	recordValid = saveRow1(table1, nRow);
                    	if(!recordValid){
                    		isAllRecordValid = false;
                    	}
                    }
                });
            	return isAllRecordValid;
            }
            
            function validateRange(nRow, oTable){
           	 var jqTds = $('>td',  nRow);
           	 var jqInputs = $('input',  nRow.childNodes);
           	 var beginRange = removeCommaFromAmount(jqInputs[1].value.trim());
           	 var endRange = removeCommaFromAmount(jqTds[3].innerText);
           	 if(parseInt(beginRange) > parseInt(endRange)){
           		 return false;
           	 }
           	 var tierId = parseInt(jqTds[0].innerText);
             if(tierId > 1){
             	var aData = oTable.fnGetData(parseInt(tierId)-2);
             	var beginRangePre = parseInt(removeCommaFromAmount(aData[2]));
             	if( beginRangePre >= parseInt(beginRange)){
             		return false;
             	}
             }
           	 return true;
           }
            
            function saveRow1(oTable, nRow) {
                var jqInputs = $('input',  nRow.childNodes);
                if(jqInputs.length > 0){
	                if((jqInputs[0].value.trim()=="")||(jqInputs[1].value.trim()=="")){
	                	//editRow(oTable, nRow);
						/* $("#tier_amount").valid();
						$("#tier_range").valid(); */
	                	/* $("#errorMessageModal").html("Tier Section cannot have empty values");
						$('#myModal5').modal('toggle'); */
	                	return false;
	                }
	                if(!validateRange(nRow, oTable)){
	                	
	                	oTable.fnUpdate('<input type="text" style="width:100%" class="form-control small error" value="' + jqInputs[1].value + '">', nRow, 2, false);
	                	/* $("#errorMessageModal").html("Invalid value for begin range.");
						$('#myModal5').modal('toggle'); */
	                	return false;
	                }
	                
	                var aData = oTable.fnGetData(nRow);
	                var tierId = parseInt(aData[0]);
	                
	                /*oTable.fnUpdate(jqInputs[0].value, nRow, 0, false);*/
	                oTable.fnUpdate(jqInputs[0].value, nRow, 1, false);
	                oTable.fnUpdate(jqInputs[1].value, nRow, 2, false);
	
	                
	                var jqAnchor = $('a', nRow);
	                if($(jqAnchor[0]).attr('id') == null){
	                	oTable.fnUpdate('<a class="edit" href="">Edit</a>', nRow, 4, false);
	                }
	                else{
	                	oTable.fnUpdate('<a id='+ $(jqAnchor[0]).attr('id') +' class="edit" href="">Edit</a>', nRow, 4, false);	
	                }
	                if($(jqAnchor[1]).attr('id') == null){
	                	oTable.fnUpdate('<a class="delete" href="">Delete</a>', nRow, 5, false);
	                }
	                else{
	                	oTable.fnUpdate('<a id='+ $(jqAnchor[1]).attr('id') +' class="delete" href="">Delete</a>', nRow, 5, false);	
	                }
	                
	                if(tierId > 1){
	                	var nRowTemp = oTable.fnGetNodes(parseInt(tierId)-2);
	                	var endRange = parseInt(removeCommaFromAmount(aData[2])) - 1;
	                	oTable.fnUpdate(convertNumberFormat(endRange), nRowTemp, 3, false);
	                }
	                
	                oTable.fnDraw();                
                }

                /*if(!$("#actual_marker").valid()){
					$("#errorMessageModal").html("Please rectify the highlighted errors !!!");
					$('#myModal5').modal('toggle');
				}*/
                
                return true;
            }
			
	</script>

	<!-- END JAVASCRIPTS -->
       
   </body>
</html>