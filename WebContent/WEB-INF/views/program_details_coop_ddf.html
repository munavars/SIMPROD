<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Program Details Form Wizard">
      <meta name="author" content="Yokohama">
      <meta name="keyword" content="YMPACT">
      <title>Program Details</title>
      <!-- Bootstrap core CSS -->
      <link href="resources/css/bootstrap.min.css" rel="stylesheet">
      <link href="resources/css/bootstrap-reset.css" rel="stylesheet">

      <!--external css-->
      <link href="resources/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
      <!--Date Picker--> 
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datepicker/css/datepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-daterangepicker/daterangepicker-bs3.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/jquery-multi-select/css/multi-select.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-timepicker/compiled/timepicker.css" />
      <link rel="stylesheet" type="text/css" href="resources/assets/bootstrap-datetimepicker/css/datetimepicker.css" />
     
      <!--select 2-->
      <link rel="stylesheet" type="text/css" href="resources/assets/select2/css/select2.min.css"/>
      <!--right slidebar-->
      <link href="resources/css/slidebars.css" rel="stylesheet">
       <!--Form Wizard-->
      <link rel="stylesheet" type="text/css" href="resources/css/jquery.steps.css" />
      <!-- Custom styles for this template -->
      <link href="resources/css/style.css" rel="stylesheet">
      <link href="resources/css/style-responsive.css" rel="stylesheet" />
      
      <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltips and media queries -->
      <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
      <![endif]-->
    	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
       <script src="resources/js/paidAchieve.js"></script>

      <script>
         function sync()
         {
           var n1 = document.getElementById('include');
           var n2 = document.getElementById('input4');
           n2.value = n1.value;
         }
      </script>
   </head>
   <body onload="prdValue();include();exclude();">
      <section id="container" class="sidebar-closed">
         <!--header start-->
         <header class="header dark-bg">
            <div class="sidebar-toggle-box" id="sidebar-toggle-box" style="display:none">
               <i class="fa fa-bars"></i>
            </div>
            <!--logo start-->
            <a href="" class="logo"><img src="resources/img/yokohama-logo.svg" width="132" height="52"></a>
            <!--logo end-->
            <div class="nav notify-row" id="top_menu">
               <!--  notification start -->
               <ul class="nav top-menu">
              <!-- settings start -->
              <!-- settings end -->
             
            <!-- notification dropdown start-->
             <li id="header_notification_bar" class="dropdown">
                 <!--  <a data-toggle="dropdown" class="dropdown-toggle" href="#">

                      <i class="fa fa-bell-o"></i>
                      <span class="badge bg-important">7</span>
                  </a> -->
<!--                   <ul class="dropdown-menu extended notification">
                      <div class="notify-arrow notify-arrow-yellow"></div>
                      <li>
                          <p class="yellow">You have 7 new notifications</p>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-success"><i class="fa fa-bell"></i></span>
                              #20543 has been approved
                              <span class="small italic">30 mins</span>
                          </a>
                      </li>
                      <li>
                          <a href="#">
                              <span class="label label-danger"><i class="fa fa-bolt"></i></span>
                               #20543 has been rejected
                              <span class="small italic">4 hrs</span>
                          </a>
                      </li>
                  </ul> -->
              </li>
              <!-- notification dropdown end -->
          </ul>
            </div>
            <div class="top-nav ">
               <ul class="nav pull-right top-menu">
                 <!--  <li>
                     <input type="text" class="form-control search" placeholder="Search">
                  </li> -->
                  <!-- user login dropdown start-->
                  <li class="dropdown">
                     <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                     <span class="username" id="loginUserName"></span>
                     
                     <b class="caret"></b>
                     </a>
                     <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
                        <li><a id="logout-btn" href="/SIM/logout"><i class="fa fa-key"></i> Log Out</a></li>
                     </ul>
                  </li>
                  <!-- user login dropdown end -->
               </ul>
            </div>
         </header>
         <!--header end-->
         <!--sidebar start-->
         <aside>
            <div id="sidebar"  class="nav-collapse ">
               <!-- sidebar menu start-->
               <ul class="sidebar-menu" id="nav-accordion">
                  <li>
                     <a class="" href="processLogin">
                     <i class="fa fa-dashboard"></i>
                     <span>My Dashboard</span>
                     </a>
                  </li>
                  <!-- <li>
                     <a class="active" href="program_details.html">
                     <i class="fa fa-tasks"></i>
                     <span>Create New Program</span>
                     </a>
                  </li>
                  <li>
                     <a class="" href="program_details_existing.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Program</span>
                     </a>
                  </li>
                  <li>
                     <a class="" href="program_details_rejected.html">
                     <i class="fa fa-tasks"></i>
                     <span>Edit Rejected Program</span>
                     </a>
                  </li>
                  <li>
                     <a href="login">
                     <i class="fa fa-user"></i>
                     <span>Login Page</span>
                     </a>
                  </li> -->
               </ul>
               <!-- sidebar menu end-->
            </div>
         </aside>
         <!--sidebar end-->
         <!--main content start-->
         <section id="main-content">
            <section class="wrapper site-min-height">
               <!-- page start-->
                <div  id="program-parent-div" class="row">
                  <div class="col-lg-12">
                     <!--progress bar start-->
                     <section class="panel">
                        <header class="panel-heading">
                           <h3>Program Item Detail</h3>
                        </header>
                        <div class="panel-body">
                          <div class="clearfix">
                             <div class="col-lg-12">
                                <h5 data-original-title="Customer Details" data-content="Click on the grey button below to see more info about this customer. Click again to hide it." data-placement="top" data-trigger="hover" class="popovers">Customer Details</h5>
                                <!-- Edit button Begin -->
								<div id="header-button" class="modal-footer" hidden="true">
	                                <button id="pdf-button" class="btn" disabled="disabled">Generate PDF</button> <!-- <div class="space15">&nbsp;</div> -->
	                                &nbsp;
	                                <!-- EDIT BUTTON START -->
	                                <a class="btn btn-info finish" id="edit-button" data-toggle="modal" href="#myModalEdit" disabled="disabled"><i class="fa fa-edit"></i>&nbsp;&nbsp;Edit</a>
                                </div>
                               	 <!-- Modal -->
				                <div class="modal fade" id="myModalEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				                	<div class="modal-dialog">
				                		<div class="modal-content">
				                        	<div class="modal-header">
				                            	<button id="modal-edit-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				                               	<h4 class="modal-title">Edit confirmation</h4>
				                            </div>
				                            <div class="modal-body">
												<div class="space15">&nbsp;</div>
												 <div class="text-center"> Are you sure you want to Edit? If you still want to Edit, click the OK button. If you don't want to Edit, click the "Cancel" button below and your program will not be editable. </div>
				                                <div class="space15"></div>
				                            </div>
				                            <div class="modal-footer">
				                                    <button id="modal-edit-cancel" data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
													<a href="javascript: enableFields()"><button id="modal-edit-ok" class="btn btn-info" type="button"><i class="fa fa-edit"></i>&nbsp;&nbsp;OK</button></a>
				                            </div>
										</div>
									</div>
								</div>
								<!-- Edit button End -->
                                 <ul class="list-inline w-list">
                                    <li>Customer Name: <strong><span class="yokohamared" id="customerName"></span></strong></li>
                                    <li>Program ID: <strong><span id="programId"></span></strong></li>
                                    <li class="p-right10">Business Unit: <strong><span id="businessUnit"></span></strong></li>
                                    <li><button id="program-expand" type="button" class="btn btn-default btn-xs" data-toggle="collapse" data-target="#demo"><i class="fa fa-angle-down"></i></button></li>
                                 </ul>
                               <div id="demo" class="collapse out">
                                <div class="col-lg-3 col-md-4 col-sm-4 p-left0">
                                   <ul class="list-unstyled w-list">
                                    <li>Request ID: <span id="requestId"></span></li>
                                    <li>Requested By: <span id="requestedBy"></span></li>
                                    <li>Requested Date: <span id="requestedDate"></span></li>
                                    <li>Created By: <span id="createdBy"></span></li>
                                    <li>Created Date: <span id="createdDate"></span></li>
                                    <li>Program Type: <span id="programTypeHeader"></span></li>
                                    <br>
                                    <h5 id="programSummaryTitleId">Program Summary</h5>
                                 </ul>
                                </div>
                               <div class="col-lg-4 col-md-5 col-sm-4">
                                   <ul class="list-unstyled w-list">
                                    <li>Zone Manager Approved By: <span id="zoneManagerApprovedBy"></span> </li>
                                    <li>Zone Manager Approved Date: <span id="zoneManagerApprovedDate"></span> </li>
                                    <!-- <li>Director Approved By: <span id="directorApprovedBy"></li>
                                    <li>Director Approved Date: <span id="directorApprovedDate"></li>
                                    <li>Executive Approved By: <span id="executiveApprovedBy"</li>
                                    <li>Executive Approved Date: <span id="executiveApprovedDate"</li> -->
                                    <li>TBP Approved By: <span id="tbpApprovedBy"></span> </li>
                                    <li>TBP Approved Date: <span id="tbpApprovedDate"></span> </li>
                                    <li>Status: <span id="status"></span> 
                                    
										<a id="view-program-workflow" data-toggle="modal" href="#myModal9">
                               			<button id="program-workflow-btn" type="button" class="btn btn-default btn-xs">
                               			<i class="fa fa-list-alt" aria-hidden="true"></i> </button> </a>
                                    
                                    </li>

                                 </ul>
                                </div>
                                <div class="col-lg-4 col-md-3 col-sm-4">
                                   <ul class="list-unstyled w-list">
                                    <li>Accrual Amount: <span class="text-right" id="accrualAmount">$ </span></li>
                                    <li>Paid Amount: <span class="text-right" id="paidAmount">$ </span></li>
                                    <li>Balance: <span class="text-right" id="balance">$ </span></li>
                                 </ul>
                              </div>
                          <table class="table table-striped table-hover table-bordered" id="editabletest">
							<thead>
                              <tr class="rowvis" style="background-color: #cacbce;">
                                <th>Pgm ID</th>
                                <th>Program</th>
                                <th>Frequency</th>								
                                <th>Begin Date</th>
                                <th>End Date</th>
                                <th>BTL</th>
                                <th>LT / Promo</th>	
                                <th>Paid Based On</th>								
                                <th>Tiered </th>
                                <th>Achieve Based On</th>
                                <th>True Up</th>								
                                <th>Accrual Amount</th>
                                <th>Accrual Type</th>
								<th>Current Tier</th>
								<th>Begin Range</th>
								<th>Tier Rate</th>								
                                <th>Accrued Amount</th>
                                <th>Credit Amount</th>
                                <th>Payables</th>								
                                <th>GL Balance</th>
                                <th>Created Date</th>
                                <th>Modified Date</th>
                              </tr></thead>
                              <tbody>
                              <tr>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td>0</td>
                              <td>0</td>
                              <td>0</td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              </tr>
                              </tbody></table>
                           </div>
                       </div>
                       </div>
						
                		   <!-- START STEP 1: PROGRAM INFO -->
                           <form id="wizard-validation-form" class="cmxform" action="#">
                              <div>
                                 <section>
                                    <div class="form-group clearfix">
                                        
                                       <div class="col-lg-12">
                                           <h5>Program Details</h5>
													<div class="row">
														<div class="col-lg-4 col-sm-4">
															<label class="control-label" for="program_name_inputselect">Program
																Name</label> <select
																class="form-control input-sm m-bot15 required"
																id="program_name_inputselect"
																name="program_name_inputselect"> 
															</select>
														</div>
														<div class="col-lg-4 col-sm-4">
															<label class="control-label" for="payout_freq_inputselect">Payout
																Frequency</label> <select class="form-control input-sm m-bot15"
																id="payout_freq_inputselect"
																name="payout_freq_inputselect">
															</select>
														</div>
														<div class="form-group">
															<div class="col-lg-4 col-sm-4">
																<label class="control-label" for="from">Begin/End Dates:</label>
																<div class="input-group input-medium"
																	data-date-format="mm/dd/yy">
																	<input type="text" class="form-control dpd1 required"
																		name="from" id="from" placeholder="Begin Date" readonly="readonly" style="background:white;">
																		<span class="input-group-addon">To</span> 
																	<input type="text"
																		class="form-control dpd2 required" name="to" id="to"
																		placeholder="End Date" readonly="readonly" style="background:white;">
																</div>
															</div>
														</div>
													</div>
													<!-- ROW 1 ENDS -->
													<!-- ROW 2 STARTS -->
													<div class="row">
														<div class="col-lg-4 col-sm-4">
															<label class="control-label" for="payto_inputselect">Pay
																To</label> <select
																class="form-control input-sm m-bot15 required"
																id="payto_inputselect"
																name="payto_inputselect">
															</select>
														</div>
														<div class="col-lg-4 col-sm-4">
															<label class="control-label" for="payment_method_inputselect">Paid
																Type</label> <select
																class="form-control input-sm m-bot15 required"
																id="payment_method_inputselect"
																name="payment_method_inputselect">
															</select>
														</div>
														<div class="col-lg-4 col-sm-4">
															<label class="control-label" for="paid_basedon_inputselect">Paid
																Based On</label> <select class="form-control input-sm m-bot15"
																id="paid_basedon_inputselect"
																name="paid_basedon_inputselect">
															</select>
														</div>
													</div>
													<!-- ROW 2 ENDS -->
													<!-- ROW 3 STARTS -->
													<div class="row">
														<div class="form-group">
															<div class="col-lg-4 col-sm-4">
																<label class="control-label" for="amount">Amount</label>
																<input id="amount" name="amount" type="text"
																	class="form-control m-bot15" value="">
															</div>
															<div class="col-lg-2 col-sm-2">
																<div class="radio-inline accrualtype inline-flex">
																	<label for="optionsRadiosDenomination"> <input type="radio"
																		selected name="optionsRadiosDenomination"
																		id="optionsRadiosPercentage" value="%"
																		class="radio-inline denomination required">%
																	</label>
																</div>
																<div class="radio-inline accrualtype inline-flex">
																	<label class="control-label" for="optionsRadiosDenomination">
																		<input type="radio" name="optionsRadiosDenomination"
																		id="optionsRadiosDollarSign" value="$"
																		class="radio-inline denomination required"
																		checked="checked">$
																	</label>
																</div>
																<div class="radio-inline accrualtype inline-flex" id="tbpchk">
																<label class="control-label"
																			for="tbpcheck">TBP Special Handling</label>&nbsp;&nbsp; 
																			 <input
																			type="checkbox" name="tbpCheck"
																			id="tbpCheck"/>
															</div>
																
															</div>
															
															<div class="col-lg-4 col-sm-4">
																<label class="control-label"
																			for="glcode_dropdown">GLNo</label>
																			 <select  id="glcode_dropdown" name="glcode_dropdown" class="form-control input-sm m-bot15" disabled="disabled"/> 
																			<!--  <input id="glcode_dropdown" name="glcode_dropdown" type="text" class="form-control "  value="" disabled> -->
															</div>
															</div>
																		 
															 
														</div>
													<!-- ROW 3 ENDS -->
													<!-- ROW 4 STARTS -->
													<div class="row">
														<div class="col-lg-12">
															<label class="control-label " for="longDesc">Program
																Description</label>
															<textarea id="longDesc" name="longDesc"
																class="form-control m-bot15"></textarea>
														</div>
													</div>
													<!-- ROW 4 ENDS -->
													<div class="row">
														<div class="form-group">
															<div class="space15 clearfix"></div>
															<h4>Paid Based On</h4>
															<div class="col-lg-3 col-md-3 col-sm-3">
																<select class="paidachieve" name="paidBasedOn"
																	id="paidBasedOn"
																	onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);">
																	<option selected disabled value="select">-- Select --</option>
																</select>
																<div class="form-group last">
																	<div class="" id="div1">
																		<script type="text/javascript" language="JavaScript">
				                                                             function prdValue(){
				                                                               var el = document.getElementById('div1');
				                                                                  el.innerHTML = '<select name="prdvalue" id="prdvalue" multiple="multiple" class="multi-select paidachieve_box"></select>';}
			                                                            </script>
																	</div>
																</div>
															</div>
															<div class="col-lg-1 col-md-1 col-sm-1 center">

																<div class="m-bot15 m-top45">
																	<a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('prdvalue', 'include')">&#62;&#62;</a>
																	<br /> 
																	<a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('include', 'prdvalue')">&#60;&#60;</a>
																</div>
																<br>
																<div class="">
																	<a href="javascript:void(0);" aria-activedescendant=""
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('prdvalue', 'exclude')">&#62;&#62;</a>
																	<br /> <a href="javascript:void(0);"
																		class="btn btn-default btn-sm m-bot5"
																		onclick="listbox_moveacross('exclude', 'prdvalue')">&#60;&#60;</a>
																</div>
															</div>

															<div class="col-lg-4 col-md-4 col-sm-4">

																<h5 class="paid-achieve">Include</h5>
																<div class="m-bot15" id="div2">
																	<script type="text/javascript" language="JavaScript">
					                                                      function include(){
					                                                      var el = document.getElementById('div2');
					                                                                el.innerHTML = '<select name="include" multiple="multiple" class="multi-select paidachieve_box2" id="include"></select>';
					
					                                                         }
					                                                   </script>
																</div>

																<h5 class="paid-achieve">Exclude</h5>
																<div class="" id="div3">
																	<script type="text/javascript" language="JavaScript">
					                                                       function exclude(){
					                                                       var el = document.getElementById('div3');
					                                                                 el.innerHTML = '<select name="exclude" multiple="multiple" class="multi-select paidachieve_box2" id="exclude"></select>';
					                                                          }
					                                                    </script>
																</div>

															</div>


															<!-- END PAID based on -->
														</div>
													</div>
													<!-- END ROW 4 -->
													<!-- Start ROW 5 -->
													<div class="clearfix"></div>
													<div class="row">
														<div class="col-lg-12">
															<label class="control-label" for="userComments">Commentary/Special
																Instructions</label>
															<textarea id="userComments" name="userComments"
																class="form-control" rel="txtTooltip"
																data-content="If you can't see all your content, pull down the bottom-right corner of this field to expand the height."
																title="<i class='fa fa-lightbulb-o'></i>&nbsp;&nbsp;Hot Tip"
																data-toggle="tooltip" data-trigger="hover"
																data-placement="top" rows="3"
																placeholder="Add description details"></textarea>
														</div>
													</div>
													<!-- END ROW 5 -->
													
													
													</div>


													<div class="row">
                                            <div class="space15 clearfix"></div>
                                  <div class="form-group">

                                  
      <!---- START Submit -->
      
          <div class="clearfix"></div>

          <!-- BUTTON START -->
           <div id="footer-button" class="modal-footer" hidden="true">
            
		      
		      <button id="cancel-program" data-dismiss="modal" class="btn btn-default" type="button" onclick="cancellink('#myModal11')">Cancel</button>	&nbsp;
              <a class="btn btn-success" id="submit-program" href="javascript: validateBeforeSubmit('#myModal')" ><i class="fa fa-check-circle"></i>&nbsp;&nbsp;Submit For Approval</a>&nbsp;	  
              <a class="btn btn-info finish" id="save-program"  href="javascript: validateBeforeSubmit('#myModal1')"><i class="fa fa-save"></i>&nbsp;&nbsp;Save Changes</a>
              <a class="btn btn-info" id="reject-program" data-toggle="modal" href="#myModal7"><i class="fa fa-times-circle"></i>&nbsp;&nbsp;Reject </a> &nbsp;
			  <a class="btn btn-success finish" id="approve-program" data-toggle="modal" href="#myModal6"><i class="fa fa-check-circle"></i>&nbsp;&nbsp;Approve</a>&nbsp;
              
              <!-- Modal -->
                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                		<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-submit-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                               	<h4 class="modal-title">Submit for Approval?</h4>
                            </div>
                            <div class="modal-body">
								<div class="space15">&nbsp;</div>
								 <div class="text-center"> Are you sure you want to Submit for approval? If you still want to submit for approval, click the OK button. If you don't want to submit, click the "Cancel" button below and your program will not be submitted. </div>
                                <div class="space15"></div>
                            </div>
                            <div class="modal-footer">
                                    <button id="program-submit-modal-cancel" data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
									<a href="javascript: submitForApproval()"><button id="program-submit-modal-ok" class="btn btn-info" type="button"><i class="fa fa-save"></i>&nbsp;&nbsp;OK</button></a>
                            </div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-save-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Save Program Changes?</h4>
                            </div>
							<div class="modal-body">
								<div class="space15">&nbsp;</div>
								<div class="text-center">Are you sure you want to Save Changes? If you still want to save your changes, click the OK button. If you don't want to save your changes, click the "Cancel" button below and your program will not save these changes. </div>
                                <div class="space15"></div>
							</div>
							<div class="modal-footer">
								<button id="program-save-modal-cancel" data-dismiss="modal" class="btn btn-default"
									type="button">Cancel</button>
								<a href="javascript: saveDraft()"><button id="program-save-modal-ok" class="btn btn-info" type="button">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
									</button></a>
							</div>
						</div>
					</div>
				</div>
				
				<!-- <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-reject-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Reject Program Changes?</h4>
                            </div>
							<div class="modal-body">
								<div class="space15">&nbsp;</div>
								<div class="text-center">Are you sure you want to Reject Changes? If you still want to reject your changes, click the OK button. If you don't want to reject your changes, click the "Cancel" button below and your program will not reject these changes. </div>
                                <div class="space15"></div>
							</div>
							<div class="modal-footer">
								<button data-dismiss="modal" class="btn btn-default" id="program-reject-modal-cancel"
									type="button">Cancel</button>
								<a href="javascript: rejectProgram()"><button id="program-reject-modal-ok" class="btn btn-info" type="button">
										<i class="fa fa-times-circle"></i>&nbsp;&nbsp;OK
									</button></a>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-approve-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Approve Program Changes?</h4>
                            </div>
							<div class="modal-body">
								<div class="space15">&nbsp;</div>
								<div class="text-center">Are you sure you want to Approve Changes? If you still want to Approve your changes, click the OK button. If you don't want to approve your changes, click the "Cancel" button below and your program will not approve these changes. </div>
                                <div class="space15"></div>
							</div>
							<div class="modal-footer">
								<button data-dismiss="modal" class="btn btn-default" id="program-approve-modal-cancel"
									type="button">Cancel</button>
								<a href="javascript: approveProgram()"><button class="btn btn-info" type="button" id="program-approve-modal-ok">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
									</button></a>
							</div>
						</div>
					</div>
				</div> -->
				
				<div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-confirmation-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Confirmation</h4>
                            </div>
							<div class="modal-body">
								<!-- <div class="space15">&nbsp;</div> -->
								<div class="text-center"> <span id="confirmMessage"></span> </div>
                                <!-- <div class="space15"></div> -->
							</div>
							<div class="modal-footer">
								<button class="btn btn-info" type="button" id="program-confirmation-modal-ok" data-dismiss="modal">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
								</button>
							</div>
						</div>
					</div>
				</div>
				
				<div class="modal fade" id="myModal5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-error-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Error / Warning (s)</h4>
                            </div>
							<div class="modal-body">
								<!-- <div class="space15">&nbsp;</div> -->
								<div class="text-center"> <span id="errorMessageModal"></span> </div>
                                <!-- <div class="space15"></div> -->
							</div>
							<div class="modal-footer">
								<button class="btn btn-info" type="button" id="program-error-modal-ok" data-dismiss="modal" >
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK
								</button>
							</div>
						</div>
					</div>
				</div>
				
				<div class="modal fade" id="myModal6" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-comment-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Confirmation</h4>
                            </div>
							<div class="modal-body">
								<div class="row">
									<div class="col-lg-12">
										<div class="text-left">
											<label class="control-label;text-align: center;" for="approveComments">Please enter comments: </label>
										</div>
											<textarea maxlength="2000" id="approveComments" name="approveComments" class="form-control"></textarea>
                                    </div>
								</div>
							</div>
							<div class="modal-footer">
								<button data-dismiss="modal" class="btn btn-default" id="program-comment-modal-cancel"
									type="button">Cancel</button>
								<a href="javascript: approveProgram()"><button class="btn btn-info" type="button" id="program-comment-modal-ok">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				
				<div class="modal fade" id="myModal7" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                	<div class="modal-dialog">
                    	<div class="modal-content">
                        	<div class="modal-header">
                            	<button id="program-rej-comment-modal-close" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Confirmation</h4>
                            </div>
							<div class="modal-body">
								<div class="row">
									<div class="col-lg-12">
										<div class="text-left">
											<label class="control-label;text-align: center;" for="rejectionComments">Please enter comments: </label>
										</div>
											<textarea maxlength="2000" id="rejectionComments" name="rejectionComments" class="form-control"></textarea>
                                    </div>
								</div>
							</div>
							<div class="modal-footer">
								<button data-dismiss="modal" class="btn btn-default" id="program-rej-comment-modal-cancel"
									type="button">Cancel</button>
								<a href="javascript: rejectProgram()"><button class="btn btn-info" type="button" id="program-rej-comment-modal-ok">
										<i class="fa fa-save"></i>&nbsp;&nbsp;OK</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="myModal11" tabindex="-1"
															role="dialog" aria-labelledby="myModalLabel"
															aria-hidden="true">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button id="program-save-modal-close" type="button"
																			class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
																		<h4 class="modal-title">Cancel Program Changes?</h4>
																	</div>
																	<div class="modal-body">
																		<div class="space15">&nbsp;</div>
																		<div class="text-center">Are you sure you want
																			to cancel Changes? If you still want to cancel your
																			changes, click the OK button. If you don't want to
																			cancel your changes, click the "Cancel" button below
																			and your program will not cancel these changes.</div>
																		<div class="space15"></div>
																	</div>
																	<div class="modal-footer">
																		<button data-dismiss="modal" class="btn btn-default"
																			id="program-save-modal-cancel" type="button">Cancel</button>
																		<a href="javascript: forwardToCustomerPage()"><button
																				class="btn btn-info" id="program-save-modal-ok"
																				type="button">
																				<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																			</button></a>
																	</div>
																</div>
															</div>
														</div>
																<div class="modal fade" id="myModal9" tabindex="-1"
																	role="dialog" aria-labelledby="myModalLabel"
																	aria-hidden="true">
																	<div class="modal-dialog">
																		<div class="modal-content">
																			<div class="modal-header">
																				<button id="program-workflow-close" type="button"
																					class="close" data-dismiss="modal"
																					aria-hidden="true">&times;</button>
																				<h4 class="modal-title">Workflow status</h4>
																			</div>
																			<div class="modal-body">
																				<div class="read_only">
																					<table
																						class="table table-striped table-hover table-bordered"
																						id="workflow-status-table">
																						<thead>
																							<tr>
																								<th class="text-center">Approver Name</th>
																								<th class="text-center">Approver Role</th>
																								<th class="text-center">Action</th>
																								<th class="text-center">Date</th>
																							</tr>
																						</thead>
																						<tbody>
																						</tbody>
																					</table>
																				</div>
																			</div>
																			<div class="modal-footer">
																				<button class="btn btn-info" type="button"
																					id="program-workflow-ok" data-dismiss="modal">
																					<i class="fa fa-save"></i>&nbsp;&nbsp;OK
																				</button>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="space15">&nbsp;</div>
			<div class="text-center"> If you want to save these changes for later, click 'Save Changes'. If you want to submit these changes, click "Submit For Approval". If you don't want to save your changes, click the "Cancel" button below and your program will not save these changes. </div>
			<div class="space15"></div>
			
          </div>
          
          <!-- BUTTON END -->
        </div>
       </div>
      </section>
      <!---- END Review / Confirm Section -->
      </div>
       </form>
        </div>
      </section><!-- end panel section -->
      </div>
      </div>
      <!-- page end-->
      </section><!-- end wrapper site-min-height -->
      </section><!-- end #maincontent -->
      <!--main content end-->
          
      <!--footer start-->
      <footer class="site-footer">
         <div class="text-center">
            2017 &copy; Yokohama Tire Corporation. All rights reserved. The Yokohama Rubber Company Limited
            <a href="#" class="go-top">
            <i class="fa fa-angle-up"></i>
            </a>
         </div>
      </footer>
      <!--footer end-->
      </section>
      <!-- END section id="container" FIRST section after opening body tag  -->
       
      <!-- js placed at the end of the document so the pages load faster -->
      <script src="resources/js/jquery.js"></script>
      <script src="resources/js/bootstrap.min.js"></script>
      <script src="resources/js/jquery-ui-1.9.2.custom.min.js"></script>
      <script src="resources/js/jquery-migrate-1.2.1.min.js"></script>
      <script class="include" type="text/javascript" src="resources/js/jquery.dcjqaccordion.2.7.js"></script>
      <script src="resources/js/jquery.scrollTo.min.js"></script>
      <script src="resources/js/jquery.nicescroll.js" type="text/javascript"></script>
      <script src="resources/js/respond.min.js" ></script>
      <script src="resources/js/jquery.stepy.js"></script>
      <!--right slidebar-->
      <script src="resources/js/slidebars.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/moment.min.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
      <script type="text/javascript" src="resources/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
      <script type="text/javascript" src="resources/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/jquery.dataTables.js"></script>
      <script type="text/javascript" src="resources/assets/data-tables/DT_bootstrap.js"></script>
      <!--select2-->
      <script type="text/javascript" src="resources/assets/select2/js/select2.min.js"></script>
      <!--Form Validation-->
      <script src="resources/js/bootstrap-validator.min.js" type="text/javascript"></script>
      <!--Form Wizard-->
      <!--script src="js/jquery.steps.min.js" type="text/javascript"></script-->
      <script src="resources/js/jquery.validate.min.js" type="text/javascript"></script>
      <!--common script for all pages-->
      <script src="resources/js/common-scripts.js"></script>
      <!--script for this page-->
      <script>
         //step wizard
         
         $(function() {
             $('#default').stepy({
                 backLabel: 'Cancel',
                 block: true,
                 nextLabel: 'Save As Draft',
                 titleClick: true,
                 titleTarget: '.stepy-tab'
             });
         });
      </script>

    <script type="text/javascript">

      $(document).ready(function () {
      		$("#wizard-validation-form").validate({
				rules: {
					program_name_inputselect: {
						required: true
					},
					payout_freq_inputselect:{
						required: true
					},
					from: {
						required: true
					},
					to: {
						required: true
					},
					payto_inputselect: {
						required: true
					},
					payment_method_inputselect: {
						required: true
					},
					paid_basedon_inputselect: {
						required: true
					},
					amount: {
						required: true,
						number: false
					},
					glcode_dropdown:{
						required: true
					},
					optionsRadiosDenomination: {
						required: true
					}
				},
				messages: {
					required: "This field is required",
				   	amount: {
					   	number: "Please enter only numeric values"
				   	},
				}
			});
      
			/* var form = $("#wizard-validation-form");
			onFinishing: {
			    form.validate().settings.ignore = ":disabled";
			    return form.valid();
			}
			onFinished: {
			       alert("You've successfully submitted this program for approval. You'll be notified of its status soon."); 
			       location.href = 'index.html#pending-approvals';
			} */
      });

  </script>
      <!--select2-->
      <script type="text/javascript">
         $(document).ready(function () {
             $(".js-example-basic-single").select2();
         
             $(".js-example-basic-multiple").select2();
         });
         
         function closeSidebar(){
 			if ($('#sidebar > ul').is(":visible") === true) {
 	            $('#main-content').css({
 	                'margin-left': '0px'
 	            });
 	            $('#sidebar').css({
 	                'margin-left': '-210px'
 	            });
 	            $('#sidebar > ul').hide();
 	            $("#container").addClass("sidebar-closed");
        		}
 			$('#sidebar-toggle-box').css({
 		           'display': 'none'
 		       });
 		}
         
         function openSidebar() {
             $('#main-content').css({
                 'margin-left': '210px'
             });
             $('#sidebar > ul').show();
             $('#sidebar').css({
                 'margin-left': '0'
             });
             $("#container").removeClass("sidebar-closed");
             $('#sidebar-toggle-box').css({
                 'display': 'block'
             });
         }
      </script>
      <!--this page  script only-->
      <script src="resources/js/advanced-form-components.js"></script>
      <script src="resources/js/editable-table-form.js"></script>
      
      <script>
         jQuery(document).ready(function() {
             EditableTable.init();
         });
      </script>
 <!--Tooltips -->
       <script>
            $(document).ready(function(){
                $('input[rel="txtTooltip"]').tooltip();
            });
       </script>
       <script>
           $(function(){

            // Enabling Popover Example 1 - HTML (content and title from html tags of element)
            $("[data-toggle=popover]").popover();

            // Enabling Popover Example 2 - JS (hidden content and title capturing)
            $(".form-control").popover({
                html : true, 
                content: function() {
                  return $('.js-tooltip').html();
                },
                title: function() {
                  return $('.js-tooltip').html();
                }
            });


        });
       </script>
       
     <script type="text/javascript">
		$(document).ready(function(){
            $('#workflow-status-table').dataTable({
            	"iDisplayLength": 50,
            	"bDestroy": true,
            	"sPaginationType": "bootstrap",
            	"sDom": 't',
				"aoColumns": [
					{ "sClass": "text-left" },
					{ "sClass": "text-left" },
					{ "sClass": "text-left" },
					{ "sClass": "center" }
				]
            });
		});	
	</script>
    
    <!-- Inline javascript to set the user name from model attribute Begin -->
	<script type="text/javascript" th:inline="javascript">
		$(document).ready(function() {
		   var modelAttributeValue = [[${loginUserNameValue}]];
		   $("#loginUserName").html(modelAttributeValue);
		   var emp = [[${EmployeeInfo}]];
		   if(2!=emp[0].ROLE_ID)
		   	{
		   		openSidebar();
			}
		   
		   $.ajax({ 
            	type: "GET",
            	dataType: "json",
           	url: '/SIM/isTbpUser',
            	success: function(response){
            		if(!response){
            			$("#tbpchk").hide();
            			tbp=false;
            		}else{
             			$('#glcode_dropdown').attr('disabled', false);
             			tbp=true;
             		}
            	},
            	failure: function(response){
            		alert("Wrongly done");
            	}
        	});
		});
	</script>
	<!-- Inline javascript to set the user name from model attribute End -->
	
	<script>
		$(document).ready(function(){
	       $('#from').datepicker();
	       $('#to').datepicker();
		});
		
		
		var responseOnload;
		var _isDirty = false; 
		//getParams = new URLSearchParams(window.location.search);
		var queryDict = {};
	        window.location.search.substr(1).split("&").forEach(
	        function(item) {
	        queryDict[item.split("=")[0]] = item.split("=")[1]
         })
		//var programId =getParams.get('pgmId'); 
		var programId=queryDict["pgmId"];
		if(programId == null){
			$("#create-program").addClass("active");
			$("#reject-program").hide();
			$("#edit-button").hide();
			$("#pdf-button").hide();
			$("#approve-program").hide();
			$("#editabletest").hide();
			$("#programSummaryTitleId").hide();
		}
		else{
			$("#edit-program").addClass("active");
		}
		var programType = queryDict["programType"];
		var custId = queryDict["custId"]; 
		var url="/SIM/program/v1/getProgramDetail/" + programId;
		if(null==programId){
			url="/SIM/program/v1/getProgramDetailCreate/"+ programType + "/" + custId;
		}
		
		$(window).ready(function(){
         	$.ajax({ 
             	type: "GET",
             	dataType: "json",
            	url: url,
             	success: function(response){
             		responseOnload = response.data;
					fnPopulateProgramDetails(response);
					_isDirty = false;
             	},
             	failure: function(response){
             		alert("Wrongly done");
             	}
         	});
		});
		
		
		
		function fnPopulateProgramDetails(response){
         	
				includePaid = response.data.programDetailList[0].programPaidOn.includedMap;
				excludePaid = response.data.programDetailList[0].programPaidOn.excludedMap;
            		
				/* var a = document.getElementById('cancelLink'); //for now. this has to be revisited.
				a.href = "/SIM/customer?custId=" + response.data.customerId; */
            		
            	/*Program Header Section*/
				$("#customerId").html(response.data.customerId);
               	$("#customerName").html(response.data.customerName);
               	$("#businessUnit").html(response.data.businessUnit);
               	$("#programId").html(response.data.programDetailList[0].id);
               	$("#requestId").html(response.data.requestId);
               	$("#requestedBy").html(response.data.requestedBy);
               	if(response.data.requestedDate != null){
               		$('#requestedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.requestedDate)));
               	}
               	$('#createdBy').html(response.data.createdBy);
               	if(response.data.createdDate != null){
               		$('#createdDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.createdDate)));
               	}
               	$('#createdBy').html(response.data.createdBy);
               	$('#programTypeHeader').html(response.data.programDetailList[0].programType);
               	$('#status').html(response.data.status);
               	
               	$('#zoneManagerApprovedBy').html(response.data.zoneManagerApprovedBy);
               	if(response.data.zoneManagerApprovedDate != null){
               		$('#zoneManagerApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.zoneManagerApprovedDate)));
               	}
               	/* $('#directorApprovedBy').html(response.data.directorApprovedBy);
               	if(response.data.directorApprovedDate != null){
               		$('#directorApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.directorApprovedDate)));
               	}
               	$('#executiveApprovedBy').html(response.data.executiveApprovedBy);
               	if(response.data.executiveApprovedDate != null){
               		$('#executiveApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.executiveApprovedDate)));
               	} */
               	$('#tbpApprovedBy').html(response.data.tbpApprovedBy);
               	if(response.data.tbpApprovedDate != null){
               		$('#tbpApprovedDate').html($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.tbpApprovedDate)));
               	}
               	
               	$('#accrualAmount').html(response.data.accrualAmount);
               	$('#paidAmount').html(response.data.paidAmount);
               	$('#balance').html(response.data.balance);
               	
               	/*Program Detail Section*/
               	$("#detailProgramId").val(response.data.programDetailList[0].id);
               	$("#amount").val(response.data.programDetailList[0].amount);
               	if(response.data.programDetailList[0].amountType == "%"){
               		$("#optionsRadiosPercentage").prop('checked', true);
               	}
               	else{
               		$("#optionsRadiosDollarSign").prop('checked', true);
               	}  
               	
               	$('#from').datepicker({ 
   					dateFormat: 'mm/dd/yy'
    				}); 
    							
    				                	
               	$('#to').datepicker({ 
					dateFormat: 'mm/dd/yy'
    				});
    			$('#from').datepicker('setValue', $.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].beginDate)));
    			$('#to').datepicker('setValue', $.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].endDate)));
/*                	$('#from').val($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].beginDate)));
               	$('#to').val($.datepicker.formatDate( "mm/dd/yy", new Date(response.data.programDetailList[0].endDate))); */
               	$('#from').datepicker('update', new Date(response.data.programDetailList[0].beginDate));
               	$('#to').datepicker('update', new Date(response.data.programDetailList[0].endDate));
               	resetFormForMandatoryCheck("from");
               	resetFormForMandatoryCheck("to");
               	
               	fnPopulateDropdown('program_name_inputselect', response.data.programDetailList[0].dropdownList.programNameList);
               	$('#program_name_inputselect').val(response.data.programDetailList[0].programName);
               	
               	fnPopulateDropdown('payout_freq_inputselect', response.data.programDetailList[0].dropdownList.payoutFrequenceList);
               	$('#payout_freq_inputselect').val(response.data.programDetailList[0].payoutFrequency);
               	
               	fnPopulateDropdown('payto_inputselect', response.data.programDetailList[0].dropdownList.payToList);
               	$('#payto_inputselect').val(response.data.programDetailList[0].payTo);
               	
               	fnPopulateDropdown('payment_method_inputselect', response.data.programDetailList[0].dropdownList.paidTypeList);
               	$('#payment_method_inputselect').val(response.data.programDetailList[0].paidType);
               	
               	fnPopulateDropdown('paid_basedon_inputselect', response.data.programDetailList[0].dropdownList.paidBasedOnList);
               	$('#paid_basedon_inputselect').val(response.data.programDetailList[0].paidBasedOn);
               	
               	$('#longDesc').val(response.data.programDetailList[0].longDesc);
               	
               	/*Program Paid Based on section*/
               	fnPopulateDropdown('paidBasedOn', response.data.programDetailList[0].programPaidOn.tagItemList);
               	fnPopulatePaidDetails(response);
               	
               	fnPopulateDropdown('glcode_dropdown', response.data.programDetailList[0].dropdownList.glCodeList);
               	$('#glcode_dropdown').val(response.data.programDetailList[0].glCode);
                
               	if(response.data.programDetailList[0].tbpCheck == '1'){
               		$("#tbpCheck").prop('checked', true);
               	}else
               	{
               	    $("#tbpCheck").prop('checked', false);
               	}
                /**Commentary/ Special instructions*/
               	$("#userComments").val(response.data.programDetailList[0].comments);
               
               	/**WORKFLOW related information*/
                fnPopulateProgramWorkflowStatus(response.data.programWorkflowStatusList);
                /* Field enable and disable logic during page load.*/
               	if(programId != null){
               	
               		/**By calling the below method, all the fields, button and hyperlink will be disabled.
               		*  except cancel, program header expand button's*/
               		disableFields();
               		
               		hideShowButtonsOnLoad(response.data);
               	}
               	
               	if($('#userComments').is(':disabled')){
               		$('#userComments').removeAttr('placeholder');
               	}

               	fnPopulateProgramDetailTable();
               	
               	enabledButtonApplicableToAll();
         	}
         	
         	function fnPopulateProgramWorkflowStatus(workflowStatus){
         		var table = $("#workflow-status-table").DataTable();
         		table.fnClearTable();
         		if(workflowStatus != null){
         			$.each(workflowStatus, function(idx, item) {
         					var date = null;
         					if(item.approvalDate != null){
         						date = $.datepicker.formatDate( "mm/dd/yy", new Date(item.approvalDate));
         					}
							table.fnAddData([item.approverName, item.approverRole, item.status, date
	                    ]);
	                });
         		}
         		table.fnDraw();
         	}
         	
			function hideShowButtonsOnLoad(responseOnload1){
         		if(responseOnload1.authorizedUser == 'Yes' && responseOnload1.programButton.userLevel == "1" && responseOnload1.programButton.creater == true){
					$('#edit-button').attr('disabled', false);
					$('#edit-button').removeClass("disabled");
					$('#modal-edit-cancel').attr('disabled', false);
					$('#modal-edit-ok').attr('disabled', false);
					$('#modal-edit-close').attr('disabled', false);
					hideApproverButtons();
					if(responseOnload1.newProgram == false && responseOnload1.status != 'REJECTED'){
	               		$('#submit-program').attr('disabled', false);
						$('#submit-program').removeClass("disabled");
						$('#program-submit-modal-cancel').attr('disabled', false);
						$('#program-submit-modal-ok').attr('disabled', false);
						$('#program-submit-modal-close').attr('disabled', false);	
						$('#save-program').hide();
               		}
               		else if(responseOnload1.newProgram == false && responseOnload1.status === 'REJECTED'){
               			/**Buttons should be visible, but disabled.*/
               			$('#save-program').show();
               			$('#submit-program').show();
               		}
               		else if(responseOnload1.newProgram == false){
               			showCreatorButtons();
               		}
				}
				/*For simplicity , for now check only one button property to set all the approver button property value.*/
				else if(responseOnload1.programButton.approver == true){
					hideCreatorButtons();
					showApproverButtons();
					$('#edit-button').hide();
				}
				else{
					/**Nothing should be editable in screen.*/
					hideCreatorButtons();
					hideApproverButtons();
					$('#edit-button').hide();
				}
         	}
         	
			function hideCreatorButtons(){
         		$('#save-program').hide();
         		$('#submit-program').hide();
         	}
         	
         	function showCreatorButtons(){
         		$('#save-program').show();
         		$('#save-program').attr('disabled', false);
         		$('#save-program').removeClass("disabled");
         		$('#program-save-modal-close').attr('disabled', false);
         		$('#program-save-modal-cancel').attr('disabled', false);
         		$('#program-save-modal-ok').attr('disabled', false);
         		$('#submit-program').show();
         		$('#submit-program').attr('disabled', false);
         		$('#submit-program').removeClass("disabled");
         		$('#program-submit-modal-close').attr('disabled', false);
         		$('#program-submit-modal-cancel').attr('disabled', false);
         		$('#program-submit-modal-ok').attr('disabled', false);
         	}
         	
         	function hideApproverButtons(){
         		$('#reject-program').hide();
         		$('#approve-program').hide();
         	}
         	
         	function showApproverButtons(){
         		$('#reject-program').show();
         		$('#reject-program').attr('disabled', false);
         		$('#reject-program').removeClass("disabled");
/*          		$('#program-reject-modal-close').attr('disabled', false);
         		$('#program-reject-modal-cancel').attr('disabled', false);
         		$('#program-reject-modal-ok').attr('disabled', false); */
         		$('#approve-program').show();
         		$('#approve-program').attr('disabled', false);
         		$('#approve-program').removeClass("disabled");
/*          		$('#program-approve-modal-close').attr('disabled', false);
         		$('#program-approve-modal-cancel').attr('disabled', false);
         		$('#program-approve-modal-ok').attr('disabled', false); */
         	}
         	
		function fnPopulateProgramDetailTable(){                
     		$('#editabletest tbody').find('tr').each(function(i) {

                var $tds = $(this).find('td'),
                marker = $tds.eq(0).text(),
                amount = $tds.eq(1).text(),
                range = $tds.eq(2).text();
                $tds.eq(0).text(responseOnload.programDetailList[0].id);
                $tds.eq(1).text($('#program_name_inputselect option:selected').text());
                $tds.eq(2).text($('#payout_freq_inputselect option:selected').text());
                $tds.eq(3).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].beginDate)));
                $tds.eq(4).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].endDate)));
                $tds.eq(5).text($('#btl_inputselect option:selected').text());
                $tds.eq(6).text($('#pricing_type_inputselect option:selected').text());
                $tds.eq(7).text($('#paid_basedon_inputselect option:selected').text());
                $tds.eq(8).text((responseOnload.programDetailList[0].programPaidOn.isTiered==true)?'Yes':'No');
                $tds.eq(9).text($('#achieve_basedon_inputselect option:selected').text());
                $tds.eq(10).text((responseOnload.programDetailList[0].programPaidOn.isTrueUp==true)?'Yes':'No');
                $tds.eq(11).text($("#amount").val());
                $tds.eq(12).text(responseOnload.programDetailList[0].amountType);
                
                
                $('#tier-schedule tbody').find('tr').each(function(i) {
                	 var tds = $(this).find('td'),
                     marker = tds.eq(0).text(),
                     amount = tds.eq(1).text(),
                     range = tds.eq(2).text();
                	 
                	 if(marker==responseOnload.programDetailList[0].actualMarker){
                		 $tds.eq(13).text(responseOnload.programDetailList[0].actualMarker);
                         $tds.eq(14).text(range);
                         $tds.eq(15).text(amount+responseOnload.programDetailList[0].amountTypeTier); 
                         if('$'==responseOnload.programDetailList[0].amountTypeTier){
                        	 $tds.eq(15).text(responseOnload.programDetailList[0].amountTypeTier+amount);  
                         }
                	 }
                });
               
                $tds.eq(16).text(0);
                $tds.eq(17).text(0);
                $tds.eq(18).text(0);
                $tds.eq(19).text(0);
                $tds.eq(20).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].createdDate)));
                $tds.eq(21).text($.datepicker.formatDate( "mm/dd/yy", new Date(responseOnload.programDetailList[0].modifiedDate)));
            });
     	}
         	function fnPopulatePaidDetails(response){
				fnPopulateTextArea(response.data.programDetailList[0].programPaidOn.includedMap, 'include');
				fnPopulateTextArea(response.data.programDetailList[0].programPaidOn.excludedMap, 'exclude');
         	}
         	
         	function fnPopulateTextArea(valueMap, elementId){
         	    var includedList = valueMap;
         		var dest = document.getElementById(elementId);
         		if(includedList != null){
         		    $.each(includedList, function (i, includedMap) {
					    var includedValue = includedMap;
					    $.each(includedValue, function (i, value) {
							var newOption=document.createElement("option");
							newOption.value=value;
							newOption.text=value;
							try{
								dest.add(newOption.value,null);
							}
							catch(error){
								if(dest == null){
									console.log("dest value cannot be null here. Having this logger for testing purpose.. value of element id : "+elementId);
									dest = document.getElementById(elementId);
								}
								dest.add(newOption);
							}
					    });
					});
         		}
         	}

         	function prepareDataForSubmit(){
         		responseOnload.url = window.location.href;
				responseOnload.programDetailList[0].amount = $("#amount").val().replace(/,/g, "");
				responseOnload.programDetailList[0].amountType = $('input:radio[name=optionsRadiosDenomination]:checked').val();
 				responseOnload.programDetailList[0].beginDate = $.datepicker.parseDate( "mm/dd/yy", $('#from').val());
				responseOnload.programDetailList[0].endDate = $.datepicker.parseDate( "mm/dd/yy", $('#to').val());  
				responseOnload.programDetailList[0].programName = $('#program_name_inputselect').val();
				responseOnload.programDetailList[0].payTo = $('#payto_inputselect').val();
				responseOnload.programDetailList[0].paidType = $('#payment_method_inputselect').val();
				responseOnload.programDetailList[0].paidBasedOn = $('#paid_basedon_inputselect').val();
				responseOnload.programDetailList[0].payoutFrequency = $('#payout_freq_inputselect').val();
				responseOnload.programDetailList[0].longDesc = $("#longDesc").val();
				//responseOnload.programDetailList[0].glCode = parseInt($('#glcode_dropdown').val());
				if(($('#glcode_dropdown').val()=='')||($('#glcode_dropdown').val()==null)){
					responseOnload.programDetailList[0].glCode = '0';	
				}else{
					responseOnload.programDetailList[0].glCode = $('#glcode_dropdown').val();	
				}
				//responseOnload.programDetailList[0].tbpCheck = parseInt($('#tbpCheck').val());
				if($('#tbpCheck').is(":checked")){
					responseOnload.programDetailList[0].tbpCheck = '1';
				}
				else
				{
				    responseOnload.programDetailList[0].tbpCheck = '0';
				}
				
					
				
				/**Save Commentary/Special Instructions */
				responseOnload.programDetailList[0].comments = $("#userComments").val();
				
				responseOnload.programDetailList[0].programPaidOn.includedMap = includePaid;
				responseOnload.programDetailList[0].programPaidOn.excludedMap = excludePaid;
         	}

			function enableFields(){
				$('#program-parent-div').find('input, textarea, button, select, a').attr('disabled',false);
				$("#program-parent-div").find('a').removeClass("disabled");
				$('#myModalEdit').modal('toggle');
				if(responseOnload.newProgram == false){
					$('#save-program').show();
               	}
               	$('#edit-button').attr('disabled', true);
				$('#edit-button').addClass("disabled");
				if(!tbp){
					$('#glcode_dropdown').attr('disabled', true);
					}
			}
			function disableFields(){
				$('#program-parent-div').find('input, textarea, button, select, a').attr('disabled',true);
				 //.btn.disabled
				$("#program-parent-div").find('a').addClass("disabled");
				enabledButtonApplicableToAll();
			}
			
			function enabledButtonApplicableToAll(){
				$('#program-expand').attr('disabled', false);
				$('#program-expand').removeClass("disabled");
				$('#pdf-button').attr('disabled', false);
				$('#cancel-program').attr('disabled', false);
				$('#cancelLink').attr('disabled', false);
				$('#cancelLink').removeClass("disabled");
				$('#myModal4').find('button').attr('disabled',false);
				$('#myModal5').find('button').attr('disabled',false);
				$('#myModal6').find('button, a, textarea').attr('disabled',false);
				$('#myModal7').find('button, a, textarea').attr('disabled',false);
				$('#myModal9').find('button, a, textarea').attr('disabled',false);
				$('#myModal11').find('button, a, textarea').attr('disabled',false);
				$('#header-button').removeAttr('hidden');
				$('#footer-button').removeAttr('hidden');
				$('#view-program-workflow').attr('disabled', false);
				$('#view-program-workflow').removeClass("disabled");
				$('#program-workflow-btn').attr('disabled', false);
			}
			
			function approveProgram(){
				var message = "Data approved successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
				responseOnload.status = "2";
				responseOnload.userComments = $("#approveComments").val();
				responseOnload.url = window.location.href;
				fnCallService(message, idBefore);
				$('#myModal6').modal('toggle');
				disableFields();
			}
			
			function rejectProgram(){
				var message = "Data rejected successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
				responseOnload.status = "1";
				responseOnload.url = window.location.href;
				responseOnload.userComments = $("#rejectionComments").val();
				fnCallService(message, idBefore);
				$('#myModal7').modal('toggle');
				disableFields();
			}
         	function saveDraft(){
         		var message = "Data saved successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
				responseOnload.status = "3";
         		prepareDataForSubmit();
         		fnCallService(message, idBefore);
         		$('#myModal1').modal('toggle');
         		if(!$("#pdf-button").is(":visible")){
         			$("#pdf-button").show();
         		}
         	}
         	
			function submitForApproval(){
				var message = "Data submitted for approval successfully !!!";
         		var idBefore = responseOnload.programDetailList[0].id;
				responseOnload.status = "2";
				prepareDataForSubmit();
				fnCallService(message, idBefore);
				$('#myModal').modal('toggle');
				disableFields();
				if(!$("#pdf-button").is(":visible")){
         			$("#pdf-button").show();
         		}
			}
						
			function validateBeforeSubmit(modalId){
				/**If valid, it will toggle the corresponding modal.
				If there is some error, error modal will be toggled.*/
				if($("#wizard-validation-form").valid()){
					$(modalId).modal('toggle');
				}
				else{
					$("#errorMessageModal").html("Please rectify the highlighted errors !!!");
					$('#myModal5').modal('toggle');
				}
			}
			
			function fnCallService(message, idBefore){
				/*Service call to save the data.*/				
			    $.ajax({
					type: "POST",
					url: "/SIM/program/v1/saveProgramDetails",
					dataType: 'json',
					contentType: 'application/json',
					data: JSON.stringify(responseOnload),
					success: function (response) {
			            if (response != null && response.data.success == true && response.data.duplicate == false) {
			            	responseOnload = response.data;
			            	$("#programId").html(response.data.programDetailList[0].id);
							$('#status').html(response.data.status);
							fnPopulateProgramWorkflowStatus(response.data.programWorkflowStatusList);
							fnPopulateProgramDetailTable();
							$("#editabletest").show();
							$("#programSummaryTitleId").show();
							/**Appending program id in the modal message.- Begin*/
							var idAfter = responseOnload.programDetailList[0].id;
							if(idBefore != idAfter){
								var newMessage = "New program id generated : <strong>"+ idAfter + "</strong><br> <br>"+ message;
								message = newMessage; 
							}
							$("#confirmMessage").html(message);
							$('#myModal4').modal('toggle');
							/**Appending program id in the modal message.- End*/
							_isDirty = false;
			            }
			            else if(response.data.duplicate == true)
			            {
			              var idAfter = response.data.id;
			              $("#confirmMessage").html("Program already exist and the previous programme id is <strong>"+ idAfter + "</strong>");
						  $('#myModal4').modal('toggle');
			            }
			             else {
							alert("Issue while saving the data. Please try again after sometime.!!");
			            }
					},
					failure: function(response){
						alert("Issue while saving the data. Please try again after sometime.!!");
					}
			    });
			}

         	function resetFormForMandatoryCheck(elementId){
         		if( $('#'+ elementId).valid()){
				   $('#'+ elementId).validate().resetForm(); 
				}
         	}
         	
         	
         	function fnPopulateDropdown(elementId, items){
	         	if(items != null){
	         		$.each(items, function (i, item) {
					    $('#'+ elementId).append($('<option>', { 
					        value: item.key,
					        text : item.value 
					    }));
					});
					resetFormForMandatoryCheck(elementId);
	         	}
			}

    		$('#myModal6').on('shown.bs.modal', function () {
			    $('#approveComments').focus();
			});
			
			$('#myModal7').on('shown.bs.modal', function () {
			    $('#rejectionComments').focus();
			})
			
			 $(document).on('keyup', "#amount", function () {
					var value = $(this).val();
					if(value != null && value != 'undefined' ){
						 value = value.toString().replace(/,/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",");
						    $(this).val(value);
            		}
				   
				}); 
			function cancellink(modalId){
				if(_isDirty){
					$('#myModal11').modal('toggle');
				}
				else{
					forwardToCustomerPage();
				}
			}
			function forwardToCustomerPage()
			{
			  window.location.href="/SIM/customer?custId=" + responseOnload.customerId; 
			}	

	</script>
	
	<script type="text/javascript">
		$(document).ready(function() {
			
			$('#program_name_inputselect').change(function(){
				 $('#glcode_dropdown').val(''); 
				 if($('#programTypeHeader').html()=='COOP'){
					 pgmType='COP';
				 }else{
					 pgmType='DDF';
				 }
				if(responseOnload.businessUnit=='P'){
					key=($('#program_name_inputselect option:selected').text())+' - '+'Consumer';
				}else{
					key=($('#program_name_inputselect option:selected').text())+' - '+'Commercial';
				}
				$.each(responseOnload.programDetailList[0].glCodeList, function (i, item) {
					   if((key==item.glBucket)&&(item.pcs==pgmType)){
						   $('#glcode_dropdown').val(item.id); 
					   }
					});
				
			});
			
			$('#pdf-button').click(function () {
				//alert(responseOnload.programDetailList[0].id);
				var a = document.createElement('a');
			    a.href = '/SIM/program/v1/downloadPDF/'+responseOnload.programDetailList[0].id;
				a.download =  'ProgramDetails_'+responseOnload.programDetailList[0].id+'.pdf';
			    a.click(); 
			});
		});
		
		$(':input').change(function(){
			_isDirty = true;
		});
	</script>

	<!-- END JAVASCRIPTS -->
       
	</body>
</html>